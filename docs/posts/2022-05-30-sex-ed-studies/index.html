<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-0.9.479">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Richard Layton">
<meta name="dcterms.date" content="2022-06-01">
<meta name="description" content="Combining the results of studies with different time spans in a single chart when changes over time are the story.">

<title>Layton R blog - Graphing the results of separate studies over time</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
<script src="..\..\site_libs\quarto-nav\quarto-nav.js"></script>
<script src="..\..\site_libs\quarto-nav\headroom.min.js"></script>
<script src="..\..\site_libs\clipboard\clipboard.min.js"></script>
<script src="..\..\site_libs\quarto-search\autocomplete.umd.js"></script>
<script src="..\..\site_libs\quarto-search\fuse.min.js"></script>
<script src="..\..\site_libs\quarto-search\quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/favicon.png" rel="icon" type="image/png">
<script src="..\..\site_libs\quarto-html\quarto.js"></script>
<script src="..\..\site_libs\quarto-html\popper.min.js"></script>
<script src="..\..\site_libs\quarto-html\tippy.umd.min.js"></script>
<script src="..\..\site_libs\quarto-html\anchor.min.js"></script>
<link href="..\..\site_libs\quarto-html\tippy.css" rel="stylesheet">
<link href="..\..\site_libs\quarto-html\quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="..\..\site_libs\bootstrap\bootstrap.min.js"></script>
<link href="..\..\site_libs\bootstrap\bootstrap-icons.css" rel="stylesheet">
<link href="..\..\site_libs\bootstrap\bootstrap.min.css" rel="stylesheet">
</head>

<body class="nav-sidebar floating nav-fixed slimcontent">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Layton R blog</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../contact.html">Contact</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">About</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/graphdr/data-stories"><i class="bi bi-git" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"><i class="bi bi-rss" role="img">
</i> 
 </a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Graphing the results of separate studies over time</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://r-bloggers.com" class="sidebar-item-text sidebar-link">r-bloggers</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://stackoverflow.com/questions/tagged/r" class="sidebar-item-text sidebar-link">stackoverflow</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://rdatatable.gitlab.io/data.table/" class="sidebar-item-text sidebar-link">data.table</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://happygitwithr.com/" class="sidebar-item-text sidebar-link">happy git</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-original-chart" id="toc-the-original-chart" class="nav-link active" data-scroll-target="#the-original-chart">The original chart</a></li>
  <li><a href="#data-structure" id="toc-data-structure" class="nav-link" data-scroll-target="#data-structure">Data structure</a></li>
  <li><a href="#redesign" id="toc-redesign" class="nav-link" data-scroll-target="#redesign">Redesign</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/graphdr/data-stories/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Graphing the results of separate studies over time</h1>
  <div class="quarto-categories">
    <div class="quarto-category">R</div>
    <div class="quarto-category">Data storytelling</div>
    <div class="quarto-category">ggplot2</div>
  </div>
  </div>

<div>
  <div class="description">
    <p>Combining the results of studies with different time spans in a single chart when changes over time are the story.</p>
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Richard Layton </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">2022-06-01</p>
    </div>
  </div>
    
  </div>
  

</header>

<div class="callout-note callout callout-style-simple no-icon callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Summary
</div>
</div>
<div class="callout-body-container callout-body">
<p><small><em>TBD</em></small></p>
</div>
</div>
<p>While working on a previous post, I cited an article on US sex education for adolescents <span class="citation" data-cites="Lindberg+Kantor:2022">(<a href="#ref-Lindberg+Kantor:2022" role="doc-biblioref">Lindberg &amp; Kantor, 2022</a>)</span>. That article included a conventional clustered bar chart displaying results from the National Survey of Family Growth (NSFG).</p>
<p>The chart caught my attention because the story in the data is how research results evolve over time—yet time is not shown using a conventional horizontal scale. In this post, I redesign the chart with time as an independent variable encoded graphically as distance along an axis.</p>
<p>As with most of my redesign exercises, my purpose is not finding fault with the authors, but answering the questions:</p>
<ul>
<li>Can I better align the logic of the chart with the logic of the argument?</li>
<li>In doing so, can I discover hidden aspects of the stories in the data?</li>
<li>And how do I make ggplot do what I want?</li>
</ul>
<p>The R code for the post is listed under the “R code” pointers.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># packages used </span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"data.table"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"ggplot2"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"ggpubfigs"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="the-original-chart" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="the-original-chart">The original chart</h2>
<p>The grouped bar chart by Lindberg and Kantor illustrates the changing fraction of US adolescents receiving sex education instruction from 1995 to 2019. The results are compiled from 5 studies, each with its own time span. Bars are clustered are by educational topic and student sex.</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="gr2_lrg.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption aria-hidden="true" class="figure-caption margin-caption">Original figure. Percentage of females and males aged 15–19 years who received instruction on specific sex education topics before the age of 18 years, by survey year, the National Survey of Family Growth.</figcaption><p></p>
</figure>
</div>
<p>In their prose, the authors make the argument that</p>
<blockquote class="blockquote">
<p>Young people today are less likely to receive instruction on key sex education topics than they were 25 years ago, as indicated by comparing the prevalence estimates from 2011–2015 and 2015–2019 calculated in this study to published estimates from earlier NSFG rounds.</p>
</blockquote>
<p>The chart supports the assertion. The quantitative variable (percentage) is the bar height with bars shown in full to correctly avoid distorting the comparison. The gray-scale fills are appropriately sequential and the bars are arranged from left to right with survey year the implicit independent variable.</p>
<p>A clustered-bar chart like this yields a qualitative visual result for a particular data cluster, for example, the evolution of Say No to Sex instruction for Females. The design does not, however, facilitate direct comparisons between different clusters. Nor does it provide a visual encoding of the time spans involved.</p>
</section>
<section id="data-structure" class="level2">
<h2 class="anchored" data-anchor-id="data-structure">Data structure</h2>
<p>The data structure is outlined in <a href="#tbl-data-structure">Table&nbsp;1</a>. The percentage of teens aged 15–19 receiving instruction is the single quantitative variable. Because three of the studies cover a span of years, both start and end years are recorded.</p>
<p><small></small></p><small>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-data-structure" class="anchored">
<table class="table table-sm table-striped">
<caption>Table 1: Data structure</caption>
<thead>
<tr class="header">
<th style="text-align: left;">variable</th>
<th style="text-align: left;">structure</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">year study starts</td>
<td style="text-align: left;">categorical, ordinal, five levels</td>
</tr>
<tr class="even">
<td style="text-align: left;">year study ends</td>
<td style="text-align: left;">categorical, ordinal, five levels</td>
</tr>
<tr class="odd">
<td style="text-align: left;">educational topic</td>
<td style="text-align: left;">categorical, nominal, two levels</td>
</tr>
<tr class="even">
<td style="text-align: left;">student sex</td>
<td style="text-align: left;">categorical, nominal, two levels</td>
</tr>
<tr class="odd">
<td style="text-align: left;">percent receiving instruction</td>
<td style="text-align: left;">quantitative</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</small><p><small></small></p>
<p>I don’t have the original data tables, so I approximated the values by measuring the bar lengths in the original figure. These estimates are available in the blog data directory as a <a href="https://raw.githubusercontent.com/graphdr/data-stories/main/data/sex-ed-topics-data.csv">CSV file</a>.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read the data </span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">"data/sex-ed-topics-data.csv"</span>, </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">colClasses =</span> <span class="fu">list</span>(<span class="at">double =</span> <span class="fu">c</span>(<span class="st">"start"</span>, <span class="st">"end"</span>, <span class="st">"pct"</span>)))</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># display</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>dt[]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>    study start   end         Topic    Sex   pct
    &lt;int&gt; &lt;num&gt; &lt;num&gt;        &lt;char&gt; &lt;char&gt; &lt;num&gt;
 1:     1  1995  1995 Birth control Female    87
 2:     1  1995  1995 Birth control   Male    81
 3:     1  1995  1995 Say no to sex Female    92
 4:     1  1995  1995 Say no to sex   Male    74
 5:     2  2002  2002 Birth control Female    70
 6:     2  2002  2002 Birth control   Male    66
 7:     2  2002  2002 Say no to sex Female    86
 8:     2  2002  2002 Say no to sex   Male    83
 9:     3  2006  2010 Birth control Female    70
10:     3  2006  2010 Birth control   Male    61
11:     3  2006  2010 Say no to sex Female    89
12:     3  2006  2010 Say no to sex   Male    82
13:     4  2011  2015 Birth control Female    66
14:     4  2011  2015 Birth control   Male    58
15:     4  2011  2015 Say no to sex Female    84
16:     4  2011  2015 Say no to sex   Male    82
17:     5  2015  2019 Birth control Female    64
18:     5  2015  2019 Birth control   Male    63
19:     5  2015  2019 Say no to sex Female    81
20:     5  2015  2019 Say no to sex   Male    80
    study start   end         Topic    Sex   pct</code></pre>
</div>
</div>
</section>
<section id="redesign" class="level2">
<h2 class="anchored" data-anchor-id="redesign">Redesign</h2>
<p>Because the basic verbal argument describes a decline over 25 years, I select years as the independent variable and display it on a common horizontal scale. Like the original chart, percentage receiving instruction is the quantitative vertical scale.</p>
<p>One interesting challenge is choosing the data markers (ggplot2 “geoms”) when some studies appear in one year only and other studies span several years. My solution is to subset the data within the geom specification, using a point for the one-year studies and line segment for the studies that span more than one year.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"graphclassmate"</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt) <span class="sc">+</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> dt[start <span class="sc">==</span> end], </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> start, <span class="at">y =</span> pct)) <span class="sc">+</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">data =</span> dt[start <span class="sc">&lt;</span> end], </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> start, <span class="at">xend =</span> end, <span class="at">y =</span> pct, <span class="at">yend =</span> pct)) <span class="sc">+</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Survey time span"</span>, <span class="at">y =</span> <span class="st">"Percent"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The symbols are aligned vertically, one column of points or segments for each study. There are four markers or segments per study indicating the results by sex and topic (corresponding to the four clusters in the original chart).</p>

</section>

<div id="quarto-appendix" class="default"><section id="additional-software-credits" class="level3 appendix"><h2 class="quarto-appendix-heading">Additional software credits</h2><div class="quarto-appendix-contents">

<ul>
<li><a href="https://github.com/JLSteenwyk/ggpubfigs"><code>ggpubfigs</code></a> for color-vision-deficient-friendly palettes</li>
</ul>



</div></section><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-line-spacing="2" role="doc-bibliography">
<div id="ref-Lindberg+Kantor:2022" class="csl-entry" role="doc-biblioentry">
Lindberg, L. D., &amp; Kantor, L. M. (2022). <span class="nocase">Adolescents’ receipt of sex education in a nationally representative sample, 2011–-2019</span>. <em>Journal of Adolescent Health</em>, <em>70</em>(2), 290–297. <a href="https://doi.org/10.1016/j.jadohealth.2021.08.027">https://doi.org/10.1016/j.jadohealth.2021.08.027</a>
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="graphdr/data-stories" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center">
        <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../../license.html">License</a>
  </li>  
</ul>
      </div>
  </div>
</footer>



</body></html>