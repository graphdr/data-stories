<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Layton R blog</title>
<link>https://graphdr.github.io/data-stories/index.html</link>
<atom:link href="https://graphdr.github.io/data-stories/index.xml" rel="self" type="application/rss+xml"/>
<description>A blog about visual rhetoric, chart design, and R.</description>
<generator>quarto-0.9.442</generator>
<lastBuildDate>Wed, 09 Mar 2022 05:00:00 GMT</lastBuildDate>
<item>
  <title>Facets that are not small multiples</title>
  <link>https://graphdr.github.io/data-stories/posts/2022-02-19-facets-not-small-multiples/index.html</link>
  <description><![CDATA[ 



<div class="callout-note callout callout-style-simple no-icon callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Summary
</div>
</div>
<div class="callout-body-container callout-body">
<p>For data structures having two categorical variables and one quantitative variable, this post illustrates how category independence or dependence influences chart design. Graphs with independent categories (multiway data) are easily created in ggplot2 with the <code>facet_wrap()</code> function; data with dependent categories require <code>facet_grid()</code> with its <code>scales</code> and <code>space</code> arguments to treat unequal vertical scales.</p>
</div>
</div>
<p><em>Small multiple</em> design is a good design choice for many data structures. To facilitate visual comparisons, every small-multiple frame (variously called panels, facets, or subplots) has identical scales.</p>
<blockquote class="blockquote">
<p>Small multiples resemble the frames of a movie: a series of graphics, showing the same combination of variables, indexed by changes in another variable. <span class="citation" data-cites="Tufte:1983">(Tufte 1983, 170)</span></p>
</blockquote>
<p><em>Multiway data</em>—a data structure comprising two independent categorical variables and one quantitative response variable—is well-matched to small multiple design.</p>
<blockquote class="blockquote">
<p>What distinguishes multiway data is the cross-classification of the categorical variables; there is a value of the response for each combination of levels of the two categorical variables <span class="citation" data-cites="Cleveland:1993">(Cleveland 1993, 303)</span>.</p>
</blockquote>
<p>However, if the categories happen to be <em>dependent</em>, the data are not multiway and the small multiple design fails. Having come across data of this type in a recent article, I thought it would be interesting to illustrate, given one quantitative variable and two categorical variables, how category independence or dependence influences chart design.</p>
<p>I start with a multiway data set and point out that, as a small-multiple design, the panels share common scales. In ggplot2, small multiples are usually created using <code>facet_wrap()</code>.</p>
<p>The second example has data with dependent categories. The panels share a common, horizontal, quantitative scale but have different category scales, yielding facets that are not small multiples. I use <code>facet_grid()</code> with its <code>scales</code> and <code>space</code> arguments to treat the unequal vertical scales.</p>
<p>The R code for the post is listed under the “R code” pointers.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;"># packages used </span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;">library</span>(<span class="st" style="color: #20794D;">"data.table"</span>)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;">library</span>(<span class="st" style="color: #20794D;">"ggplot2"</span>)</span></code></pre></div>
</details>
</div>
<section id="multiway-example" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="multiway-example">Multiway example</h2>
<p>The literal textbook example of multiway data and chart design is the livestock chart by Cleveland <span class="citation" data-cites="Cleveland:1993">(1993, 303)</span>. The data set contains counts of 5 types of farm animals in 26 countries in 1967. The independent categories are country and animal type; the quantitative variable is the count.</p>
<p>I obtained a reproduction of the data from <span class="citation" data-cites="UCLA:2021">(UCLA 2021)</span> and saved it as a CSV file in the blog data directory.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="co" style="color: #5E5E5E;"># read the livestock data</span></span>
<span id="cb2-2">DT <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">fread</span>(<span class="st" style="color: #20794D;">"data/livestock-1967.csv"</span>)</span>
<span id="cb2-3"></span>
<span id="cb2-4"><span class="co" style="color: #5E5E5E;"># examine the data</span></span>
<span id="cb2-5">DT[]</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     livestock_type        country    count
             &lt;char&gt;         &lt;char&gt;    &lt;num&gt;
  1:         Cattle        Albania   478000
  2:         Cattle        Austria  2536000
  3:         Cattle        Belgium  3246000
  4:         Cattle       Bulgaria  1796000
  5:         Cattle Czechoslovakia  5131000
 ---                                       
126:          Sheep    Switzerland   336000
127:          Sheep         Turkey 70093000
128:          Sheep United Kingdom 32888000
129:          Sheep  Russia et al. 21000000
130:          Sheep     Yugoslavia  7384000</code></pre>
</div>
</div>
<p>The countries are assigned to the rows such that the median count by country increases from bottom to top. The livestock are assigned to the panels such that median count by livestock type increases in <em>graphical order:</em> increasing from left to right and from bottom to top. The logarithm of counts is used for the quantitative scale counts vary by more than four powers of 10.</p>
<div class="cell page-columns page-full" data-fig.asp="1.2">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;">ggplot</span>(<span class="at" style="color: #657422;">data =</span> DT, <span class="at" style="color: #657422;">mapping =</span> <span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> <span class="fu" style="color: #4758AB;">log10</span>(count), <span class="at" style="color: #657422;">y =</span> <span class="fu" style="color: #4758AB;">reorder</span>(country, count, median))) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb4-2">  <span class="fu" style="color: #4758AB;">geom_point</span>() <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb4-3">  <span class="fu" style="color: #4758AB;">facet_wrap</span>(<span class="fu" style="color: #4758AB;">vars</span>(<span class="fu" style="color: #4758AB;">reorder</span>(livestock_type, count, median)), <span class="at" style="color: #657422;">as.table =</span> <span class="cn" style="color: #8f5902;">FALSE</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb4-4">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">x =</span> <span class="fu" style="color: #4758AB;">expression</span>(<span class="st" style="color: #20794D;">'Log'</span>[<span class="dv" style="color: #AD0000;">10</span>]<span class="sc" style="color: #5E5E5E;">~</span><span class="st" style="color: #20794D;">'number of livestock'</span>), <span class="at" style="color: #657422;">y =</span> <span class="st" style="color: #20794D;">""</span>)</span></code></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div id="fig-chart-livestock" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-02-19-facets-not-small-multiples/index_files/figure-html/fig-chart-livestock-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><p></p>
</figure>
</div>
</div>
</div>
<p>Typical of small multiple charts in general, all five panels have identical horizontal scales (the count) and identical vertical axes (countries). It follows that the size and aspect ratio of each panel are also identical.</p>
</section>
<section id="when-categories-are-dependent" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="when-categories-are-dependent">When categories are dependent</h2>
<p>The data set that inspired this post is from an article on a creative expression assignment used in a first-year engineering course <span class="citation" data-cites="Chambers+Reid:2021">(Chambers and Reid 2021)</span>. In response to COVID-19, the course had transitioned from a highly interactive, in-person experience to an asynchronous, online model.</p>
<blockquote class="blockquote">
<p>The instructors designed an assignment to encourage students to creatively express how the course interruption and transition online was affecting them. The assignment encouraged complete freedom of expression and choice of media.</p>
</blockquote>
<p>A data table in the article reports how the student work is coded: 28 creative genres (prose, lyrics, music performance, dance, YouTube, etc.) grouped into 6 media categories (writing, performance, video, graphics, etc.). The quantitative variable is the count of encodings by genre.</p>
<p>Some submissions covered multiple media and genres, for example, an original song in a video would be coded as both. Thus the total of the <code>count</code> column (304 encodings) exceeds the number of submissions (N = 265). The <code>percent</code> column is a derived variable that reports the count as a percentage of N. The sum of the <code>percent</code> column is therefore greater than 100%.</p>
<p>The data are available in the blog data directory.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="co" style="color: #5E5E5E;"># import the data</span></span>
<span id="cb5-2">DT <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">fread</span>(<span class="st" style="color: #20794D;">"data/creative-assignment-2021.csv"</span>)</span>
<span id="cb5-3"></span>
<span id="cb5-4"><span class="co" style="color: #5E5E5E;"># print the data table</span></span>
<span id="cb5-5">DT[]</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>         medium                 genre count percent
         &lt;char&gt;                &lt;char&gt; &lt;int&gt;   &lt;num&gt;
 1:     Writing                 Prose     6     2.3
 2:     Writing                 Essay    32    12.1
 3:     Writing              Word art     6     2.3
 4:     Writing    Poetry (not haiku)    32    12.1
 5:     Writing                 Haiku     4     1.5
 6:       Music                Lyrics     3     1.1
 7:       Music              Playlist     3     1.1
 8: Performance Music from instrument     6     2.3
 9: Performance  Performance of music     6     2.3
10: Performance                 Dance     2     0.8
11: Performance           Spoken word     2     0.8
12:   Sculpture      Arranged objects     6     2.3
13:   Sculpture             Sculpture     2     0.8
14:   Sculpture                  Lego     2     0.8
15:       Video                TikTok     7     2.6
16:       Video               YouTube     4     1.5
17:       Video            Short-form     9     3.4
18:       Video                 Music     3     1.1
19:       Video           Spoken word     5     1.9
20:    Graphics               Collage    13     4.9
21:    Graphics              Painting    18     6.8
22:    Graphics       Drawing by hand    58    21.9
23:    Graphics   Drawing by computer    10     3.8
24:    Graphics           Photography    15     5.7
25:    Graphics               Cartoon    18     6.8
26:    Graphics                 Emoji     6     2.3
27:    Graphics                  Meme    22     8.3
28:    Graphics            Web design     4     1.5
         medium                 genre count percent</code></pre>
</div>
</div>
<p>The graph I have in mind would have media type assigned to rows and media category assigned to panels. Unlike the livestock example, however, the categorical variables in these data are not independent. For example, web design is associated only with graphics, essay is associated only with writing, etc.</p>
<p>In my first attempt, I use <code>facet_wrap()</code> like I did with the livestock data. The visual problem is obvious…every row has a data marker in one panel only. Because the categories are not independent, the small-multiple design fails.</p>
<div class="cell page-columns page-full" data-fig.asp="1.6">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="co" style="color: #5E5E5E;"># create the first chart </span></span>
<span id="cb7-2">p <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="at" style="color: #657422;">data =</span> DT, <span class="at" style="color: #657422;">mapping =</span> <span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> percent, <span class="at" style="color: #657422;">y =</span> <span class="fu" style="color: #4758AB;">reorder</span>(genre, count))) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb7-3">  <span class="fu" style="color: #4758AB;">geom_point</span>() <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb7-4">  <span class="fu" style="color: #4758AB;">facet_wrap</span>(<span class="fu" style="color: #4758AB;">vars</span>(<span class="fu" style="color: #4758AB;">reorder</span>(medium, count)) , <span class="at" style="color: #657422;">as.table =</span> <span class="cn" style="color: #8f5902;">FALSE</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb7-5">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">y =</span> <span class="st" style="color: #20794D;">""</span>)</span>
<span id="cb7-6"></span>
<span id="cb7-7"><span class="co" style="color: #5E5E5E;"># display the result</span></span>
<span id="cb7-8">p</span></code></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div id="fig-chart-assignment-1" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-02-19-facets-not-small-multiples/index_files/figure-html/fig-chart-assignment-1-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><p></p>
</figure>
</div>
</div>
</div>
<p>The <code>scales = "free_y"</code> argument of <code>facet_wrap()</code> replaces the common y-scale with only those row labels associated with a panel. I also use the <code>ncol</code> argument to stack the panels in one column with all rows labels aligned on the left. This graph has the essential layout I had in mind—a common quantitative scale but different vertical scales, yielding facets that are not small multiples.</p>
<div class="cell page-columns page-full" data-fig.asp="1.5">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="co" style="color: #5E5E5E;"># edit the previous chart </span></span>
<span id="cb8-2">p <span class="ot" style="color: #003B4F;">&lt;-</span> p <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb8-3">   <span class="fu" style="color: #4758AB;">facet_wrap</span>(<span class="fu" style="color: #4758AB;">vars</span>(<span class="fu" style="color: #4758AB;">reorder</span>(medium, count)) , <span class="at" style="color: #657422;">as.table =</span> <span class="cn" style="color: #8f5902;">FALSE</span>, <span class="at" style="color: #657422;">scales =</span> <span class="st" style="color: #20794D;">"free_y"</span>, <span class="at" style="color: #657422;">ncol =</span> <span class="dv" style="color: #AD0000;">1</span>)</span>
<span id="cb8-4"></span>
<span id="cb8-5"><span class="co" style="color: #5E5E5E;"># display the result</span></span>
<span id="cb8-6">p</span></code></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div id="fig-chart-assignment-2" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-02-19-facets-not-small-multiples/index_files/figure-html/fig-chart-assignment-2-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><p></p>
</figure>
</div>
</div>
</div>
<p>Because <code>facet_wrap()</code> creates panels of equal height, the rows in this case are unequally spaced.</p>
<p>I switch to <code>facet_grid()</code> to space the rows equally in panels of unequal height. The <code>space = "free_y"</code> argument is added to make the panel height proportional to the length of the y scale.</p>
<div class="cell page-columns page-full" data-fig.asp="1">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="co" style="color: #5E5E5E;"># edit the previous chart </span></span>
<span id="cb9-2">p <span class="ot" style="color: #003B4F;">&lt;-</span> p  <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb9-3">  <span class="fu" style="color: #4758AB;">facet_grid</span>(<span class="at" style="color: #657422;">rows =</span> <span class="fu" style="color: #4758AB;">vars</span>(<span class="fu" style="color: #4758AB;">reorder</span>(medium, count)), </span>
<span id="cb9-4">             <span class="at" style="color: #657422;">as.table =</span> <span class="cn" style="color: #8f5902;">FALSE</span>, </span>
<span id="cb9-5">             <span class="at" style="color: #657422;">scales =</span> <span class="st" style="color: #20794D;">"free_y"</span>,</span>
<span id="cb9-6">             <span class="at" style="color: #657422;">space =</span> <span class="st" style="color: #20794D;">"free_y"</span>)</span>
<span id="cb9-7"></span>
<span id="cb9-8"><span class="co" style="color: #5E5E5E;"># display the result</span></span>
<span id="cb9-9">p</span></code></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div id="fig-chart-assignment-3" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-02-19-facets-not-small-multiples/index_files/figure-html/fig-chart-assignment-3-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="editing-the-chart" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="editing-the-chart">Editing the chart</h2>
<p>While the overall layout above is what I want, I would prefer to move the panel labels from the right-hand side to the top of each panel. I could not find a way to do that, so I removed the right-hand label and wrote the media label inside the panel. I edited some other aesthetics as well.</p>
<div class="cell page-columns page-full" data-fig.asp="1">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><span class="co" style="color: #5E5E5E;"># create a y-coordinate for a text geom</span></span>
<span id="cb10-2">DT <span class="ot" style="color: #003B4F;">&lt;-</span> DT[, y_coord_media <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> .N<span class="sc" style="color: #5E5E5E;">/</span><span class="dv" style="color: #AD0000;">2</span> <span class="sc" style="color: #5E5E5E;">+</span> <span class="fl" style="color: #AD0000;">0.5</span>, by <span class="ot" style="color: #003B4F;">=</span> medium]</span>
<span id="cb10-3"></span>
<span id="cb10-4"><span class="co" style="color: #5E5E5E;"># create secondary axis data, omit some labels to avoid overprinting</span></span>
<span id="cb10-5">count_scale <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">sort</span>(<span class="fu" style="color: #4758AB;">unique</span>(DT<span class="sc" style="color: #5E5E5E;">$</span>count))</span>
<span id="cb10-6">top_axis <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">data.table</span>(count_scale)</span>
<span id="cb10-7">top_axis[, count_label <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> <span class="fu" style="color: #4758AB;">as.character</span>(count_scale)]</span>
<span id="cb10-8">omit_labels <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"3"</span>, <span class="st" style="color: #20794D;">"5"</span>, <span class="st" style="color: #20794D;">"7"</span>, <span class="st" style="color: #20794D;">"9"</span>, <span class="st" style="color: #20794D;">"15"</span>)</span>
<span id="cb10-9">top_axis[count_label <span class="sc" style="color: #5E5E5E;">%chin%</span> omit_labels, count_label <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> <span class="st" style="color: #20794D;">""</span>]</span>
<span id="cb10-10"></span>
<span id="cb10-11"><span class="co" style="color: #5E5E5E;"># ratio for secondary axis transformation</span></span>
<span id="cb10-12">scale_trans <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">sum</span>(DT<span class="sc" style="color: #5E5E5E;">$</span>count) <span class="sc" style="color: #5E5E5E;">/</span> <span class="fu" style="color: #4758AB;">sum</span>(DT<span class="sc" style="color: #5E5E5E;">$</span>percent)</span>
<span id="cb10-13"></span>
<span id="cb10-14"><span class="co" style="color: #5E5E5E;"># graph</span></span>
<span id="cb10-15"><span class="fu" style="color: #4758AB;">ggplot</span>(<span class="at" style="color: #657422;">data =</span> DT, <span class="at" style="color: #657422;">mapping =</span> <span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> percent, <span class="at" style="color: #657422;">y =</span> <span class="fu" style="color: #4758AB;">reorder</span>(genre, count))) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb10-16">  <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">2</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb10-17">  <span class="fu" style="color: #4758AB;">facet_grid</span>(<span class="at" style="color: #657422;">rows =</span> <span class="fu" style="color: #4758AB;">vars</span>(<span class="fu" style="color: #4758AB;">reorder</span>(medium, count)), </span>
<span id="cb10-18">             <span class="at" style="color: #657422;">as.table =</span> <span class="cn" style="color: #8f5902;">FALSE</span>, </span>
<span id="cb10-19">             <span class="at" style="color: #657422;">scales =</span> <span class="st" style="color: #20794D;">"free_y"</span>,</span>
<span id="cb10-20">             <span class="at" style="color: #657422;">space =</span> <span class="st" style="color: #20794D;">"free_y"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb10-21">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">x =</span> <span class="st" style="color: #20794D;">"Genre encodings (%)"</span>, <span class="at" style="color: #657422;">y =</span> <span class="st" style="color: #20794D;">"Genre"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb10-22">  <span class="fu" style="color: #4758AB;">theme_light</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb10-23">  <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">strip.text.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(), </span>
<span id="cb10-24">        <span class="at" style="color: #657422;">panel.grid.minor =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb10-25">        <span class="at" style="color: #657422;">axis.title.y =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">angle =</span> <span class="dv" style="color: #AD0000;">0</span>, <span class="at" style="color: #657422;">hjust =</span> <span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">vjust =</span> <span class="fl" style="color: #AD0000;">0.5</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb10-26">  <span class="fu" style="color: #4758AB;">geom_text</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> <span class="dv" style="color: #AD0000;">24</span>, <span class="at" style="color: #657422;">y =</span> y_coord_media, <span class="at" style="color: #657422;">label =</span> medium, <span class="at" style="color: #657422;">hjust =</span> <span class="dv" style="color: #AD0000;">1</span>), <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"gray50"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb10-27">  <span class="fu" style="color: #4758AB;">scale_x_continuous</span>(<span class="at" style="color: #657422;">sec.axis =</span> <span class="fu" style="color: #4758AB;">sec_axis</span>(<span class="at" style="color: #657422;">trans =</span> <span class="cf" style="color: #003B4F;">function</span>(z) (z <span class="sc" style="color: #5E5E5E;">*</span> scale_trans), </span>
<span id="cb10-28">                                         <span class="at" style="color: #657422;">name =</span> <span class="st" style="color: #20794D;">"Count of genre encodings"</span>, </span>
<span id="cb10-29">                                         <span class="at" style="color: #657422;">breaks =</span> top_axis<span class="sc" style="color: #5E5E5E;">$</span>count_scale, </span>
<span id="cb10-30">                                         <span class="at" style="color: #657422;">labels =</span> top_axis<span class="sc" style="color: #5E5E5E;">$</span>count_label))</span></code></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div id="fig-chart-assignment-4" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-02-19-facets-not-small-multiples/index_files/figure-html/fig-chart-assignment-4-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><p></p>
</figure>
</div>
</div>
</div>
<p>Features of the graph</p>
<ul>
<li><code>facet_grid()</code> as shown earlier for panels of unequal height with rows equally spaced.</li>
<li><code>geom_text()</code> for panel labels, vertically centered.</li>
<li><code>sec_axis()</code> for a secondary scale along the top of the chart showing counts of genre encodings from the data table.</li>
<li><code>theme_light()</code> for gray lines on white background to focus attention on the data.</li>
<li>All text is oriented horizontally for ease of reading.</li>
<li>Media are ordered by increasing counts (total count rather than median) from bottom to top.</li>
<li>Within a panel, genres are similarly ordered.</li>
</ul>
</section>
<section id="final-thoughts" class="level2">
<h2 class="anchored" data-anchor-id="final-thoughts">Final thoughts</h2>
<p>Regarding their data table, the authors write,</p>
<blockquote class="blockquote">
<p>… some media were selected by large numbers of students, such as drawings by hand or computer, and writing such as poems and essays.</p>
</blockquote>
<p>The graph supports this assertion but emphasizes visually a couple of other points as well. Drawings by hand, essays, and non-haiku poetry were by far the most popular genres (adding up to nearly 50% of the submission encodings) and graphics was by far the most popular medium (about 60% of the encodings).</p>
<p>Mainly this chart gave me a chance to clarify something that my students would sometimes overlook—that a data structure with two categories and one quantitative variable are multiway data if and only if the categories are independent and a value of the response exists for each combination of levels of the two categories. Otherwise, we cannot expect to use a small-multiple design.</p>



</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Chambers+Reid:2021" class="csl-entry">
Chambers, Benjamin D., and Kenneth J. Reid. 2021. <span>“<span class="nocase">Looking ahead: From driving Cars in the lobby to online: Using open creative expression to understand student emotions about transitioning to remote instruction during the COVID-19 crisis</span>.”</span> <em>Advances in Engineering Education</em> 9 (4). <a href="https://drive.google.com/file/d/1oizZikgEzYKbIlIaBSlaxln5oIpZ4pa3/view">https://drive.google.com/file/d/1oizZikgEzYKbIlIaBSlaxln5oIpZ4pa3/view</a>.
</div>
<div id="ref-Cleveland:1993" class="csl-entry">
Cleveland, William S. 1993. <em><span>Visualizing Data</span></em>. Summit, NJ: <span>Hobart Press</span>.
</div>
<div id="ref-Tufte:1983" class="csl-entry">
Tufte, Edward. 1983. <em><span class="nocase">The Visual Display of Quantitative Information</span></em>. Cheshire, CT: <span>Graphics Press</span>.
</div>
<div id="ref-UCLA:2021" class="csl-entry">
UCLA. 2021. <span>“<span class="nocase">Textbook examples: Visualizing Data by William S. Cleveland</span>.”</span> <span>UCLA Statistical Consulting Group</span>. <a href="https://stats.oarc.ucla.edu/other/examples/vizdata/">https://stats.oarc.ucla.edu/other/examples/vizdata/</a>.
</div>
</div></section></div> ]]></description>
  <category>ggplot2</category>
  <category>R</category>
  <guid>https://graphdr.github.io/data-stories/posts/2022-02-19-facets-not-small-multiples/index.html</guid>
  <pubDate>Wed, 09 Mar 2022 05:00:00 GMT</pubDate>
  <media:content url="https://graphdr.github.io/data-stories/posts/2022-02-19-facets-not-small-multiples/thumbnail.png" medium="image" type="image/png" height="125" width="144"/>
</item>
<item>
  <title>Survey data I/O with likert</title>
  <link>https://graphdr.github.io/data-stories/posts/2022-02-13-survey-data-io/index.html</link>
  <description><![CDATA[ 



<div class="callout-note callout callout-style-simple no-icon callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Summary
</div>
</div>
<div class="callout-body-container callout-body">
<p>Given Likert-style survey data in one of three common forms, I shape the data to suit the input requirements of the likert R package and use the output to create 100% stacked-bar charts. In each case, I illustrate two routine revision tasks: editing the question labels on the bars and editing the opinion levels in the legend.</p>
</div>
</div>
<p>This post is a tutorial on how to prepare different forms of Likert-style survey data for the R likert package and using its output to create 100% stacked-bar charts. I focus on preparing the data for <code>likert()</code> input and editing its output for the final chart. For exploring the package functionality more fully, I recommend the tutorials by Laura Mudge <span class="citation" data-cites="Mudge:2019">(2019)</span> and Jake Chanenson <span class="citation" data-cites="Chanenson:2021">(2021)</span>.</p>
<p>In a <a href="https://graphdr.github.io/data-stories/posts/2022-02-12-survey-data-chart-designs/">companion post</a> I develop the R script for constructing the 100% stacked-bar chart and discuss the rationale for selecting it as a more effective design for Likert-style survey data.</p>
<p>I use data.table, ggplot2, and likert R packages. An appealing feature of likert is its compatibility with data.table and ggplot2 functionality. Note that to reproduce this work, likert must be at least version 1.3.6 (currently the development version).</p>
<p>The R code for the post is listed under the “R code” pointers.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;"># packages</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;">library</span>(<span class="st" style="color: #20794D;">"data.table"</span>)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;">library</span>(<span class="st" style="color: #20794D;">"ggplot2"</span>)</span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;">library</span>(<span class="st" style="color: #20794D;">"likert"</span>)</span>
<span id="cb1-5"></span>
<span id="cb1-6"><span class="co" style="color: #5E5E5E;"># function based on likert.plot to construct a 100% stacked bar chart </span></span>
<span id="cb1-7">my_breaks <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">seq</span>(<span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">100</span>, <span class="dv" style="color: #AD0000;">100</span>, <span class="dv" style="color: #AD0000;">10</span>)</span>
<span id="cb1-8">likert_100_pct_bar <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cf" style="color: #003B4F;">function</span>(likert_list) {</span>
<span id="cb1-9">  <span class="fu" style="color: #4758AB;">plot</span>(likert_list, </span>
<span id="cb1-10">       <span class="at" style="color: #657422;">plot.percent.neutral =</span> <span class="cn" style="color: #8f5902;">FALSE</span>,</span>
<span id="cb1-11">       <span class="at" style="color: #657422;">plot.percent.high =</span> <span class="cn" style="color: #8f5902;">FALSE</span>,</span>
<span id="cb1-12">       <span class="at" style="color: #657422;">plot.percent.low =</span> <span class="cn" style="color: #8f5902;">FALSE</span>,</span>
<span id="cb1-13">       <span class="at" style="color: #657422;">neutral.color =</span> <span class="st" style="color: #20794D;">"grey90"</span>, </span>
<span id="cb1-14">       <span class="at" style="color: #657422;">include.center =</span> <span class="cn" style="color: #8f5902;">TRUE</span>, </span>
<span id="cb1-15">       <span class="at" style="color: #657422;">centered =</span> <span class="cn" style="color: #8f5902;">FALSE</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb1-16">    <span class="fu" style="color: #4758AB;">geom_hline</span>(<span class="at" style="color: #657422;">yintercept =</span> my_breaks, <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"white"</span>, <span class="at" style="color: #657422;">size =</span> <span class="fl" style="color: #AD0000;">0.25</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb1-17">    <span class="fu" style="color: #4758AB;">scale_y_continuous</span>(<span class="at" style="color: #657422;">limits =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">100</span>), </span>
<span id="cb1-18">                       <span class="at" style="color: #657422;">breaks =</span> my_breaks, </span>
<span id="cb1-19">                       <span class="at" style="color: #657422;">sec.axis =</span> <span class="fu" style="color: #4758AB;">sec_axis</span>( <span class="co" style="color: #5E5E5E;"># second scale</span></span>
<span id="cb1-20">                         <span class="at" style="color: #657422;">trans =</span> <span class="cf" style="color: #003B4F;">function</span>(z) z <span class="sc" style="color: #5E5E5E;">-</span> <span class="dv" style="color: #AD0000;">100</span>, </span>
<span id="cb1-21">                         <span class="at" style="color: #657422;">breaks =</span> my_breaks, </span>
<span id="cb1-22">                         <span class="at" style="color: #657422;">labels =</span> <span class="fu" style="color: #4758AB;">as.character</span>(<span class="fu" style="color: #4758AB;">abs</span>(my_breaks)))) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb1-23">    <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">panel.background =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb1-24">          <span class="at" style="color: #657422;">legend.key.size =</span> <span class="fu" style="color: #4758AB;">unit</span>(<span class="dv" style="color: #AD0000;">4</span>, <span class="st" style="color: #20794D;">"mm"</span>),</span>
<span id="cb1-25">          <span class="at" style="color: #657422;">legend.title =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb1-26">          <span class="at" style="color: #657422;">axis.ticks =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(), </span>
<span id="cb1-27">          <span class="at" style="color: #657422;">legend.justification =</span> <span class="fl" style="color: #AD0000;">0.5</span>, </span>
<span id="cb1-28">          <span class="at" style="color: #657422;">legend.position =</span> <span class="st" style="color: #20794D;">"top"</span>)</span>
<span id="cb1-29">}</span>
<span id="cb1-30"></span>
<span id="cb1-31"><span class="co" style="color: #5E5E5E;"># labeling vectors</span></span>
<span id="cb1-32">opinion_labels <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"Strongly Disagree"</span>, </span>
<span id="cb1-33">                    <span class="st" style="color: #20794D;">"Disagree"</span>, </span>
<span id="cb1-34">                    <span class="st" style="color: #20794D;">"Neutral"</span>, </span>
<span id="cb1-35">                    <span class="st" style="color: #20794D;">"Agree"</span>, </span>
<span id="cb1-36">                    <span class="st" style="color: #20794D;">"Strongly Agree"</span>)</span>
<span id="cb1-37"></span>
<span id="cb1-38">question_labels <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"Beyond the content"</span>, </span>
<span id="cb1-39">                     <span class="st" style="color: #20794D;">"Analyze errors"</span>, </span>
<span id="cb1-40">                     <span class="st" style="color: #20794D;">"Provide facts"</span>, </span>
<span id="cb1-41">                     <span class="st" style="color: #20794D;">"Develop writing"</span>, </span>
<span id="cb1-42">                     <span class="st" style="color: #20794D;">"Independent learning"</span>)</span>
<span id="cb1-43"></span>
<span id="cb1-44"><span class="co" style="color: #5E5E5E;"># functions for renaming columns</span></span>
<span id="cb1-45">setnames_Item <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cf" style="color: #003B4F;">function</span>(x) {</span>
<span id="cb1-46">  <span class="fu" style="color: #4758AB;">setnames</span>(x, <span class="at" style="color: #657422;">old =</span> <span class="st" style="color: #20794D;">"q_no"</span>, <span class="at" style="color: #657422;">new =</span> <span class="st" style="color: #20794D;">"Item"</span>, <span class="at" style="color: #657422;">skip_absent =</span> <span class="cn" style="color: #8f5902;">TRUE</span>)</span>
<span id="cb1-47">}</span>
<span id="cb1-48"></span>
<span id="cb1-49">setnames_opinion_labels <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cf" style="color: #003B4F;">function</span>(x) {</span>
<span id="cb1-50">  <span class="fu" style="color: #4758AB;">setnames</span>(x, </span>
<span id="cb1-51">           <span class="at" style="color: #657422;">old =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"str_disagree"</span>, </span>
<span id="cb1-52">                   <span class="st" style="color: #20794D;">"disagree"</span>, </span>
<span id="cb1-53">                   <span class="st" style="color: #20794D;">"neutral"</span>, </span>
<span id="cb1-54">                   <span class="st" style="color: #20794D;">"agree"</span>, </span>
<span id="cb1-55">                   <span class="st" style="color: #20794D;">"str_agree"</span>), </span>
<span id="cb1-56">           <span class="at" style="color: #657422;">new =</span> opinion_labels, </span>
<span id="cb1-57">           <span class="at" style="color: #657422;">skip_absent =</span> <span class="cn" style="color: #8f5902;">TRUE</span>)</span>
<span id="cb1-58">}</span></code></pre></div>
</details>
</div>
<section id="data" class="level2">
<h2 class="anchored" data-anchor-id="data">Data</h2>
<p>The practice data in my example are from an engineering education article by Ashanthi Maxworth <span class="citation" data-cites="Maxworth:2021">(2021)</span>, selected because the data are compact and the survey includes a Neutral option. The table from the original article is shown below. There were 31 respondents.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-02-13-survey-data-io/survey-data.png" class="img-fluid figure-img"></p>
<p></p><p></p>
</figure>
</div>
<p>Survey data are most likely to be reported in one of three forms: summary percentages (as above), summary counts, or row-records. The <code>likert()</code> function accepts any of these forms as input. The practice data, in all three forms, are available in the <a href="https://github.com/graphdr/data-stories/tree/main/posts/2022-02-13-survey-data-io">blog post directory</a> in CSV files.</p>
<ul>
<li>summary counts: <code>case-study-2021-count.csv</code></li>
<li>summary percentages: <code>case-study-2021-percent.csv</code></li>
<li>row-records: <code>case-study-2021-row-record.csv</code></li>
</ul>
</section>
<section id="summary-counts" class="level2">
<h2 class="anchored" data-anchor-id="summary-counts">Summary counts</h2>
<p>Read the prepared data file in summary count form.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="co" style="color: #5E5E5E;"># read prepared data</span></span>
<span id="cb2-2">dt <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">fread</span>(<span class="st" style="color: #20794D;">"case-study-2021-count.csv"</span>)</span></code></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: left;">q_no</th>
<th style="text-align: right;">str_disagree</th>
<th style="text-align: right;">disagree</th>
<th style="text-align: right;">neutral</th>
<th style="text-align: right;">agree</th>
<th style="text-align: right;">str_agree</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Q1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">Q2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Q3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">15</td>
</tr>
<tr class="even">
<td style="text-align: left;">Q4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Q5</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">12</td>
</tr>
</tbody>
</table>
</div>
</div>
<section id="likert-input" class="level3">
<h3 class="anchored" data-anchor-id="likert-input"><code>likert()</code> input</h3>
<p>I rename the first column <code>Item</code> for consistency with the <code>likert()</code> function.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;"># rename first column</span></span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;">setnames_Item</span>(dt)</span>
<span id="cb3-3"></span>
<span id="cb3-4"><span class="co" style="color: #5E5E5E;"># examine the result</span></span>
<span id="cb3-5">dt[]</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     Item str_disagree disagree neutral agree str_agree
   &lt;char&gt;        &lt;int&gt;    &lt;int&gt;   &lt;int&gt; &lt;int&gt;     &lt;int&gt;
1:     Q1            2        0       8    12         9
2:     Q2            2        2       7    14         6
3:     Q3            1        1       5     9        15
4:     Q4            0        2      10    12         7
5:     Q5            2        0       6    11        12</code></pre>
</div>
</div>
<p>The <code>likert()</code> function accepts input data frames having this structure. The salient characteristics are:</p>
<ul>
<li>one row per question</li>
<li>first column is named <code>Item</code> and contains the question labels</li>
<li>remaining columns are named for the opinion levels in increasing order left to right</li>
<li>column values are the counts of respondents choosing that option</li>
<li>the sum of row counts is the number of respondents answering that question</li>
</ul>
</section>
<section id="likert-output" class="level3">
<h3 class="anchored" data-anchor-id="likert-output"><code>likert()</code> output</h3>
<p>To operate on this data frame, we assign it to the <code>summary</code> argument of the <code>likert()</code> function. The result is a list of various statistics about the Likert-style data. Note that the <code>results</code> output preserves the data.table structure of the input.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="co" style="color: #5E5E5E;"># create the likert list</span></span>
<span id="cb5-2">likert_list <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">likert</span>(<span class="at" style="color: #657422;">summary =</span> dt)</span>
<span id="cb5-3"></span>
<span id="cb5-4"><span class="co" style="color: #5E5E5E;"># examine its structure</span></span>
<span id="cb5-5"><span class="fu" style="color: #4758AB;">str</span>(likert_list)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>List of 5
 $ results :Classes 'data.table' and 'data.frame':  5 obs. of  6 variables:
  ..$ Item        : chr [1:5] "Q1" "Q2" "Q3" "Q4" ...
  ..$ str_disagree: num [1:5] 6.45 6.45 3.23 0 6.45
  ..$ disagree    : num [1:5] 0 6.45 3.23 6.45 0
  ..$ neutral     : num [1:5] 25.8 22.6 16.1 32.3 19.4
  ..$ agree       : num [1:5] 38.7 45.2 29 38.7 35.5
  ..$ str_agree   : num [1:5] 29 19.4 48.4 22.6 38.7
  ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; 
 $ items   : NULL
 $ grouping: NULL
 $ nlevels : num 5
 $ levels  : chr [1:5] "str_disagree" "disagree" "neutral" "agree" ...
 - attr(*, "class")= chr "likert"</code></pre>
</div>
</div>
<p>The components of the list are:</p>
<dl>
<dt><code>results</code></dt>
<dd>
Data frame. Percentage of responses by question, opinion level, and group.
</dd>
<dt><code>items</code></dt>
<dd>
Data frame. Copy of original row-record input (NULL in this example).
</dd>
<dt><code>grouping</code></dt>
<dd>
Copy of original grouping vector that subsets results (NULL in this example).
</dd>
<dt><code>nlevels</code></dt>
<dd>
Integer. Number of opinion levels used in the calculations.
</dd>
<dt><code>levels</code></dt>
<dd>
Character. Ordered vector of opinion level labels.
</dd>
</dl>
<p><br></p>
</section>
<section id="basic-chart" class="level3">
<h3 class="anchored" data-anchor-id="basic-chart">Basic chart</h3>
<p>To use this list to create a chart, we assign it as the first argument of the <code>plot()</code> function.</p>
<div class="cell" data-fig.asp="0.35">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="co" style="color: #5E5E5E;"># create the basic chart (default digits = 0 throws an error)</span></span>
<span id="cb7-2"><span class="fu" style="color: #4758AB;">plot</span>(likert_list, <span class="at" style="color: #657422;">digits =</span> <span class="dv" style="color: #AD0000;">1</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-02-13-survey-data-io/index_files/figure-html/chart-01-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="stacked-bar-chart" class="level3">
<h3 class="anchored" data-anchor-id="stacked-bar-chart">100% stacked bar chart</h3>
<p>The same list can be used to create a 100% stacked-bar chart by assigning it as the first argument of <code>likert_100_pct_bar()</code>—a function (defined at the top of the post) that wraps <code>likert.plot</code> and sets the likert arguments and ggplot2 functions that produce my preferred design.</p>
<div class="cell" data-fig.asp="0.35">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="co" style="color: #5E5E5E;"># customize the chart</span></span>
<span id="cb8-2"><span class="fu" style="color: #4758AB;">likert_100_pct_bar</span>(likert_list)</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-02-13-survey-data-io/index_files/figure-html/chart-02-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="legend-key" class="level3">
<h3 class="anchored" data-anchor-id="legend-key">Legend key</h3>
<p>The legend key is edited via the column names of <code>likert_list$results</code>. Viewing its column names,</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="fu" style="color: #4758AB;">names</span>(likert_list<span class="sc" style="color: #5E5E5E;">$</span>results)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Item"         "str_disagree" "disagree"     "neutral"      "agree"       
[6] "str_agree"   </code></pre>
</div>
</div>
<p>Using a vector of opinion labels defined at the top of the post, I rename the opinion columns of the data frame.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="co" style="color: #5E5E5E;"># recode the opinion options </span></span>
<span id="cb11-2"><span class="fu" style="color: #4758AB;">setnames_opinion_labels</span>(likert_list<span class="sc" style="color: #5E5E5E;">$</span>results)</span>
<span id="cb11-3"></span>
<span id="cb11-4"><span class="co" style="color: #5E5E5E;"># examine the result</span></span>
<span id="cb11-5"><span class="fu" style="color: #4758AB;">str</span>(likert_list)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>List of 5
 $ results :Classes 'data.table' and 'data.frame':  5 obs. of  6 variables:
  ..$ Item             : chr [1:5] "Q1" "Q2" "Q3" "Q4" ...
  ..$ Strongly Disagree: num [1:5] 6.45 6.45 3.23 0 6.45
  ..$ Disagree         : num [1:5] 0 6.45 3.23 6.45 0
  ..$ Neutral          : num [1:5] 25.8 22.6 16.1 32.3 19.4
  ..$ Agree            : num [1:5] 38.7 45.2 29 38.7 35.5
  ..$ Strongly Agree   : num [1:5] 29 19.4 48.4 22.6 38.7
  ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; 
 $ items   : NULL
 $ grouping: NULL
 $ nlevels : num 5
 $ levels  : chr [1:5] "str_disagree" "disagree" "neutral" "agree" ...
 - attr(*, "class")= chr "likert"</code></pre>
</div>
</div>
<p>The change can be seen in the structure above and in the revised figure.</p>
<div class="cell" data-fig.asp="0.35">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="co" style="color: #5E5E5E;"># create the chart</span></span>
<span id="cb13-2"><span class="fu" style="color: #4758AB;">likert_100_pct_bar</span>(likert_list)</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-02-13-survey-data-io/index_files/figure-html/chart-03-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="question-labels" class="level3">
<h3 class="anchored" data-anchor-id="question-labels">Question labels</h3>
<p>The question labels are edited via the values in the <code>Item</code> column of <code>likert_list$results</code>. Viewing the first column in vector form,</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1">likert_list<span class="sc" style="color: #5E5E5E;">$</span>results[[<span class="st" style="color: #20794D;">"Item"</span>]]</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Q1" "Q2" "Q3" "Q4" "Q5"</code></pre>
</div>
</div>
<p>Using a vector of question labels defined at the top of the post, I substitute them for the values in the original <code>Item</code> column.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><span class="co" style="color: #5E5E5E;"># recode the question labels</span></span>
<span id="cb16-2">likert_list<span class="sc" style="color: #5E5E5E;">$</span>results[, Item <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> question_labels]</span>
<span id="cb16-3"></span>
<span id="cb16-4"><span class="co" style="color: #5E5E5E;"># examine the result</span></span>
<span id="cb16-5"><span class="fu" style="color: #4758AB;">str</span>(likert_list)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>List of 5
 $ results :Classes 'data.table' and 'data.frame':  5 obs. of  6 variables:
  ..$ Item             : chr [1:5] "Beyond the content" "Analyze errors" "Provide facts" "Develop writing" ...
  ..$ Strongly Disagree: num [1:5] 6.45 6.45 3.23 0 6.45
  ..$ Disagree         : num [1:5] 0 6.45 3.23 6.45 0
  ..$ Neutral          : num [1:5] 25.8 22.6 16.1 32.3 19.4
  ..$ Agree            : num [1:5] 38.7 45.2 29 38.7 35.5
  ..$ Strongly Agree   : num [1:5] 29 19.4 48.4 22.6 38.7
  ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; 
 $ items   : NULL
 $ grouping: NULL
 $ nlevels : num 5
 $ levels  : chr [1:5] "str_disagree" "disagree" "neutral" "agree" ...
 - attr(*, "class")= chr "likert"</code></pre>
</div>
</div>
<p>Again, the change is seen in the structure above and in the revised figure.</p>
<div class="cell" data-fig.asp="0.35">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><span class="co" style="color: #5E5E5E;"># create the chart</span></span>
<span id="cb18-2"><span class="fu" style="color: #4758AB;">likert_100_pct_bar</span>(likert_list)</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-02-13-survey-data-io/index_files/figure-html/chart-04-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This approach is somewhat ad-hoc, but works as long as you are careful to write the substitutions in the correct order. If I were programming these steps, I would create additional tables (as in a database) and join the substitutions by clearly assigned key variables.</p>
</section>
<section id="or-edit-the-labels-first" class="level3">
<h3 class="anchored" data-anchor-id="or-edit-the-labels-first">Or edit the labels first</h3>
<p>Alternatively one can produce the same result by editing the opinion labels and question labels of the initial data frame before submitting it to <code>likert()</code>. The row and column structure reflects the changes.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><span class="co" style="color: #5E5E5E;"># read prepared data</span></span>
<span id="cb19-2">dt <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">fread</span>(<span class="st" style="color: #20794D;">"case-study-2021-count.csv"</span>)</span>
<span id="cb19-3"></span>
<span id="cb19-4"><span class="co" style="color: #5E5E5E;"># rename columns</span></span>
<span id="cb19-5"><span class="fu" style="color: #4758AB;">setnames_Item</span>(dt)</span>
<span id="cb19-6"><span class="fu" style="color: #4758AB;">setnames_opinion_labels</span>(dt)</span>
<span id="cb19-7"></span>
<span id="cb19-8"><span class="co" style="color: #5E5E5E;"># recode the question labels</span></span>
<span id="cb19-9">dt[, Item <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> question_labels]</span>
<span id="cb19-10"></span>
<span id="cb19-11"><span class="co" style="color: #5E5E5E;"># examine the result</span></span>
<span id="cb19-12">dt[]</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                   Item Strongly Disagree Disagree Neutral Agree Strongly Agree
                 &lt;char&gt;             &lt;int&gt;    &lt;int&gt;   &lt;int&gt; &lt;int&gt;          &lt;int&gt;
1:   Beyond the content                 2        0       8    12              9
2:       Analyze errors                 2        2       7    14              6
3:        Provide facts                 1        1       5     9             15
4:      Develop writing                 0        2      10    12              7
5: Independent learning                 2        0       6    11             12</code></pre>
</div>
</div>
<p>The likert list that results is nearly identical to the previous version except the <code>levels</code> vector uses the new opinion labels.</p>
<div class="cell" data-fig.asp="0.35">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><span class="co" style="color: #5E5E5E;"># create the likert list</span></span>
<span id="cb21-2">likert_list <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">likert</span>(<span class="at" style="color: #657422;">summary =</span> dt)</span>
<span id="cb21-3"></span>
<span id="cb21-4"><span class="co" style="color: #5E5E5E;"># examine the result</span></span>
<span id="cb21-5"><span class="fu" style="color: #4758AB;">str</span>(likert_list)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>List of 5
 $ results :Classes 'data.table' and 'data.frame':  5 obs. of  6 variables:
  ..$ Item             : chr [1:5] "Beyond the content" "Analyze errors" "Provide facts" "Develop writing" ...
  ..$ Strongly Disagree: num [1:5] 6.45 6.45 3.23 0 6.45
  ..$ Disagree         : num [1:5] 0 6.45 3.23 6.45 0
  ..$ Neutral          : num [1:5] 25.8 22.6 16.1 32.3 19.4
  ..$ Agree            : num [1:5] 38.7 45.2 29 38.7 35.5
  ..$ Strongly Agree   : num [1:5] 29 19.4 48.4 22.6 38.7
  ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; 
 $ items   : NULL
 $ grouping: NULL
 $ nlevels : num 5
 $ levels  : chr [1:5] "Strongly Disagree" "Disagree" "Neutral" "Agree" ...
 - attr(*, "class")= chr "likert"</code></pre>
</div>
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><span class="co" style="color: #5E5E5E;"># create the chart</span></span>
<span id="cb23-2"><span class="fu" style="color: #4758AB;">likert_100_pct_bar</span>(likert_list)</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-02-13-survey-data-io/index_files/figure-html/chart-05-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="summary-percentages" class="level2">
<h2 class="anchored" data-anchor-id="summary-percentages">Summary percentages</h2>
<p>Read the prepared data file in summary percentage form. The percentages are directly from the table in the source article. Like before, I rename the first column <code>Item</code> for consistency with the <code>likert()</code> function.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><span class="co" style="color: #5E5E5E;"># read prepared data</span></span>
<span id="cb24-2">dt <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">fread</span>(<span class="st" style="color: #20794D;">"case-study-2021-percent.csv"</span>)</span>
<span id="cb24-3"></span>
<span id="cb24-4"><span class="co" style="color: #5E5E5E;"># rename first column</span></span>
<span id="cb24-5"><span class="fu" style="color: #4758AB;">setnames_Item</span>(dt)</span></code></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: left;">Item</th>
<th style="text-align: right;">str_disagree</th>
<th style="text-align: right;">disagree</th>
<th style="text-align: right;">neutral</th>
<th style="text-align: right;">agree</th>
<th style="text-align: right;">str_agree</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Q1</td>
<td style="text-align: right;">6.5</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">25.8</td>
<td style="text-align: right;">38.7</td>
<td style="text-align: right;">29.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Q2</td>
<td style="text-align: right;">6.5</td>
<td style="text-align: right;">6.5</td>
<td style="text-align: right;">22.6</td>
<td style="text-align: right;">45.2</td>
<td style="text-align: right;">19.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Q3</td>
<td style="text-align: right;">3.2</td>
<td style="text-align: right;">3.2</td>
<td style="text-align: right;">16.1</td>
<td style="text-align: right;">29.0</td>
<td style="text-align: right;">48.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">Q4</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">6.5</td>
<td style="text-align: right;">32.3</td>
<td style="text-align: right;">38.7</td>
<td style="text-align: right;">22.6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Q5</td>
<td style="text-align: right;">6.5</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">19.4</td>
<td style="text-align: right;">35.5</td>
<td style="text-align: right;">38.7</td>
</tr>
</tbody>
</table>
</div>
</div>
<section id="option-1-convert-percentages-to-counts" class="level3">
<h3 class="anchored" data-anchor-id="option-1-convert-percentages-to-counts">Option 1: Convert percentages to counts</h3>
<p>This option is the most direct approach, assuming we know the number of respondents to each question. In this example we do (though this is not always the case). In this case study we have 31 respondents and all respondents replied to all the questions.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><span class="co" style="color: #5E5E5E;"># number of respondents in this example</span></span>
<span id="cb25-2">N_respondents <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="dv" style="color: #AD0000;">31</span></span>
<span id="cb25-3"></span>
<span id="cb25-4"><span class="co" style="color: #5E5E5E;"># identify the numeric columns</span></span>
<span id="cb25-5">sel_cols <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">names</span>(dt)[<span class="fu" style="color: #4758AB;">sapply</span>(dt, is.numeric)]</span>
<span id="cb25-6"></span>
<span id="cb25-7"><span class="co" style="color: #5E5E5E;"># convert percentages to integer counts</span></span>
<span id="cb25-8">dt[, <span class="fu" style="color: #4758AB;">c</span>(sel_cols) <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> <span class="fu" style="color: #4758AB;">lapply</span>(.SD, <span class="cf" style="color: #003B4F;">function</span>(x) <span class="fu" style="color: #4758AB;">round</span>(N_respondents <span class="sc" style="color: #5E5E5E;">*</span> x<span class="sc" style="color: #5E5E5E;">/</span><span class="dv" style="color: #AD0000;">100</span>, <span class="dv" style="color: #AD0000;">0</span>)), .SDcols <span class="ot" style="color: #003B4F;">=</span> sel_cols]</span></code></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: left;">Item</th>
<th style="text-align: right;">str_disagree</th>
<th style="text-align: right;">disagree</th>
<th style="text-align: right;">neutral</th>
<th style="text-align: right;">agree</th>
<th style="text-align: right;">str_agree</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Q1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">Q2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Q3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">15</td>
</tr>
<tr class="even">
<td style="text-align: left;">Q4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Q5</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">12</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>This data structure is identical to the one we worked with in the previous section, so we know how to work with it.</p>
</section>
<section id="option-2-use-percentages-as-is" class="level3">
<h3 class="anchored" data-anchor-id="option-2-use-percentages-as-is">Option 2: Use percentages as-is</h3>
<p>This option might be necessary if we do not know the number of respondents replying to each question. Start by reading the data file and again rename the first column <code>Item</code> for consistency with the likert() function.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><span class="co" style="color: #5E5E5E;"># read prepared data</span></span>
<span id="cb26-2">dt <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">fread</span>(<span class="st" style="color: #20794D;">"case-study-2021-percent.csv"</span>)</span>
<span id="cb26-3"></span>
<span id="cb26-4"><span class="co" style="color: #5E5E5E;"># rename first column</span></span>
<span id="cb26-5"><span class="fu" style="color: #4758AB;">setnames_Item</span>(dt)</span></code></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: left;">Item</th>
<th style="text-align: right;">str_disagree</th>
<th style="text-align: right;">disagree</th>
<th style="text-align: right;">neutral</th>
<th style="text-align: right;">agree</th>
<th style="text-align: right;">str_agree</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Q1</td>
<td style="text-align: right;">6.5</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">25.8</td>
<td style="text-align: right;">38.7</td>
<td style="text-align: right;">29.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Q2</td>
<td style="text-align: right;">6.5</td>
<td style="text-align: right;">6.5</td>
<td style="text-align: right;">22.6</td>
<td style="text-align: right;">45.2</td>
<td style="text-align: right;">19.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Q3</td>
<td style="text-align: right;">3.2</td>
<td style="text-align: right;">3.2</td>
<td style="text-align: right;">16.1</td>
<td style="text-align: right;">29.0</td>
<td style="text-align: right;">48.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">Q4</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">6.5</td>
<td style="text-align: right;">32.3</td>
<td style="text-align: right;">38.7</td>
<td style="text-align: right;">22.6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Q5</td>
<td style="text-align: right;">6.5</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">19.4</td>
<td style="text-align: right;">35.5</td>
<td style="text-align: right;">38.7</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>With one row per question, the row percentages should sum to 100%. They do, but with an error due to rounding in the reported percentages.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><span class="co" style="color: #5E5E5E;"># check row totals of numeric columns</span></span>
<span id="cb27-2">sel_cols <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">names</span>(dt)[<span class="fu" style="color: #4758AB;">sapply</span>(dt, is.numeric)]</span>
<span id="cb27-3">row_sum  <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">rowSums</span>(dt[, .SD, <span class="at" style="color: #657422;">.SDcols =</span> sel_cols])</span>
<span id="cb27-4"></span>
<span id="cb27-5"><span class="co" style="color: #5E5E5E;"># examine result</span></span>
<span id="cb27-6">dt[, row_total <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> row_sum]</span>
<span id="cb27-7">dt[, rounding_error <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> row_sum <span class="sc" style="color: #5E5E5E;">-</span> <span class="dv" style="color: #AD0000;">100</span>]</span>
<span id="cb27-8">dt[, .(Item, row_total, rounding_error)]</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     Item row_total rounding_error
   &lt;char&gt;     &lt;num&gt;          &lt;num&gt;
1:     Q1     100.0            0.0
2:     Q2     100.2            0.2
3:     Q3      99.9           -0.1
4:     Q4     100.1            0.1
5:     Q5     100.1            0.1</code></pre>
</div>
</div>
<p>If we ignore the rounding error, it can introduce small but noticeable errors in the bar lengths in the chart. A simple remediation is to subtract the small errors from the neutral columns so that all rows sum to 100% exactly. The adjusted Neutrals are shown below.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><span class="co" style="color: #5E5E5E;"># subtract error from neutral</span></span>
<span id="cb29-2">dt[, adjusted_neutral <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> neutral <span class="sc" style="color: #5E5E5E;">-</span> rounding_error]</span>
<span id="cb29-3"></span>
<span id="cb29-4"><span class="co" style="color: #5E5E5E;"># examine the result</span></span>
<span id="cb29-5">dt[, .(Item, neutral, rounding_error, adjusted_neutral)]</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     Item neutral rounding_error adjusted_neutral
   &lt;char&gt;   &lt;num&gt;          &lt;num&gt;            &lt;num&gt;
1:     Q1    25.8            0.0             25.8
2:     Q2    22.6            0.2             22.4
3:     Q3    16.1           -0.1             16.2
4:     Q4    32.3            0.1             32.2
5:     Q5    19.4            0.1             19.3</code></pre>
</div>
</div>
</section>
<section id="likert-input-1" class="level3">
<h3 class="anchored" data-anchor-id="likert-input-1"><code>likert()</code> input</h3>
<p>Replacing neutral with the adjusted neutral and deleting the temporary information columns yields the data structure I need for the summary percentage form:</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><span class="co" style="color: #5E5E5E;"># adjust neutral</span></span>
<span id="cb31-2">dt[, neutral <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> adjusted_neutral]</span>
<span id="cb31-3"></span>
<span id="cb31-4"><span class="co" style="color: #5E5E5E;"># delete temporary information columns</span></span>
<span id="cb31-5">dt[, <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"row_total"</span>, <span class="st" style="color: #20794D;">"rounding_error"</span>, <span class="st" style="color: #20794D;">"adjusted_neutral"</span>) <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> <span class="cn" style="color: #8f5902;">NULL</span>]</span>
<span id="cb31-6"></span>
<span id="cb31-7"><span class="co" style="color: #5E5E5E;"># examine the result</span></span>
<span id="cb31-8">dt[]</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     Item str_disagree disagree neutral agree str_agree
   &lt;char&gt;        &lt;num&gt;    &lt;num&gt;   &lt;num&gt; &lt;num&gt;     &lt;num&gt;
1:     Q1          6.5      0.0    25.8  38.7      29.0
2:     Q2          6.5      6.5    22.4  45.2      19.4
3:     Q3          3.2      3.2    16.2  29.0      48.4
4:     Q4          0.0      6.5    32.2  38.7      22.6
5:     Q5          6.5      0.0    19.3  35.5      38.7</code></pre>
</div>
</div>
<p>Data structure:</p>
<ul>
<li>one row per question</li>
<li>first column is named <code>Item</code> and contains the question labels</li>
<li>remaining columns are named for the opinion levels in increasing order left to right</li>
<li>column values are the percentages of respondents choosing that option</li>
<li>the sum of row percentages is exactly 100%</li>
</ul>
<p>To prepare the data frame for graphing, I use the “edit the labels first” approach described earlier.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><span class="co" style="color: #5E5E5E;"># recode the opinion options</span></span>
<span id="cb33-2"><span class="fu" style="color: #4758AB;">setnames_opinion_labels</span>(dt)</span>
<span id="cb33-3"></span>
<span id="cb33-4"><span class="co" style="color: #5E5E5E;"># recode the question labels</span></span>
<span id="cb33-5">dt[, Item <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> question_labels]</span>
<span id="cb33-6"></span>
<span id="cb33-7"><span class="co" style="color: #5E5E5E;"># examine the result</span></span>
<span id="cb33-8">dt[]</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                   Item Strongly Disagree Disagree Neutral Agree Strongly Agree
                 &lt;char&gt;             &lt;num&gt;    &lt;num&gt;   &lt;num&gt; &lt;num&gt;          &lt;num&gt;
1:   Beyond the content               6.5      0.0    25.8  38.7           29.0
2:       Analyze errors               6.5      6.5    22.4  45.2           19.4
3:        Provide facts               3.2      3.2    16.2  29.0           48.4
4:      Develop writing               0.0      6.5    32.2  38.7           22.6
5: Independent learning               6.5      0.0    19.3  35.5           38.7</code></pre>
</div>
</div>
</section>
<section id="likert-output-1" class="level3">
<h3 class="anchored" data-anchor-id="likert-output-1"><code>likert()</code> output</h3>
<p>To operate on this data frame, we again use the <code>summary</code> argument of <code>likert()</code>. The result is a list similar to that produced when we operated on summary counts and the same familiar chart.</p>
<div class="cell" data-fig.asp="0.35">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb35" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><span class="co" style="color: #5E5E5E;"># create the likert list</span></span>
<span id="cb35-2">likert_list <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">likert</span>(<span class="at" style="color: #657422;">summary =</span> dt)</span>
<span id="cb35-3"></span>
<span id="cb35-4"><span class="co" style="color: #5E5E5E;"># examine its structure</span></span>
<span id="cb35-5"><span class="fu" style="color: #4758AB;">str</span>(likert_list)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>List of 5
 $ results :Classes 'data.table' and 'data.frame':  5 obs. of  6 variables:
  ..$ Item             : chr [1:5] "Beyond the content" "Analyze errors" "Provide facts" "Develop writing" ...
  ..$ Strongly Disagree: num [1:5] 6.5 6.5 3.2 0 6.5
  ..$ Disagree         : num [1:5] 0 6.5 3.2 6.5 0
  ..$ Neutral          : num [1:5] 25.8 22.4 16.2 32.2 19.3
  ..$ Agree            : num [1:5] 38.7 45.2 29 38.7 35.5
  ..$ Strongly Agree   : num [1:5] 29 19.4 48.4 22.6 38.7
  ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; 
 $ items   : NULL
 $ grouping: NULL
 $ nlevels : num 5
 $ levels  : chr [1:5] "Strongly Disagree" "Disagree" "Neutral" "Agree" ...
 - attr(*, "class")= chr "likert"</code></pre>
</div>
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb37" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><span class="co" style="color: #5E5E5E;"># 100% stacked bar chart</span></span>
<span id="cb37-2"><span class="fu" style="color: #4758AB;">likert_100_pct_bar</span>(likert_list)</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-02-13-survey-data-io/index_files/figure-html/chart-06-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="row-records" class="level2">
<h2 class="anchored" data-anchor-id="row-records">Row records</h2>
<p>In row-record form, everything we want to know about an individual is in one row, that is, a row-record for that individual. Thus the number of rows equals the number of respondents.</p>
<p>I made up a practice data set in row-record form with 31 rows and 6 columns. These are fictitious data I designed specifically to have the same summary characteristics as the published summary data used earlier.</p>
<p>Read the prepared data file in row-record form and view the data frame.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb38" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><span class="co" style="color: #5E5E5E;"># read observed data</span></span>
<span id="cb38-2">dt <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">fread</span>(<span class="st" style="color: #20794D;">"case-study-2021-row-record.csv"</span>)</span>
<span id="cb38-3"></span>
<span id="cb38-4"><span class="co" style="color: #5E5E5E;"># examine the result</span></span>
<span id="cb38-5">dt[]</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>      obs    Q1    Q2    Q3    Q4    Q5
    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
 1:     1     3     4     3     4     4
 2:     2     5     1     5     3     5
 3:     3     5     5     4     5     4
 4:     4     3     4     5     4     5
 5:     5     4     4     5     2     4
 6:     6     4     3     5     3     4
---                                    
26:    26     5     5     5     4     5
27:    27     5     2     3     4     1
28:    28     3     4     5     3     5
29:    29     3     3     4     3     4
30:    30     4     4     5     3     1
31:    31     4     4     5     5     5</code></pre>
</div>
</div>
<p>The first column is a fictitious respondent ID. The remaining columns represent responses to the survey questions. For basic charts like those shown here, all columns should be question responses, so I delete the ID. Though I don’t cover it here, additional non-question columns are allowed for grouping the results. See, for example, <span class="citation" data-cites="Mudge:2019">(Mudge 2019)</span>.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb40" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><span class="co" style="color: #5E5E5E;"># delete the ID column</span></span>
<span id="cb40-2">dt[, obs <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> <span class="cn" style="color: #8f5902;">NULL</span>]</span>
<span id="cb40-3"></span>
<span id="cb40-4"><span class="co" style="color: #5E5E5E;"># examine the result</span></span>
<span id="cb40-5">dt[]</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>       Q1    Q2    Q3    Q4    Q5
    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
 1:     3     4     3     4     4
 2:     5     1     5     3     5
 3:     5     5     4     5     4
 4:     3     4     5     4     5
 5:     4     4     5     2     4
 6:     4     3     5     3     4
---                              
26:     5     5     5     4     5
27:     5     2     3     4     1
28:     3     4     5     3     5
29:     3     3     4     3     4
30:     4     4     5     3     1
31:     4     4     5     5     5</code></pre>
</div>
</div>
<section id="likert-input-2" class="level3">
<h3 class="anchored" data-anchor-id="likert-input-2"><code>likert()</code> input</h3>
<p>For the <code>likert()</code> function to accept data in this form, all question response columns must be factors with identical sets of levels. Reformatting the columns and checking the structure yields,</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb42" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><span class="co" style="color: #5E5E5E;"># reformat columns as factors</span></span>
<span id="cb42-2">sel_cols <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">names</span>(dt)</span>
<span id="cb42-3">dt[, <span class="fu" style="color: #4758AB;">c</span>(sel_cols) <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> <span class="fu" style="color: #4758AB;">lapply</span>(.SD, <span class="cf" style="color: #003B4F;">function</span>(x) <span class="fu" style="color: #4758AB;">factor</span>(x, <span class="at" style="color: #657422;">levels =</span> <span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">5</span>)), .SDcols <span class="ot" style="color: #003B4F;">=</span> sel_cols]</span>
<span id="cb42-4"></span>
<span id="cb42-5"><span class="co" style="color: #5E5E5E;"># examine the result</span></span>
<span id="cb42-6">dt[]</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        Q1     Q2     Q3     Q4     Q5
    &lt;fctr&gt; &lt;fctr&gt; &lt;fctr&gt; &lt;fctr&gt; &lt;fctr&gt;
 1:      3      4      3      4      4
 2:      5      1      5      3      5
 3:      5      5      4      5      4
 4:      3      4      5      4      5
 5:      4      4      5      2      4
 6:      4      3      5      3      4
---                                   
26:      5      5      5      4      5
27:      5      2      3      4      1
28:      3      4      5      3      5
29:      3      3      4      3      4
30:      4      4      5      3      1
31:      4      4      5      5      5</code></pre>
</div>
</div>
<p>Input data structure</p>
<ul>
<li>One row per respondent. The number of rows equals the number of respondents.</li>
<li>One column per question. The column name is the question label. The number of columns equals the number of survey questions.<br>
</li>
<li>Each column is a factor with an identical set of levels. The number of levels equals the number of answer options in the survey.</li>
<li>Column values are the encoded opinions of the respondent: 1 (Strongly Disagree), 2 (Disagree), 3 (Neutral), etc.</li>
</ul>
</section>
<section id="likert-output-2" class="level3">
<h3 class="anchored" data-anchor-id="likert-output-2"><code>likert()</code> output</h3>
<p>To operate on a row-record data frame, we assign it to the <code>items</code> argument of the <code>likert()</code> function. The result is again a list.</p>
<p>However, unlike the previous output lists, the data.table structure of the input has not been preserved. I use data.table syntax in subsequent operations, so I convert both <code>results</code> and <code>items</code> to data.tables.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb44" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><span class="co" style="color: #5E5E5E;"># create likert list </span></span>
<span id="cb44-2">likert_list <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">likert</span>(<span class="at" style="color: #657422;">items =</span> dt)</span>
<span id="cb44-3"></span>
<span id="cb44-4"><span class="co" style="color: #5E5E5E;"># convert output data frames to data.tables</span></span>
<span id="cb44-5"><span class="fu" style="color: #4758AB;">setDT</span>(likert_list<span class="sc" style="color: #5E5E5E;">$</span>results)</span>
<span id="cb44-6"><span class="fu" style="color: #4758AB;">setDT</span>(likert_list<span class="sc" style="color: #5E5E5E;">$</span>items)</span>
<span id="cb44-7"></span>
<span id="cb44-8"><span class="co" style="color: #5E5E5E;"># examine the result</span></span>
<span id="cb44-9"><span class="fu" style="color: #4758AB;">str</span>(likert_list)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>List of 6
 $ results :Classes 'data.table' and 'data.frame':  5 obs. of  6 variables:
  ..$ Item: chr [1:5] "Q1" "Q2" "Q3" "Q4" ...
  ..$ 1   : num [1:5] 6.45 6.45 3.23 0 6.45
  ..$ 2   : num [1:5] 0 6.45 3.23 6.45 0
  ..$ 3   : num [1:5] 25.8 22.6 16.1 32.3 19.4
  ..$ 4   : num [1:5] 38.7 45.2 29 38.7 35.5
  ..$ 5   : num [1:5] 29 19.4 48.4 22.6 38.7
  ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; 
 $ items   :Classes 'data.table' and 'data.frame':  31 obs. of  5 variables:
  ..$ Q1: Factor w/ 5 levels "1","2","3","4",..: 3 5 5 3 4 4 3 1 4 5 ...
  ..$ Q2: Factor w/ 5 levels "1","2","3","4",..: 4 1 5 4 4 3 2 5 5 4 ...
  ..$ Q3: Factor w/ 5 levels "1","2","3","4",..: 3 5 4 5 5 5 4 4 4 5 ...
  ..$ Q4: Factor w/ 5 levels "1","2","3","4",..: 4 3 5 4 2 3 4 3 5 5 ...
  ..$ Q5: Factor w/ 5 levels "1","2","3","4",..: 4 5 4 5 4 4 4 3 4 3 ...
  ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; 
 $ grouping: NULL
 $ factors : NULL
 $ nlevels : int 5
 $ levels  : chr [1:5] "1" "2" "3" "4" ...
 - attr(*, "class")= chr "likert"</code></pre>
</div>
</div>
<p>The components of the list are:</p>
<dl>
<dt><code>results</code></dt>
<dd>
Data frame. Percentage of responses by question, opinion level, and group.
</dd>
<dt><code>items</code></dt>
<dd>
Data frame. Copy of original row-record input.
</dd>
<dt><code>grouping</code></dt>
<dd>
Copy of original grouping vector that subsets results (NULL in this example).
</dd>
<dt><code>factors</code></dt>
<dd>
Copy of original vector matching columns to factors (NULL in this example).
</dd>
<dt><code>nlevels</code></dt>
<dd>
Integer. Number of opinion levels used in the calculations.
</dd>
<dt><code>levels</code></dt>
<dd>
Character. Ordered vector of opinion level labels.
</dd>
</dl>
</section>
<section id="draft-chart" class="level3">
<h3 class="anchored" data-anchor-id="draft-chart">Draft chart</h3>
<p>With row-record data, the plot function requires both <code>results</code> and <code>items</code> from the output list. The chart is familiar, but the opinion labels are now the integers used to encode the survey results.</p>
<div class="cell" data-fig.asp="0.35">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb46" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><span class="fu" style="color: #4758AB;">likert_100_pct_bar</span>(likert_list)</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-02-13-survey-data-io/index_files/figure-html/chart-07-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="legend-key-1" class="level3">
<h3 class="anchored" data-anchor-id="legend-key-1">Legend key</h3>
<p>As before, the legend key is edited via the column names of <code>likert_list$results</code>. Note the corresponding changes in the likert list and chart.</p>
<div class="cell" data-fig.asp="0.35">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb47" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><span class="co" style="color: #5E5E5E;"># recode the opinion options</span></span>
<span id="cb47-2"><span class="fu" style="color: #4758AB;">setnames</span>(likert_list<span class="sc" style="color: #5E5E5E;">$</span>results, </span>
<span id="cb47-3">         <span class="at" style="color: #657422;">old =</span> <span class="fu" style="color: #4758AB;">as.character</span>(<span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">5</span>), </span>
<span id="cb47-4">         <span class="at" style="color: #657422;">new =</span> opinion_labels, </span>
<span id="cb47-5">         <span class="at" style="color: #657422;">skip_absent =</span> <span class="cn" style="color: #8f5902;">TRUE</span>)</span>
<span id="cb47-6"></span>
<span id="cb47-7"><span class="co" style="color: #5E5E5E;"># examine the result</span></span>
<span id="cb47-8"><span class="fu" style="color: #4758AB;">str</span>(likert_list)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>List of 6
 $ results :Classes 'data.table' and 'data.frame':  5 obs. of  6 variables:
  ..$ Item             : chr [1:5] "Q1" "Q2" "Q3" "Q4" ...
  ..$ Strongly Disagree: num [1:5] 6.45 6.45 3.23 0 6.45
  ..$ Disagree         : num [1:5] 0 6.45 3.23 6.45 0
  ..$ Neutral          : num [1:5] 25.8 22.6 16.1 32.3 19.4
  ..$ Agree            : num [1:5] 38.7 45.2 29 38.7 35.5
  ..$ Strongly Agree   : num [1:5] 29 19.4 48.4 22.6 38.7
  ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; 
 $ items   :Classes 'data.table' and 'data.frame':  31 obs. of  5 variables:
  ..$ Q1: Factor w/ 5 levels "1","2","3","4",..: 3 5 5 3 4 4 3 1 4 5 ...
  ..$ Q2: Factor w/ 5 levels "1","2","3","4",..: 4 1 5 4 4 3 2 5 5 4 ...
  ..$ Q3: Factor w/ 5 levels "1","2","3","4",..: 3 5 4 5 5 5 4 4 4 5 ...
  ..$ Q4: Factor w/ 5 levels "1","2","3","4",..: 4 3 5 4 2 3 4 3 5 5 ...
  ..$ Q5: Factor w/ 5 levels "1","2","3","4",..: 4 5 4 5 4 4 4 3 4 3 ...
  ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; 
 $ grouping: NULL
 $ factors : NULL
 $ nlevels : int 5
 $ levels  : chr [1:5] "1" "2" "3" "4" ...
 - attr(*, "class")= chr "likert"</code></pre>
</div>
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb49" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><span class="co" style="color: #5E5E5E;"># create the chart</span></span>
<span id="cb49-2"><span class="fu" style="color: #4758AB;">likert_100_pct_bar</span>(likert_list)</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-02-13-survey-data-io/index_files/figure-html/chart-08-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="question-labels-1" class="level3">
<h3 class="anchored" data-anchor-id="question-labels-1">Question labels</h3>
<p>With row-record data, both <code>results</code> and <code>items</code> data frames must be revised to edit the question labels. Note the corresponding changes in the likert list and chart.</p>
<div class="cell" data-fig.asp="0.35">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb50" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><span class="co" style="color: #5E5E5E;"># recode Item column of $results</span></span>
<span id="cb50-2">likert_list<span class="sc" style="color: #5E5E5E;">$</span>results[, Item <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> question_labels]</span>
<span id="cb50-3"></span>
<span id="cb50-4"><span class="co" style="color: #5E5E5E;"># recode column names of $items</span></span>
<span id="cb50-5"><span class="fu" style="color: #4758AB;">setnames</span>(likert_list<span class="sc" style="color: #5E5E5E;">$</span>items, </span>
<span id="cb50-6">         <span class="at" style="color: #657422;">old =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"Q1"</span>, <span class="st" style="color: #20794D;">"Q2"</span>, <span class="st" style="color: #20794D;">"Q3"</span>, <span class="st" style="color: #20794D;">"Q4"</span>, <span class="st" style="color: #20794D;">"Q5"</span>), </span>
<span id="cb50-7">         <span class="at" style="color: #657422;">new =</span> question_labels, </span>
<span id="cb50-8">         <span class="at" style="color: #657422;">skip_absent =</span> <span class="cn" style="color: #8f5902;">TRUE</span>)</span>
<span id="cb50-9"></span>
<span id="cb50-10"><span class="co" style="color: #5E5E5E;"># examine the result</span></span>
<span id="cb50-11"><span class="fu" style="color: #4758AB;">str</span>(likert_list)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>List of 6
 $ results :Classes 'data.table' and 'data.frame':  5 obs. of  6 variables:
  ..$ Item             : chr [1:5] "Beyond the content" "Analyze errors" "Provide facts" "Develop writing" ...
  ..$ Strongly Disagree: num [1:5] 6.45 6.45 3.23 0 6.45
  ..$ Disagree         : num [1:5] 0 6.45 3.23 6.45 0
  ..$ Neutral          : num [1:5] 25.8 22.6 16.1 32.3 19.4
  ..$ Agree            : num [1:5] 38.7 45.2 29 38.7 35.5
  ..$ Strongly Agree   : num [1:5] 29 19.4 48.4 22.6 38.7
  ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; 
 $ items   :Classes 'data.table' and 'data.frame':  31 obs. of  5 variables:
  ..$ Beyond the content  : Factor w/ 5 levels "1","2","3","4",..: 3 5 5 3 4 4 3 1 4 5 ...
  ..$ Analyze errors      : Factor w/ 5 levels "1","2","3","4",..: 4 1 5 4 4 3 2 5 5 4 ...
  ..$ Provide facts       : Factor w/ 5 levels "1","2","3","4",..: 3 5 4 5 5 5 4 4 4 5 ...
  ..$ Develop writing     : Factor w/ 5 levels "1","2","3","4",..: 4 3 5 4 2 3 4 3 5 5 ...
  ..$ Independent learning: Factor w/ 5 levels "1","2","3","4",..: 4 5 4 5 4 4 4 3 4 3 ...
  ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; 
 $ grouping: NULL
 $ factors : NULL
 $ nlevels : int 5
 $ levels  : chr [1:5] "1" "2" "3" "4" ...
 - attr(*, "class")= chr "likert"</code></pre>
</div>
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb52" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><span class="co" style="color: #5E5E5E;"># create the chart</span></span>
<span id="cb52-2"><span class="fu" style="color: #4758AB;">likert_100_pct_bar</span>(likert_list)</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-02-13-survey-data-io/index_files/figure-html/chart-09-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="or-edit-the-labels-first-1" class="level3">
<h3 class="anchored" data-anchor-id="or-edit-the-labels-first-1">Or edit the labels first</h3>
<p>As before, we have an alternative approach: one can produce the same result by editing the opinion labels and question labels of the data frame before submitting it to likert(). Question labels are substituted for the column names. Opinion levels (as text) are substituted for the encoded integers, i.e., 1 = Strongly Disagree through 5 = Strongly Agree.</p>
<p>To illustrate, I start with a fresh row-record data set.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb53" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><span class="co" style="color: #5E5E5E;"># read prepared data</span></span>
<span id="cb53-2">dt <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">fread</span>(<span class="st" style="color: #20794D;">"case-study-2021-row-record.csv"</span>)</span>
<span id="cb53-3"></span>
<span id="cb53-4"><span class="co" style="color: #5E5E5E;"># delete the ID column</span></span>
<span id="cb53-5">dt <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">subset</span>(dt, <span class="at" style="color: #657422;">select =</span> <span class="sc" style="color: #5E5E5E;">-</span><span class="fu" style="color: #4758AB;">c</span>(obs))</span>
<span id="cb53-6"></span>
<span id="cb53-7"><span class="co" style="color: #5E5E5E;"># recode the question labels in the column names</span></span>
<span id="cb53-8"><span class="fu" style="color: #4758AB;">setnames</span>(dt, </span>
<span id="cb53-9">         <span class="at" style="color: #657422;">old =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"Q1"</span>, <span class="st" style="color: #20794D;">"Q2"</span>, <span class="st" style="color: #20794D;">"Q3"</span>, <span class="st" style="color: #20794D;">"Q4"</span>, <span class="st" style="color: #20794D;">"Q5"</span>), </span>
<span id="cb53-10">         <span class="at" style="color: #657422;">new =</span> question_labels, </span>
<span id="cb53-11">         <span class="at" style="color: #657422;">skip_absent =</span> <span class="cn" style="color: #8f5902;">TRUE</span>)</span>
<span id="cb53-12"></span>
<span id="cb53-13"><span class="co" style="color: #5E5E5E;"># recode integer values with opinion options  </span></span>
<span id="cb53-14">sel_cols <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">names</span>(dt)</span>
<span id="cb53-15">dt[, (sel_cols) <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> <span class="fu" style="color: #4758AB;">lapply</span>(.SD, <span class="cf" style="color: #003B4F;">function</span>(x) <span class="fu" style="color: #4758AB;">fcase</span>(</span>
<span id="cb53-16">  x <span class="sc" style="color: #5E5E5E;">==</span> <span class="dv" style="color: #AD0000;">1</span>, opinion_labels[<span class="dv" style="color: #AD0000;">1</span>],</span>
<span id="cb53-17">  x <span class="sc" style="color: #5E5E5E;">==</span> <span class="dv" style="color: #AD0000;">2</span>, opinion_labels[<span class="dv" style="color: #AD0000;">2</span>],</span>
<span id="cb53-18">  x <span class="sc" style="color: #5E5E5E;">==</span> <span class="dv" style="color: #AD0000;">3</span>, opinion_labels[<span class="dv" style="color: #AD0000;">3</span>],</span>
<span id="cb53-19">  x <span class="sc" style="color: #5E5E5E;">==</span> <span class="dv" style="color: #AD0000;">4</span>, opinion_labels[<span class="dv" style="color: #AD0000;">4</span>],</span>
<span id="cb53-20">  x <span class="sc" style="color: #5E5E5E;">==</span> <span class="dv" style="color: #AD0000;">5</span>, opinion_labels[<span class="dv" style="color: #AD0000;">5</span>])),</span>
<span id="cb53-21">  .SDcols <span class="ot" style="color: #003B4F;">=</span> sel_cols]</span>
<span id="cb53-22"></span>
<span id="cb53-23"><span class="co" style="color: #5E5E5E;"># convert columns to factors  </span></span>
<span id="cb53-24">dt <span class="ot" style="color: #003B4F;">&lt;-</span> dt[, <span class="fu" style="color: #4758AB;">lapply</span>(.SD, <span class="cf" style="color: #003B4F;">function</span>(x) <span class="fu" style="color: #4758AB;">factor</span>(x, <span class="at" style="color: #657422;">levels =</span> opinion_labels)), .SDcols <span class="ot" style="color: #003B4F;">=</span> sel_cols]</span>
<span id="cb53-25"></span>
<span id="cb53-26"><span class="co" style="color: #5E5E5E;"># examine the result</span></span>
<span id="cb53-27">dt[]</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>    Beyond the content    Analyze errors  Provide facts Develop writing
                &lt;fctr&gt;            &lt;fctr&gt;         &lt;fctr&gt;          &lt;fctr&gt;
 1:            Neutral             Agree        Neutral           Agree
 2:     Strongly Agree Strongly Disagree Strongly Agree         Neutral
 3:     Strongly Agree    Strongly Agree          Agree  Strongly Agree
 4:            Neutral             Agree Strongly Agree           Agree
 5:              Agree             Agree Strongly Agree        Disagree
 6:              Agree           Neutral Strongly Agree         Neutral
---                                                                    
26:     Strongly Agree    Strongly Agree Strongly Agree           Agree
27:     Strongly Agree          Disagree        Neutral           Agree
28:            Neutral             Agree Strongly Agree         Neutral
29:            Neutral           Neutral          Agree         Neutral
30:              Agree             Agree Strongly Agree         Neutral
31:              Agree             Agree Strongly Agree  Strongly Agree
    Independent learning
                  &lt;fctr&gt;
 1:                Agree
 2:       Strongly Agree
 3:                Agree
 4:       Strongly Agree
 5:                Agree
 6:                Agree
---                     
26:       Strongly Agree
27:    Strongly Disagree
28:       Strongly Agree
29:                Agree
30:    Strongly Disagree
31:       Strongly Agree</code></pre>
</div>
</div>
<p>Input to <code>likert()</code> produces the familiar chart.</p>
<div class="cell" data-fig.asp="0.35">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb55" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><span class="co" style="color: #5E5E5E;"># create the likert list</span></span>
<span id="cb55-2">likert_list <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">likert</span>(<span class="at" style="color: #657422;">items =</span> dt)</span>
<span id="cb55-3"></span>
<span id="cb55-4"><span class="co" style="color: #5E5E5E;"># examine the result</span></span>
<span id="cb55-5"><span class="fu" style="color: #4758AB;">str</span>(likert_list)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>List of 6
 $ results :'data.frame':   5 obs. of  6 variables:
  ..$ Item             : chr [1:5] "Beyond the content" "Analyze errors" "Provide facts" "Develop writing" ...
  ..$ Strongly Disagree: num [1:5] 6.45 6.45 3.23 0 6.45
  ..$ Disagree         : num [1:5] 0 6.45 3.23 6.45 0
  ..$ Neutral          : num [1:5] 25.8 22.6 16.1 32.3 19.4
  ..$ Agree            : num [1:5] 38.7 45.2 29 38.7 35.5
  ..$ Strongly Agree   : num [1:5] 29 19.4 48.4 22.6 38.7
 $ items   :'data.frame':   31 obs. of  5 variables:
  ..$ Beyond the content  : Factor w/ 5 levels "Strongly Disagree",..: 3 5 5 3 4 4 3 1 4 5 ...
  ..$ Analyze errors      : Factor w/ 5 levels "Strongly Disagree",..: 4 1 5 4 4 3 2 5 5 4 ...
  ..$ Provide facts       : Factor w/ 5 levels "Strongly Disagree",..: 3 5 4 5 5 5 4 4 4 5 ...
  ..$ Develop writing     : Factor w/ 5 levels "Strongly Disagree",..: 4 3 5 4 2 3 4 3 5 5 ...
  ..$ Independent learning: Factor w/ 5 levels "Strongly Disagree",..: 4 5 4 5 4 4 4 3 4 3 ...
 $ grouping: NULL
 $ factors : NULL
 $ nlevels : int 5
 $ levels  : chr [1:5] "Strongly Disagree" "Disagree" "Neutral" "Agree" ...
 - attr(*, "class")= chr "likert"</code></pre>
</div>
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb57" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><span class="co" style="color: #5E5E5E;"># create the chart</span></span>
<span id="cb57-2"><span class="fu" style="color: #4758AB;">likert_100_pct_bar</span>(likert_list)</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-02-13-survey-data-io/index_files/figure-html/chart-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="data-table" class="level3">
<h3 class="anchored" data-anchor-id="data-table">Data table</h3>
<p>The <code>results</code> component can also be used to construct a summary data table.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb58" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1">likert_list<span class="sc" style="color: #5E5E5E;">$</span>results</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                  Item Strongly Disagree Disagree  Neutral    Agree
1   Beyond the content          6.451613 0.000000 25.80645 38.70968
2       Analyze errors          6.451613 6.451613 22.58065 45.16129
3        Provide facts          3.225806 3.225806 16.12903 29.03226
4      Develop writing          0.000000 6.451613 32.25806 38.70968
5 Independent learning          6.451613 0.000000 19.35484 35.48387
  Strongly Agree
1       29.03226
2       19.35484
3       48.38710
4       22.58065
5       38.70968</code></pre>
</div>
</div>
<p>Rounding the digits, we produce a publication-ready table. I’m assuming the abbreviated question labels are OK—if not, each could be replaced with its complete assertion. In this form, the rows of the table are in the same order as the rows of the chart—a structure that could be useful to the reader.</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 27%">
<col style="width: 23%">
<col style="width: 11%">
<col style="width: 10%">
<col style="width: 7%">
<col style="width: 19%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Item</th>
<th style="text-align: right;">Strongly Disagree</th>
<th style="text-align: right;">Disagree</th>
<th style="text-align: right;">Neutral</th>
<th style="text-align: right;">Agree</th>
<th style="text-align: right;">Strongly Agree</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Beyond the content</td>
<td style="text-align: right;">6.5</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">25.8</td>
<td style="text-align: right;">38.7</td>
<td style="text-align: right;">29.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Analyze errors</td>
<td style="text-align: right;">6.5</td>
<td style="text-align: right;">6.5</td>
<td style="text-align: right;">22.6</td>
<td style="text-align: right;">45.2</td>
<td style="text-align: right;">19.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Provide facts</td>
<td style="text-align: right;">3.2</td>
<td style="text-align: right;">3.2</td>
<td style="text-align: right;">16.1</td>
<td style="text-align: right;">29.0</td>
<td style="text-align: right;">48.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">Develop writing</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">6.5</td>
<td style="text-align: right;">32.3</td>
<td style="text-align: right;">38.7</td>
<td style="text-align: right;">22.6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Independent learning</td>
<td style="text-align: right;">6.5</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">19.4</td>
<td style="text-align: right;">35.5</td>
<td style="text-align: right;">38.7</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The values in this table were computed by likert from the fictitious row-record data. The numbers agree with the source data table.</p>
</section>

</section>

<div id="quarto-appendix" class="default"><section id="additional-software-credits" class="level3 appendix"><h2 class="quarto-appendix-heading">Additional software credits</h2><div class="quarto-appendix-contents">

<ul>
<li><a href="https://CRAN.R-project.org/package=likert"><code>likert</code></a> for manipulating and plotting Likert-style data</li>
</ul>



</div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Chanenson:2021" class="csl-entry">
Chanenson, Jake. 2021. <span>“<span>On Likert Scales In R</span>.”</span> <a href="https://jakec007.github.io/2021-06-23-R-likert/">https://jakec007.github.io/2021-06-23-R-likert/</a>.
</div>
<div id="ref-Maxworth:2021" class="csl-entry">
Maxworth, Ashanthi. 2021. <span>“<span class="nocase">Looking ahead: Advancing engineering education through case studies in introductory courses</span>.”</span> <em>Advances in Engineering Education</em> 9 (4): 1–9. <a href="https://drive.google.com/file/d/1r3w6gQfCHvnahXuyKD9Yeb1kYYWHd2cE/view?usp=sharing">https://drive.google.com/file/d/1r3w6gQfCHvnahXuyKD9Yeb1kYYWHd2cE/view?usp=sharing</a>.
</div>
<div id="ref-Mudge:2019" class="csl-entry">
Mudge, Laura. 2019. <span>“<span class="nocase">Data visualization for Likert questions</span>.”</span> <a href="https://lmudge13.github.io/sample_code/likert_graphs.html">https://lmudge13.github.io/sample_code/likert_graphs.html</a>.
</div>
</div></section></div> ]]></description>
  <category>R</category>
  <guid>https://graphdr.github.io/data-stories/posts/2022-02-13-survey-data-io/index.html</guid>
  <pubDate>Sun, 13 Feb 2022 05:00:00 GMT</pubDate>
  <media:content url="https://graphdr.github.io/data-stories/posts/2022-02-13-survey-data-io/thumbnail.png" medium="image" type="image/png" height="94" width="144"/>
</item>
<item>
  <title>Plot the variable of interest</title>
  <link>https://graphdr.github.io/data-stories/posts/2022-02-01-plot-the-variable-of-interest/index.html</link>
  <description><![CDATA[ 



<div class="callout-note callout callout-style-simple no-icon callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Summary
</div>
</div>
<div class="callout-body-container callout-body">
<p>I redesign a stacked-bar chart to attempt to better align the logic of the display with the logic of the argument. The visual structure of the redesigned chart suggests a concomitant reorganization of the prose, illustrating the interplay between visual and verbal rhetoric.</p>
</div>
</div>
<p>In a 2021 article, the authors summarize 134 engineering-curricula articles for teachers of pre-college students. The authors classify the articles by grade level and the type of engineering inquiry <span class="citation" data-cites="Purzer+Quintana-Cifuentes+Menekse:2021">(Purzer, Quintana-Cifuentes, and Menekse 2021)</span>.</p>
<p>In section 7, the authors include a data table of numbers of articles by grade level and inquiry type. A stacked-bar chart represents the numbers in the table. In supporting their argument, however, the authors cite <em>ratios</em> of these values—ratios that might be inferred, but are not directly displayed, in the chart provided.</p>
<p>I take the text to represent the authors’ intended message and look for ways to more effectively represent that message visually.</p>
<p>My intention is not to critique the article as a whole, which develops a “honeycomb of engineering” research framework for examining how engineering concepts and practices are taught at pre-college levels. I focus instead on the interplay between data, argument, and charts in one section only.</p>
<p>Throughout the post, you can click on the “R code” pointer to see the script used to create the graphs. This first code chunk loads the R packages used.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;"># packages</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;">library</span>(<span class="st" style="color: #20794D;">"data.table"</span>)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;">library</span>(<span class="st" style="color: #20794D;">"ggplot2"</span>)</span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;">library</span>(<span class="st" style="color: #20794D;">"cowplot"</span>)</span></code></pre></div>
</details>
</div>
<section id="data-structure" class="level2">
<h2 class="anchored" data-anchor-id="data-structure">Data structure</h2>
<p>In the original Table 2, the authors classify 134 articles by grade level and the type of engineering inquiry. These are the raw numbers they cite in their discussion. The parenthetical titles in the column heading are the journals in which the articles appear.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-02-01-plot-the-variable-of-interest/original-table-2.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><p></p>
</figure>
</div>
<p>Because the structure of a data set is an important factor in designing a chart, I classify the variables in Table 1. The multiway dot chart was designed specifically for data of this type: one quantitative variable depending on two independent categorical variables <span class="citation" data-cites="Cleveland:1993">(Cleveland 1993, 302)</span>.</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Data structure</caption>
<thead>
<tr class="header">
<th style="text-align: left;">variable</th>
<th style="text-align: left;">structure</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">number of published articles</td>
<td style="text-align: left;">quantitative</td>
</tr>
<tr class="even">
<td style="text-align: left;">type of engineering inquiry</td>
<td style="text-align: left;">categorical, nominal, 6 levels</td>
</tr>
<tr class="odd">
<td style="text-align: left;">grade level</td>
<td style="text-align: left;">categorical, ordinal, 3 levels</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The data are available in the blog data directory.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="co" style="color: #5E5E5E;"># read prepared data</span></span>
<span id="cb2-2">dt <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">fread</span>(<span class="st" style="color: #20794D;">"honeycomb-2021.csv"</span>)</span>
<span id="cb2-3"></span>
<span id="cb2-4"><span class="co" style="color: #5E5E5E;"># order the levels of grade level</span></span>
<span id="cb2-5">dt <span class="ot" style="color: #003B4F;">&lt;-</span> dt[, grade_level <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> <span class="fu" style="color: #4758AB;">factor</span>(grade_level, <span class="at" style="color: #657422;">levels =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"Elementary School"</span>, <span class="st" style="color: #20794D;">"Middle School"</span>, <span class="st" style="color: #20794D;">"High School"</span>))]</span>
<span id="cb2-6"></span>
<span id="cb2-7"><span class="co" style="color: #5E5E5E;"># compute percentage of articles by grade level</span></span>
<span id="cb2-8">dt[, pct_level <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> <span class="fu" style="color: #4758AB;">round</span>(N <span class="sc" style="color: #5E5E5E;">/</span> N_level <span class="sc" style="color: #5E5E5E;">*</span> <span class="dv" style="color: #AD0000;">100</span>, <span class="dv" style="color: #AD0000;">0</span>)]</span>
<span id="cb2-9"></span>
<span id="cb2-10"><span class="co" style="color: #5E5E5E;"># obtain the total N of articles</span></span>
<span id="cb2-11">article_total <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">sum</span>(dt<span class="sc" style="color: #5E5E5E;">$</span>N)</span></code></pre></div>
</details>
</div>
</section>
<section id="limitations-of-stacked-bars" class="level2">
<h2 class="anchored" data-anchor-id="limitations-of-stacked-bars">Limitations of stacked bars</h2>
<p>The original Figure 3 is a conventional stacked-bar representation of the numbers in Table 2. The authors improve on the usual default software settings by ordering the rows of the chart from top to bottom by increasing totals.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-02-01-plot-the-variable-of-interest/original-figure-3.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><p></p>
</figure>
</div>
<p>The perceptual limitations of stacked-bar charts are well-known: visual comparisons are effective for quantities having a common baseline and are ineffective otherwise.</p>
<blockquote class="blockquote">
<p>Stacked bars work well when you want to compare totals across different categories, and then within a given category, you want some understanding of the subcomponent pieces. Notice though, that they work less well if you want to compare those subcomponent pieces across categories. This is because as soon as you get past the first series, you no longer have a consistent baseline to use to compare. This is a harder comparison for our eyes to make, so something to keep in mind when reaching for stacked bars. —Cole Nussbaumer Knaflic <span class="citation" data-cites="Knaflic:2017">(2017)</span></p>
</blockquote>
</section>
<section id="whats-your-point" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="whats-your-point">What’s your point?</h2>
<p>Referring to the stacked-bar chart (original Figure 3) and the data table (original Table 2), the authors state,</p>
<blockquote class="blockquote">
<p>A total of 134 articles that made explicit connections to engineering, included sufficient details on design challenges and engineering problems, and were labeled as engineering lessons (see Figure 3). Table 2 presents the frequency of these categories across three grade-level bands. Of the 134 articles, 63 (47%) were published at the elementary level in <em>Science &amp; Children</em>, 51 (38%) in <em>Science Scope</em> representing the middle school, and 20 (15%) in <em>The Science Teacher</em> at the high school level.</p>
</blockquote>
<p>The original Figure 3 does not reflect the logic of this argument. The stacked-bar chart visually compares article totals by type of inquiry and (as Knaflic says) offers some “understanding of the sub-component pieces,” but neither of these arguments are made in the text.</p>
<p>So what’s the point of the chart?</p>
<blockquote class="blockquote">
<p>What’s your point? Seriously, that’s the most important question to ask when creating a data visualization. —Stephanie Evergreen <span class="citation" data-cites="Evergreen:2021">(2021)</span></p>
</blockquote>
<p>If the point of the chart is to illustrate the three percentages mentioned in the text (15%, 38%, and 47%), then a combined bar chart and table would serve.</p>
<div class="cell page-columns page-full" data-fig.asp="0.2">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;"># aesthetic assignments across charts</span></span>
<span id="cb3-2">text_col_x      <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="dv" style="color: #AD0000;">105</span></span>
<span id="cb3-3">theme_text_size <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="dv" style="color: #AD0000;">11</span></span>
<span id="cb3-4">geom_text_size  <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="dv" style="color: #AD0000;">4</span></span>
<span id="cb3-5">geom_point_size <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fl" style="color: #AD0000;">3.5</span></span>
<span id="cb3-6">bar_fill        <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="st" style="color: #20794D;">"#C2A5CF"</span> <span class="co" style="color: #5E5E5E;"># light purple</span></span>
<span id="cb3-7">gray_text       <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="st" style="color: #20794D;">"#636363"</span></span>
<span id="cb3-8"></span>
<span id="cb3-9"><span class="co" style="color: #5E5E5E;"># subset selected data for this chart</span></span>
<span id="cb3-10">sel <span class="ot" style="color: #003B4F;">&lt;-</span> dt[, .(grade_level, N_level)]</span>
<span id="cb3-11">sel <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">unique</span>(sel)</span>
<span id="cb3-12"></span>
<span id="cb3-13"><span class="co" style="color: #5E5E5E;"># basic bar chart</span></span>
<span id="cb3-14">p <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="at" style="color: #657422;">data =</span> sel, <span class="at" style="color: #657422;">mapping =</span> <span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> N_level, <span class="at" style="color: #657422;">y =</span> grade_level)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb3-15">  <span class="fu" style="color: #4758AB;">geom_bar</span>(<span class="at" style="color: #657422;">stat =</span> <span class="st" style="color: #20794D;">"identity"</span>, <span class="at" style="color: #657422;">width =</span> <span class="fl" style="color: #AD0000;">0.7</span>, <span class="at" style="color: #657422;">fill =</span> bar_fill) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb3-16">  <span class="fu" style="color: #4758AB;">scale_x_continuous</span>(<span class="at" style="color: #657422;">limits =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">10</span>, text_col_x)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb3-17">  <span class="fu" style="color: #4758AB;">coord_cartesian</span>(<span class="at" style="color: #657422;">clip =</span> <span class="st" style="color: #20794D;">"off"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb3-18">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">x =</span> <span class="st" style="color: #20794D;">""</span>, <span class="at" style="color: #657422;">y =</span> <span class="st" style="color: #20794D;">""</span>)</span>
<span id="cb3-19"></span>
<span id="cb3-20"><span class="co" style="color: #5E5E5E;"># edit theme </span></span>
<span id="cb3-21">p <span class="ot" style="color: #003B4F;">&lt;-</span> p <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb3-22">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb3-23">  <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">panel.grid  =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(), </span>
<span id="cb3-24">        <span class="at" style="color: #657422;">axis.text.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(), </span>
<span id="cb3-25">        <span class="at" style="color: #657422;">axis.text.y =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">size =</span> theme_text_size), </span>
<span id="cb3-26">        <span class="at" style="color: #657422;">plot.title  =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">size =</span> theme_text_size, <span class="at" style="color: #657422;">face =</span> <span class="st" style="color: #20794D;">"plain"</span>, <span class="at" style="color: #657422;">hjust =</span> <span class="dv" style="color: #AD0000;">0</span>))</span>
<span id="cb3-27"></span>
<span id="cb3-28"><span class="co" style="color: #5E5E5E;"># column of percentages</span></span>
<span id="cb3-29">p <span class="ot" style="color: #003B4F;">&lt;-</span> p <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb3-30">  <span class="fu" style="color: #4758AB;">geom_text</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> <span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">5</span>, <span class="at" style="color: #657422;">y =</span> <span class="fu" style="color: #4758AB;">reorder</span>(grade_level, N_level), <span class="at" style="color: #657422;">label =</span> <span class="fu" style="color: #4758AB;">paste0</span>(<span class="fu" style="color: #4758AB;">round</span>(<span class="dv" style="color: #AD0000;">100</span> <span class="sc" style="color: #5E5E5E;">*</span> N_level<span class="sc" style="color: #5E5E5E;">/</span>article_total, <span class="dv" style="color: #AD0000;">0</span>), <span class="st" style="color: #20794D;">"%"</span>)), </span>
<span id="cb3-31">            <span class="at" style="color: #657422;">hjust =</span> <span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">color =</span> gray_text, <span class="at" style="color: #657422;">size =</span> geom_text_size)</span>
<span id="cb3-32"></span>
<span id="cb3-33"><span class="co" style="color: #5E5E5E;"># column of N</span></span>
<span id="cb3-34">p <span class="ot" style="color: #003B4F;">&lt;-</span> p <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb3-35">  <span class="fu" style="color: #4758AB;">geom_text</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> text_col_x, <span class="at" style="color: #657422;">y =</span> <span class="fu" style="color: #4758AB;">reorder</span>(grade_level, N_level), <span class="at" style="color: #657422;">label =</span> N_level), </span>
<span id="cb3-36">            <span class="at" style="color: #657422;">hjust =</span> <span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">color =</span> gray_text, <span class="at" style="color: #657422;">size =</span> geom_text_size)</span>
<span id="cb3-37"></span>
<span id="cb3-38"><span class="co" style="color: #5E5E5E;"># total N</span></span>
<span id="cb3-39">p <span class="ot" style="color: #003B4F;">&lt;-</span> p <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb3-40">  <span class="fu" style="color: #4758AB;">geom_text</span>(<span class="at" style="color: #657422;">x =</span> text_col_x, <span class="at" style="color: #657422;">y =</span> <span class="dv" style="color: #AD0000;">0</span>, <span class="at" style="color: #657422;">label =</span> <span class="fu" style="color: #4758AB;">paste0</span>(<span class="st" style="color: #20794D;">"Total: "</span>, article_total), </span>
<span id="cb3-41">            <span class="at" style="color: #657422;">hjust =</span> <span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">color =</span> gray_text, <span class="at" style="color: #657422;">size =</span> geom_text_size)</span>
<span id="cb3-42"></span>
<span id="cb3-43"><span class="co" style="color: #5E5E5E;"># print the chart</span></span>
<span id="cb3-44">p</span></code></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div id="fig-table-bars-1" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-02-01-plot-the-variable-of-interest/index_files/figure-html/fig-table-bars-1-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><p></p>
</figure>
</div>
</div>
</div>
<p>In this design, based on <span class="citation" data-cites="Doumont:2009">(Doumont 2009, 135)</span>, bars are drawn horizontally so the labels are easily read. Combined with the tabulated numbers, a scale is unnecessary. To respect the proportion among the data, bars are shown in full (starting at zero). Because grade level is an ordinal category (ordered levels), I order the rows in “graph order,” that is, with increasing grade level from bottom to top.</p>
<p>In contrast, if the point of the original chart is to compare totals by type of inquiry—which the original figure supports but the text neglects—then a similar chart-table could be used. Because inquiry type is a nominal category (unordered levels), rows are ordered by the number of articles by type.</p>
<div class="cell page-columns page-full" data-fig.asp="0.3">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;">ggplot</span>(<span class="at" style="color: #657422;">data =</span> dt, <span class="at" style="color: #657422;">mapping =</span> <span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> N, <span class="at" style="color: #657422;">y =</span> <span class="fu" style="color: #4758AB;">reorder</span>(inquiry, N_inquiry))) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb4-2">  <span class="fu" style="color: #4758AB;">geom_bar</span>(<span class="at" style="color: #657422;">stat =</span> <span class="st" style="color: #20794D;">"identity"</span>, <span class="at" style="color: #657422;">width =</span> <span class="fl" style="color: #AD0000;">0.75</span>, <span class="at" style="color: #657422;">fill =</span> bar_fill) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb4-3">  <span class="fu" style="color: #4758AB;">scale_x_continuous</span>(<span class="at" style="color: #657422;">limits =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">10</span>, text_col_x)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb4-4">  <span class="fu" style="color: #4758AB;">coord_cartesian</span>(<span class="at" style="color: #657422;">clip =</span> <span class="st" style="color: #20794D;">"off"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb4-5">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">x =</span> <span class="st" style="color: #20794D;">""</span>, <span class="at" style="color: #657422;">y =</span> <span class="st" style="color: #20794D;">""</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb4-6">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb4-7">  <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">panel.grid  =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(), </span>
<span id="cb4-8">        <span class="at" style="color: #657422;">axis.text.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(), </span>
<span id="cb4-9">        <span class="at" style="color: #657422;">axis.text.y =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">size =</span> theme_text_size), </span>
<span id="cb4-10">        <span class="at" style="color: #657422;">plot.title  =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">size =</span> theme_text_size, <span class="at" style="color: #657422;">face =</span> <span class="st" style="color: #20794D;">"plain"</span>, <span class="at" style="color: #657422;">hjust =</span> <span class="dv" style="color: #AD0000;">0</span>)) <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb4-11"></span>
<span id="cb4-12">  <span class="co" style="color: #5E5E5E;"># column of percentages</span></span>
<span id="cb4-13">  <span class="fu" style="color: #4758AB;">geom_text</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x     =</span> <span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">5</span>, </span>
<span id="cb4-14">                <span class="at" style="color: #657422;">y     =</span> <span class="fu" style="color: #4758AB;">reorder</span>(inquiry, N_inquiry), </span>
<span id="cb4-15">                <span class="at" style="color: #657422;">label =</span> <span class="fu" style="color: #4758AB;">paste0</span>(<span class="fu" style="color: #4758AB;">round</span>(<span class="dv" style="color: #AD0000;">100</span> <span class="sc" style="color: #5E5E5E;">*</span> N_inquiry<span class="sc" style="color: #5E5E5E;">/</span>article_total, <span class="dv" style="color: #AD0000;">0</span>), <span class="st" style="color: #20794D;">"%"</span>)), </span>
<span id="cb4-16">            <span class="at" style="color: #657422;">hjust =</span> <span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">color =</span> gray_text) <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb4-17">  </span>
<span id="cb4-18">  <span class="co" style="color: #5E5E5E;"># column of N</span></span>
<span id="cb4-19">  <span class="fu" style="color: #4758AB;">geom_text</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> text_col_x, <span class="at" style="color: #657422;">y =</span> <span class="fu" style="color: #4758AB;">reorder</span>(inquiry, N_inquiry), <span class="at" style="color: #657422;">label =</span> N_inquiry), </span>
<span id="cb4-20">            <span class="at" style="color: #657422;">hjust =</span> <span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">color =</span> gray_text, <span class="at" style="color: #657422;">size =</span> geom_text_size) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb4-21">  </span>
<span id="cb4-22">  <span class="co" style="color: #5E5E5E;"># total N</span></span>
<span id="cb4-23">  <span class="fu" style="color: #4758AB;">geom_text</span>(<span class="at" style="color: #657422;">x =</span> text_col_x, <span class="at" style="color: #657422;">y =</span> <span class="dv" style="color: #AD0000;">0</span>, <span class="at" style="color: #657422;">label =</span> <span class="fu" style="color: #4758AB;">paste0</span>(<span class="st" style="color: #20794D;">"Total: "</span>, article_total), </span>
<span id="cb4-24">            <span class="at" style="color: #657422;">hjust =</span> <span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">color =</span> gray_text, <span class="at" style="color: #657422;">size =</span> geom_text_size)</span></code></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div id="fig-table-bars-2" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-02-01-plot-the-variable-of-interest/index_files/figure-html/fig-table-bars-2-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><p></p>
</figure>
</div>
</div>
</div>
<p>Both of my suggested charts avoid the limitations of the stacked-bar chart and both support specific—and different—arguments. A short paragraph comparing grade levels is quite distinct from one comparing inquiry types. Deciding which to use (or both) depends on the point(s) you want to make. The text is not clear on what point the original figure is making.</p>
</section>
<section id="interplay-between-chart-and-argument" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="interplay-between-chart-and-argument">Interplay between chart and argument</h2>
<p>Following the paragraph quoted earlier, the article goes on to compare different ratios of numbers from the data table, with paragraphs organized around inquiry type. For example, the Design-Build-Test (DBT) discussion begins with,</p>
<blockquote class="blockquote">
<p>The DBT model was observed across all grade levels. These types of lessons and design projects were most popular at the elementary level, featured in 75% (47 of 63) of engineering lessons published at this grade level band, followed by 67% (34 of 51) at the middle-school level and 50% (10 of 20) at the high school level. In the DBT engineering lessons… [continues with project examples]</p>
</blockquote>
<p>Here the variable of interest is the “popularity” of DBT as a percentage of articles in a grade level band. In this next chart, I compare the stated percentages visually.</p>
<div class="cell page-columns page-full" data-fig.asp="0.25">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="co" style="color: #5E5E5E;"># subset selected data for this chart</span></span>
<span id="cb5-2">sel <span class="ot" style="color: #003B4F;">&lt;-</span> dt[abbr <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"(DBT)"</span>, .(grade_level, N, N_level, pct_level)]</span>
<span id="cb5-3"></span>
<span id="cb5-4"><span class="fu" style="color: #4758AB;">ggplot</span>(<span class="at" style="color: #657422;">data =</span> sel, <span class="at" style="color: #657422;">mapping =</span> <span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> pct_level, <span class="at" style="color: #657422;">y =</span> grade_level)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb5-5">  <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="at" style="color: #657422;">size =</span> geom_point_size) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb5-6">  <span class="fu" style="color: #4758AB;">scale_x_continuous</span>(<span class="at" style="color: #657422;">limits =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">80</span>), <span class="at" style="color: #657422;">breaks =</span> <span class="fu" style="color: #4758AB;">seq</span>(<span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">100</span>, <span class="dv" style="color: #AD0000;">10</span>), <span class="at" style="color: #657422;">expand =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">0</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb5-7">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">x =</span> <span class="st" style="color: #20794D;">"Fraction of N articles at grade level (%)"</span>, <span class="at" style="color: #657422;">y =</span> <span class="st" style="color: #20794D;">""</span>, <span class="at" style="color: #657422;">title =</span> <span class="st" style="color: #20794D;">"Design-Build-Test"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb5-8">  </span>
<span id="cb5-9">  <span class="co" style="color: #5E5E5E;"># edit theme</span></span>
<span id="cb5-10">  <span class="fu" style="color: #4758AB;">theme_light</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb5-11">  <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">axis.text  =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">size =</span> theme_text_size),</span>
<span id="cb5-12">        <span class="at" style="color: #657422;">plot.title =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">size =</span> theme_text_size, <span class="at" style="color: #657422;">face =</span> <span class="st" style="color: #20794D;">"plain"</span>, <span class="at" style="color: #657422;">hjust =</span> <span class="dv" style="color: #AD0000;">0</span>), </span>
<span id="cb5-13">        <span class="at" style="color: #657422;">panel.grid.minor =</span> <span class="fu" style="color: #4758AB;">element_blank</span>()) <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb5-14"></span>
<span id="cb5-15">  <span class="co" style="color: #5E5E5E;"># total N per row</span></span>
<span id="cb5-16">  <span class="fu" style="color: #4758AB;">geom_text</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> <span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">y =</span> grade_level, <span class="at" style="color: #657422;">label =</span> <span class="fu" style="color: #4758AB;">paste0</span>(<span class="st" style="color: #20794D;">"(N = "</span>, N_level, <span class="st" style="color: #20794D;">")"</span>)),</span>
<span id="cb5-17">            <span class="at" style="color: #657422;">hjust =</span> <span class="dv" style="color: #AD0000;">0</span>, <span class="at" style="color: #657422;">color =</span> gray_text, <span class="at" style="color: #657422;">size =</span> geom_text_size)</span></code></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div id="fig-dot-chart-1" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-02-01-plot-the-variable-of-interest/index_files/figure-html/fig-dot-chart-1-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><p></p>
</figure>
</div>
</div>
</div>
<p>The perceptual difficulty I have with this chart is that each row is a percentage of a different N. Conventionally, a comparison of percentages are based on a common denominator. Yet the chart accurately reflects the argument in the text—my perceptual difficulty with the chart suggests an underlying difficulty in the argument.</p>
<p>We encounter the same difficulty with the original stacked-bar chart. Visually, the DBT segments are shown as components of the DBT bar. Verbally, the DBT segments are discussed as percentages of sums of segments across all bars.</p>
<p>This is not to say there is anything wrong with the argument—only that the logic of the argument is not reflected in the design logic of the chart.</p>
<p><strong>Chart redesign</strong></p>
<p>I designed Figure 4 to better reflect the intellectual logic of the argument by plotting percentages of grade-level articles in the same panel. Thus all values in a panel have the same denominator and the percentages in a panel sum to 100%. Consistent with the data structure, the basic design (as expected) is a multiway dot chart.</p>
<p>To compare key values across panels, I used color to highlight the three inquiries the grade-level bands have in common. Rows and panels are in graph order. The small bar charts along the side of the multiway chart show the relative proportions of N for each row and their sum is given at the bottom of each column. The names of the source journals are included in the panel headings.</p>
<div class="cell page-columns page-full" data-fig.asp="0.8">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="co" style="color: #5E5E5E;"># subset for this chart, percentages set to NA don't print</span></span>
<span id="cb6-2">sel <span class="ot" style="color: #003B4F;">&lt;-</span> dt[pct_level <span class="sc" style="color: #5E5E5E;">==</span> <span class="dv" style="color: #AD0000;">0</span>, pct_level <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> <span class="cn" style="color: #8f5902;">NA</span>]</span>
<span id="cb6-3">sel[, level_journal <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> <span class="fu" style="color: #4758AB;">paste0</span>(grade_level, <span class="st" style="color: #20794D;">" ("</span>, journal, <span class="st" style="color: #20794D;">")"</span>)]</span>
<span id="cb6-4"></span>
<span id="cb6-5"><span class="co" style="color: #5E5E5E;"># plot 1: multiway dot plot</span></span>
<span id="cb6-6">plot1 <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="at" style="color: #657422;">data =</span> sel, <span class="at" style="color: #657422;">mapping =</span> <span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> pct_level, <span class="at" style="color: #657422;">y =</span> <span class="fu" style="color: #4758AB;">reorder</span>(inquiry, N_inquiry))) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-7">  <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="at" style="color: #657422;">size =</span> geom_point_size, <span class="at" style="color: #657422;">shape =</span> <span class="dv" style="color: #AD0000;">21</span>, <span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">"white"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-8">  <span class="fu" style="color: #4758AB;">facet_wrap</span>(<span class="fu" style="color: #4758AB;">vars</span>(<span class="fu" style="color: #4758AB;">reorder</span>(level_journal, <span class="fu" style="color: #4758AB;">unclass</span>(grade_level))), <span class="at" style="color: #657422;">ncol =</span> <span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">as.table =</span> <span class="cn" style="color: #8f5902;">FALSE</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-9">  <span class="fu" style="color: #4758AB;">scale_x_continuous</span>(<span class="at" style="color: #657422;">limits =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">80</span>), <span class="at" style="color: #657422;">breaks =</span> <span class="fu" style="color: #4758AB;">seq</span>(<span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">100</span>, <span class="dv" style="color: #AD0000;">10</span>), <span class="at" style="color: #657422;">expand =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">0</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-10">  <span class="fu" style="color: #4758AB;">coord_cartesian</span>(<span class="at" style="color: #657422;">clip =</span> <span class="st" style="color: #20794D;">"off"</span>) <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb6-11">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">x =</span> <span class="st" style="color: #20794D;">"Percentage of articles by grade level"</span>, <span class="at" style="color: #657422;">y =</span> <span class="st" style="color: #20794D;">""</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-12">  <span class="fu" style="color: #4758AB;">theme_light</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-13">  <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">panel.grid.minor =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(), </span>
<span id="cb6-14">        <span class="at" style="color: #657422;">axis.text        =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">size =</span> theme_text_size),</span>
<span id="cb6-15">        <span class="at" style="color: #657422;">strip.background =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(), </span>
<span id="cb6-16">        <span class="at" style="color: #657422;">strip.text  =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">size =</span> theme_text_size, <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"black"</span>, <span class="at" style="color: #657422;">face =</span> <span class="st" style="color: #20794D;">"plain"</span>, <span class="at" style="color: #657422;">hjust =</span> <span class="dv" style="color: #AD0000;">0</span>),</span>
<span id="cb6-17">        <span class="at" style="color: #657422;">plot.title  =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">size =</span> theme_text_size, <span class="at" style="color: #657422;">face =</span> <span class="st" style="color: #20794D;">"plain"</span>, <span class="at" style="color: #657422;">hjust =</span> <span class="dv" style="color: #AD0000;">0</span>), </span>
<span id="cb6-18">        <span class="co" style="color: #5E5E5E;"># top, right, bottom, and left</span></span>
<span id="cb6-19">        <span class="at" style="color: #657422;">plot.margin =</span> <span class="fu" style="color: #4758AB;">unit</span>(<span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">0</span>), <span class="st" style="color: #20794D;">"mm"</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-20">  </span>
<span id="cb6-21">  <span class="co" style="color: #5E5E5E;"># overprint the top three inquiry dots</span></span>
<span id="cb6-22">  <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="at" style="color: #657422;">data =</span> sel[abbr <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"(DBT)"</span>], <span class="at" style="color: #657422;">shape =</span> <span class="dv" style="color: #AD0000;">21</span>, <span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">"#1b9e77"</span>, <span class="at" style="color: #657422;">size =</span> geom_point_size) <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb6-23">  <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="at" style="color: #657422;">data =</span> sel[abbr <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"(UCD)"</span>], <span class="at" style="color: #657422;">shape =</span> <span class="dv" style="color: #AD0000;">21</span>, <span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">"#d95f02"</span>, <span class="at" style="color: #657422;">size =</span> geom_point_size) <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb6-24">  <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="at" style="color: #657422;">data =</span> sel[abbr <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"(ENS)"</span>], <span class="at" style="color: #657422;">shape =</span> <span class="dv" style="color: #AD0000;">21</span>, <span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">"#7570b3"</span>, <span class="at" style="color: #657422;">size =</span> geom_point_size)</span>
<span id="cb6-25"></span>
<span id="cb6-26"><span class="co" style="color: #5E5E5E;"># plot 2: bar chart on the side</span></span>
<span id="cb6-27">plot2 <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="at" style="color: #657422;">data =</span> sel, <span class="at" style="color: #657422;">mapping =</span> <span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> N, <span class="at" style="color: #657422;">y =</span> <span class="fu" style="color: #4758AB;">reorder</span>(inquiry, N_inquiry))) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-28">  <span class="fu" style="color: #4758AB;">geom_bar</span>(<span class="at" style="color: #657422;">stat =</span> <span class="st" style="color: #20794D;">"identity"</span>, <span class="at" style="color: #657422;">width =</span> <span class="fl" style="color: #AD0000;">0.75</span>, <span class="at" style="color: #657422;">fill =</span> bar_fill) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-29">  <span class="fu" style="color: #4758AB;">facet_wrap</span>(<span class="fu" style="color: #4758AB;">vars</span>(grade_level), <span class="at" style="color: #657422;">ncol =</span> <span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">as.table =</span> <span class="cn" style="color: #8f5902;">FALSE</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-30">  <span class="fu" style="color: #4758AB;">scale_x_continuous</span>(<span class="at" style="color: #657422;">limits =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">20</span>, <span class="fu" style="color: #4758AB;">max</span>(sel<span class="sc" style="color: #5E5E5E;">$</span>N))) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-31">  <span class="fu" style="color: #4758AB;">coord_cartesian</span>(<span class="at" style="color: #657422;">clip =</span> <span class="st" style="color: #20794D;">"off"</span>) <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb6-32">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">x =</span> <span class="st" style="color: #20794D;">""</span>, <span class="at" style="color: #657422;">y =</span> <span class="st" style="color: #20794D;">""</span>, <span class="at" style="color: #657422;">title =</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-33">  </span>
<span id="cb6-34">  <span class="co" style="color: #5E5E5E;"># edit theme</span></span>
<span id="cb6-35">  <span class="fu" style="color: #4758AB;">theme_light</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-36">  <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">panel.grid =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(), </span>
<span id="cb6-37">        <span class="at" style="color: #657422;">axis.ticks =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(), </span>
<span id="cb6-38">        <span class="at" style="color: #657422;">panel.border =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(), </span>
<span id="cb6-39">        <span class="at" style="color: #657422;">axis.text.x =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"white"</span>),</span>
<span id="cb6-40">        <span class="at" style="color: #657422;">axis.text.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(), </span>
<span id="cb6-41">        <span class="at" style="color: #657422;">strip.background =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(), </span>
<span id="cb6-42">        <span class="at" style="color: #657422;">strip.text =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"white"</span>),</span>
<span id="cb6-43">        <span class="co" style="color: #5E5E5E;"># margins top, right, bottom, and left</span></span>
<span id="cb6-44">        <span class="at" style="color: #657422;">plot.margin =</span> <span class="fu" style="color: #4758AB;">unit</span>(<span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">0</span>, <span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">5</span>), <span class="st" style="color: #20794D;">"mm"</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-45"></span>
<span id="cb6-46">  <span class="co" style="color: #5E5E5E;"># "N" at the top of column</span></span>
<span id="cb6-47">  <span class="fu" style="color: #4758AB;">annotate</span>(<span class="st" style="color: #20794D;">"text"</span>, <span class="at" style="color: #657422;">x =</span> <span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">5</span>, <span class="at" style="color: #657422;">y =</span> <span class="fl" style="color: #AD0000;">7.25</span>, <span class="at" style="color: #657422;">label =</span> <span class="st" style="color: #20794D;">"N"</span>, <span class="at" style="color: #657422;">hjust =</span> <span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">color =</span> gray_text, <span class="at" style="color: #657422;">size =</span> geom_text_size) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-48">  </span>
<span id="cb6-49">  <span class="co" style="color: #5E5E5E;"># column of N</span></span>
<span id="cb6-50">  <span class="fu" style="color: #4758AB;">geom_text</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> <span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">5</span>, <span class="at" style="color: #657422;">y =</span> <span class="fu" style="color: #4758AB;">reorder</span>(inquiry, N_inquiry), <span class="at" style="color: #657422;">label =</span> N),</span>
<span id="cb6-51">            <span class="at" style="color: #657422;">hjust =</span> <span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">color =</span> gray_text, <span class="at" style="color: #657422;">size =</span> geom_text_size) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-52">  </span>
<span id="cb6-53">  <span class="co" style="color: #5E5E5E;"># short line under column of numbers</span></span>
<span id="cb6-54">  <span class="fu" style="color: #4758AB;">geom_segment</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> <span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">20</span>, <span class="at" style="color: #657422;">y =</span> <span class="fl" style="color: #AD0000;">0.45</span>,  <span class="at" style="color: #657422;">xend =</span> <span class="sc" style="color: #5E5E5E;">-</span><span class="fl" style="color: #AD0000;">0.8</span>, <span class="at" style="color: #657422;">yend =</span> <span class="fl" style="color: #AD0000;">0.45</span>), <span class="at" style="color: #657422;">color =</span> gray_text) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-55">  </span>
<span id="cb6-56">  <span class="co" style="color: #5E5E5E;"># sum of N per level</span></span>
<span id="cb6-57">  <span class="fu" style="color: #4758AB;">geom_text</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> <span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">5</span>, <span class="at" style="color: #657422;">y =</span> <span class="dv" style="color: #AD0000;">0</span>, <span class="at" style="color: #657422;">label =</span> N_level), <span class="at" style="color: #657422;">hjust =</span> <span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">color =</span> gray_text, <span class="at" style="color: #657422;">size =</span> geom_text_size)</span>
<span id="cb6-58"></span>
<span id="cb6-59"><span class="co" style="color: #5E5E5E;"># combine the two plots</span></span>
<span id="cb6-60">cowplot<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">ggdraw</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-61">  <span class="fu" style="color: #4758AB;">draw_plot</span>(plot1, <span class="at" style="color: #657422;">x =</span> <span class="dv" style="color: #AD0000;">0</span>, <span class="at" style="color: #657422;">y =</span> <span class="dv" style="color: #AD0000;">0</span>, <span class="at" style="color: #657422;">width =</span> <span class="fl" style="color: #AD0000;">0.8</span>, <span class="at" style="color: #657422;">height =</span> <span class="dv" style="color: #AD0000;">1</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-62">  <span class="fu" style="color: #4758AB;">draw_plot</span>(plot2, <span class="at" style="color: #657422;">x =</span> <span class="fl" style="color: #AD0000;">0.82</span>, <span class="at" style="color: #657422;">y =</span> <span class="dv" style="color: #AD0000;">0</span>, <span class="at" style="color: #657422;">width =</span> <span class="fl" style="color: #AD0000;">0.18</span>, <span class="at" style="color: #657422;">height =</span> <span class="dv" style="color: #AD0000;">1</span>)</span></code></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div id="fig-dot-chart-2" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-02-01-plot-the-variable-of-interest/index_files/figure-html/fig-dot-chart-2-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><p></p>
</figure>
</div>
</div>
</div>
<p>The important feature of this design is that the majority of the percentages compared in the original text are visually compared in the figure. It also conveys all the textual information from the original data table.</p>
<p>Like the missing entries in the original data table, missing inquiry types are easy to spot by the absence of a data marker. (In a strict sense, these are not missing data; the actual values are zero—as shown in the numerical columns of the side bar-charts.)</p>
<p>We can also see that the top three types of inquiry have the same rank order in all grade levels. The bar charts help us recognize the extent to which the top two inquiry types dominate the literature.</p>
<p>An added rhetorical advantage of this design to potential audiences such as pre-college teachers or creators of pre-college engineering materials is the snapshot it provides of the state of their area of interest.</p>
<p>Lastly, that the organization of the chart is visually more effective suggests that a reorganization of the argument could also be more effective. The primary organization of the chart is by grade-level band. If I were to align the logic of the argument with the logic of the display, then the text too would be organized by grade-level band. For example, I might start the discussion as follows:</p>
<p><small> The elementary school grade level had only three types of inquiry but the highest number of articles overall (N = 63). DBT is by far the largest portion of articles (75%) with UCD (21%) and ENS (4%) making up the rest.</small></p><small>
<p>Compared to the elementary level, the middle school level had nearly as many articles (N = 51) and the same top three inquiry types. But with more inquiry types, the top three inquiries comprised smaller percentages of the whole: DBT (67%), UCD (18%), ENS (6%). Middle school is also the only level in which all six inquiry types are present.</p>
</small><p><small>In contrast, the high school level … etc. </small></p>
<p>Aligning visual rhetoric and verbal rhetoric in this fashion can be an important aid to a reader trying to follow the discussion. Moreover, this process can be an important aid to an authorial team in developing their message in the first place. The iterative interplay between constructing a chart and constructing an argument—between visual rhetoric and verbal rhetoric—is one of the most important aspects of data visualization.</p>

</section>

<div id="quarto-appendix" class="default"><section id="additional-software-credits" class="level3 appendix"><h2 class="quarto-appendix-heading">Additional software credits</h2><div class="quarto-appendix-contents">

<ul>
<li><a href="https://CRAN.R-project.org/package=cowplot"><code>cowplot</code></a> for joining plots</li>
</ul>



</div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Cleveland:1993" class="csl-entry">
Cleveland, William S. 1993. <em><span>Visualizing Data</span></em>. Summit, NJ: <span>Hobart Press</span>.
</div>
<div id="ref-Doumont:2009" class="csl-entry">
Doumont, Jean-luc. 2009. <em><span class="nocase">Trees, Maps, and Theorems</span></em>. Belgium: <span>Principiae</span>.
</div>
<div id="ref-Evergreen:2021" class="csl-entry">
Evergreen, Stephanie. 2021. <span>“<span class="nocase">The most important question in data visualization</span>.”</span> <span>Evergreen Data</span>. <a href="https://stephanieevergreen.com/most-important-question/">https://stephanieevergreen.com/most-important-question/</a>.
</div>
<div id="ref-Knaflic:2017" class="csl-entry">
Knaflic, Cole Nussbaumer. 2017. <span>“<span class="nocase">Making a case for stacked bars</span>.”</span> <span>Storytelling with Data</span>. <a href="https://www.storytellingwithdata.com/blog/2017/11/13/making-a-case-for-stacked-bars">https://www.storytellingwithdata.com/blog/2017/11/13/making-a-case-for-stacked-bars</a>.
</div>
<div id="ref-Purzer+Quintana-Cifuentes+Menekse:2021" class="csl-entry">
Purzer, Şenay, Jenny Quintana-Cifuentes, and Mushin Menekse. 2021. <span>“<span class="nocase">The honeycomb of engineering framework: Philosophy of engineering guiding precollege engineering education</span>.”</span> <em>Journal of Engineering Education</em> 111 (1): 19–39. <a href="https://doi.org/10.1002/jee.20441">https://doi.org/10.1002/jee.20441</a>.
</div>
</div></section></div> ]]></description>
  <category>R</category>
  <category>data storytelling</category>
  <category>engineering education</category>
  <guid>https://graphdr.github.io/data-stories/posts/2022-02-01-plot-the-variable-of-interest/index.html</guid>
  <pubDate>Thu, 03 Feb 2022 05:00:00 GMT</pubDate>
  <media:content url="https://graphdr.github.io/data-stories/posts/2022-02-01-plot-the-variable-of-interest/thumbnail.png" medium="image" type="image/png" height="64" width="144"/>
</item>
<item>
  <title>Stacked-bar alternatives</title>
  <link>https://graphdr.github.io/data-stories/posts/2022-01-14-stacked-bar-alternatives/index.html</link>
  <description><![CDATA[ 



<div class="callout-note callout callout-style-simple no-icon callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Summary
</div>
</div>
<div class="callout-body-container callout-body">
<p>The rhetorical shortcomings of stacked-bar charts are overcome using alternative designs better suited for making visual comparisons. Both examples start as stacked-bar charts but end as different types, based on the variables to be shown and the messages to be conveyed.</p>
</div>
</div>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;">library</span>(<span class="st" style="color: #20794D;">"data.table"</span>)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;">library</span>(<span class="st" style="color: #20794D;">"ggplot2"</span>)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;">library</span>(<span class="st" style="color: #20794D;">"GGally"</span>)</span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;">library</span>(<span class="st" style="color: #20794D;">"graphclassmate"</span>)</span></code></pre></div>
</details>
</div>
<p>In a recent article, the authors used two stacked bar charts to illustrate data on postdoctoral engineering PhDs <span class="citation" data-cites="Main+Wang+Tan:2021">(Main, Wang, and Tan 2021)</span>. The charts are truthful but not particularly informative—the visual logic of stacked bars tends to obscure rather than inform insight. By redesigning the charts, I hope to better align the logic of the visuals with the logic of the arguments.</p>
<p>The data in the article are summarized from the National Science Foundation’s (NSF) 1993–2013 Survey of Doctorate Recipients (SDR) and 1985–2013 Survey of Earned Doctorates (SED). I couldn’t find the original NSF annual data tables, so I approximated the values for my charts by measuring the lengths of bar segments in the original figures.</p>
<p>My purpose is not to find fault with the authors. Indeed, stacked bar charts like these are found throughout the NSF publications that report on the raw data. The authors can hardly be faulted for conforming to visual conventions sustained by the NSF.</p>
<section id="eliminating-the-trivial" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="eliminating-the-trivial">Eliminating the trivial</h2>
<p><strong>The original chart</strong></p>
<p>In this chart, the authors display responses to the survey question “What was your primary reason for taking this postdoc?” by PhD completion year.</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-01-14-stacked-bar-alternatives/fig2.png" class="img-fluid figure-img" style="width:75.0%"></p>
<p></p><p></p>
</figure>
</div>
<p>Data structure:</p>
<ul>
<li>percentage of respondents annually selecting reasons, quantitative variable<br>
</li>
<li>reasons for postdoctoral training, nominal categorical variable, 6 levels<br>
</li>
<li>year of PhD completion, discrete ordinal categorical variable, 1995–2011</li>
</ul>
<p><strong>Exploratory design: evolutions</strong></p>
<p>A prominent element of this stacked-bar design is time on the horizontal axis. A visual convention in this discourse community is that independent variables occupy horizontal axes, implying here that time is the independent variable. Conventionally, time-dependent variables are best graphed as scatterplots with connected dots to display their evolution over time <span class="citation" data-cites="Doumont:2009">(Doumont 2009, 141)</span>.</p>
<p>The figure below shows the stacked-bar data as a collection of evolutions—how survey percentages vary over time conditioned by the reason for obtaining postdoc training. The panels are organized in “graph order”, that is, increasing median value from left to right and from bottom to top (the panel median is shown as a horizontal reference line in each panel).</p>
<div class="cell page-columns page-full" data-fig.asp="1">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">dt <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">fread</span>(<span class="st" style="color: #20794D;">"data/fig2.csv"</span>)</span>
<span id="cb2-2"></span>
<span id="cb2-3">dt[, med_pct <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> <span class="fu" style="color: #4758AB;">median</span>(pct), by <span class="ot" style="color: #003B4F;">=</span> <span class="st" style="color: #20794D;">"reason"</span>]</span>
<span id="cb2-4"></span>
<span id="cb2-5"><span class="fu" style="color: #4758AB;">ggplot</span>(<span class="at" style="color: #657422;">data =</span> dt, <span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> year, <span class="at" style="color: #657422;">y =</span> pct)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb2-6">  <span class="fu" style="color: #4758AB;">geom_line</span>(<span class="at" style="color: #657422;">linetype =</span> <span class="dv" style="color: #AD0000;">2</span>, <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"gray"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb2-7">  <span class="fu" style="color: #4758AB;">geom_hline</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">yintercept =</span> med_pct), <span class="at" style="color: #657422;">linetype =</span> <span class="dv" style="color: #AD0000;">3</span>) <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb2-8">  <span class="fu" style="color: #4758AB;">geom_point</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb2-9">  <span class="fu" style="color: #4758AB;">facet_wrap</span>(<span class="fu" style="color: #4758AB;">vars</span>(<span class="fu" style="color: #4758AB;">reorder</span>(reason, pct, median)), <span class="at" style="color: #657422;">ncol =</span> <span class="dv" style="color: #AD0000;">2</span>, <span class="at" style="color: #657422;">as.table =</span> <span class="cn" style="color: #8f5902;">FALSE</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb2-10">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">x =</span> <span class="st" style="color: #20794D;">"PhD completion year"</span>, <span class="at" style="color: #657422;">y =</span> <span class="st" style="color: #20794D;">""</span>)</span></code></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div id="fig-line-chart" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-01-14-stacked-bar-alternatives/index_files/figure-html/fig-line-chart-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><p></p>
</figure>
</div>
</div>
</div>
<p>No particular time-dependent trend stands out. However, two of the panels—Training in areas outside of PhD field and Other employment not available—appear to be inversely correlated. This made me wonder if and to what extent correlations exist.</p>
<p><strong>Exploratory design: correlations</strong></p>
<p>One approach to visualizing multivariate correlations is a scatterplot matrix, a grid of scatterplots of pairwise relationships <span class="citation" data-cites="Emerson+Green+etal:2013">(Emerson et al. 2013)</span> as shown below. The lower triangle shows graphs of data taken two variables at a time with each data marker representing a year (the time variable is still present); the diagonal shows the distribution of each reason; and the upper triangle gives the pairwise Pearson correlation coefficients.</p>
<div class="cell page-columns page-full">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">dtwide <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">copy</span>(dt)</span>
<span id="cb3-2">dtwide <span class="ot" style="color: #003B4F;">&lt;-</span> dtwide[.(<span class="at" style="color: #657422;">reason =</span> <span class="fu" style="color: #4758AB;">c</span>(</span>
<span id="cb3-3">  <span class="st" style="color: #20794D;">"Additional training in PhD field"</span>, </span>
<span id="cb3-4">  <span class="st" style="color: #20794D;">"Training in areas outside of PhD field"</span>, </span>
<span id="cb3-5">  <span class="st" style="color: #20794D;">"Postdoc generally expected for career in this field"</span>, </span>
<span id="cb3-6">  <span class="st" style="color: #20794D;">"Work with a specific person or place"</span>, </span>
<span id="cb3-7">  <span class="st" style="color: #20794D;">"Other"</span>, </span>
<span id="cb3-8">  <span class="st" style="color: #20794D;">"Other employment not available"</span>), </span>
<span id="cb3-9">  <span class="at" style="color: #657422;">to =</span> <span class="fu" style="color: #4758AB;">c</span>(</span>
<span id="cb3-10">    <span class="st" style="color: #20794D;">"In field"</span>, </span>
<span id="cb3-11">    <span class="st" style="color: #20794D;">"Out of field"</span>, </span>
<span id="cb3-12">    <span class="st" style="color: #20794D;">"Expected"</span>, </span>
<span id="cb3-13">    <span class="st" style="color: #20794D;">"Specific"</span>, </span>
<span id="cb3-14">    <span class="st" style="color: #20794D;">"Other"</span>, </span>
<span id="cb3-15">    <span class="st" style="color: #20794D;">"Unavailable"</span>)), </span>
<span id="cb3-16">  on <span class="ot" style="color: #003B4F;">=</span> <span class="st" style="color: #20794D;">"reason"</span>, </span>
<span id="cb3-17">  reason <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> i.to]</span>
<span id="cb3-18"></span>
<span id="cb3-19">dtwide <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">dcast</span>(dtwide, year <span class="sc" style="color: #5E5E5E;">~</span> reason, <span class="at" style="color: #657422;">value.var =</span> <span class="st" style="color: #20794D;">"pct"</span>, <span class="at" style="color: #657422;">fill =</span> <span class="dv" style="color: #AD0000;">0</span>)</span>
<span id="cb3-20"></span>
<span id="cb3-21"><span class="co" style="color: #5E5E5E;"># https://stackoverflow.com/questions/30720455/how-to-set-same-scales-across-different-facets-with-ggpairs</span></span>
<span id="cb3-22">lowerfun <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cf" style="color: #003B4F;">function</span>(data, mapping){</span>
<span id="cb3-23">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="at" style="color: #657422;">data =</span> data, <span class="at" style="color: #657422;">mapping =</span> mapping) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb3-24">    <span class="fu" style="color: #4758AB;">geom_point</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb3-25">    <span class="fu" style="color: #4758AB;">scale_x_continuous</span>(<span class="at" style="color: #657422;">limits =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">45</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb3-26">    <span class="fu" style="color: #4758AB;">scale_y_continuous</span>(<span class="at" style="color: #657422;">limits =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">45</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb3-27">    <span class="fu" style="color: #4758AB;">geom_smooth</span>(<span class="at" style="color: #657422;">formula =</span> y <span class="sc" style="color: #5E5E5E;">~</span> x, <span class="at" style="color: #657422;">method =</span> <span class="st" style="color: #20794D;">"loess"</span>, <span class="at" style="color: #657422;">se =</span> <span class="cn" style="color: #8f5902;">FALSE</span>, <span class="at" style="color: #657422;">size =</span> <span class="fl" style="color: #AD0000;">0.5</span>)</span>
<span id="cb3-28">} </span>
<span id="cb3-29"></span>
<span id="cb3-30"><span class="fu" style="color: #4758AB;">ggpairs</span>(dtwide, </span>
<span id="cb3-31">        <span class="at" style="color: #657422;">columns =</span> <span class="dv" style="color: #AD0000;">2</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">7</span>, </span>
<span id="cb3-32">        <span class="at" style="color: #657422;">upper =</span> <span class="fu" style="color: #4758AB;">list</span>(<span class="at" style="color: #657422;">continuous =</span> <span class="fu" style="color: #4758AB;">wrap</span>(<span class="st" style="color: #20794D;">"cor"</span>, <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">3</span>)), </span>
<span id="cb3-33">        <span class="at" style="color: #657422;">lower =</span> <span class="fu" style="color: #4758AB;">list</span>(<span class="at" style="color: #657422;">continuous =</span> <span class="fu" style="color: #4758AB;">wrap</span>(lowerfun))</span>
<span id="cb3-34">        )</span></code></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div id="fig-scatterplot-matrix" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-01-14-stacked-bar-alternatives/index_files/figure-html/fig-scatterplot-matrix-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><p></p>
</figure>
</div>
</div>
</div>
<p>Two variable pairs have correlation coefficients greater than 0.6, which for human behavior indicates a fairly strong correlation. Both are negative (inverse) correlations: one (that I noticed in the scatterplots) between “other employment unavailable” and “training outside the PhD field”; and a second between “expected in the field” and “other”. In the figure below. I extract both pairs of data to isolate the pairings.</p>
<div class="cell page-columns page-full" data-fig.asp="1">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;">ggpairs</span>(dtwide, </span>
<span id="cb4-2">        <span class="at" style="color: #657422;">columns =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">7</span>, <span class="dv" style="color: #AD0000;">5</span>), </span>
<span id="cb4-3">        <span class="at" style="color: #657422;">upper =</span> <span class="fu" style="color: #4758AB;">list</span>(<span class="at" style="color: #657422;">continuous =</span> <span class="fu" style="color: #4758AB;">wrap</span>(<span class="st" style="color: #20794D;">"cor"</span>, <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">3</span>)), </span>
<span id="cb4-4">        <span class="at" style="color: #657422;">lower =</span> <span class="fu" style="color: #4758AB;">list</span>(<span class="at" style="color: #657422;">continuous =</span> <span class="fu" style="color: #4758AB;">wrap</span>(lowerfun))</span>
<span id="cb4-5">        )</span></code></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div id="fig-correlation-close-up" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-01-14-stacked-bar-alternatives/index_files/figure-html/fig-correlation-close-up-1.png" class="img-fluid figure-img" width="307"></p>
<p></p><p></p>
</figure>
</div>
</div>
</div>
<div class="cell page-columns page-full" data-fig.asp="1">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;">ggpairs</span>(dtwide, </span>
<span id="cb5-2">        <span class="at" style="color: #657422;">columns =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">2</span>, <span class="dv" style="color: #AD0000;">4</span>), </span>
<span id="cb5-3">        <span class="at" style="color: #657422;">upper =</span> <span class="fu" style="color: #4758AB;">list</span>(<span class="at" style="color: #657422;">continuous =</span> <span class="fu" style="color: #4758AB;">wrap</span>(<span class="st" style="color: #20794D;">"cor"</span>, <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">3</span>)), </span>
<span id="cb5-4">        <span class="at" style="color: #657422;">lower =</span> <span class="fu" style="color: #4758AB;">list</span>(<span class="at" style="color: #657422;">continuous =</span> <span class="fu" style="color: #4758AB;">wrap</span>(lowerfun))</span>
<span id="cb5-5">        )</span></code></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div id="fig-correlation-close-up-2" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-01-14-stacked-bar-alternatives/index_files/figure-html/fig-correlation-close-up-2-1.png" class="img-fluid figure-img" width="307"></p>
<p></p><p></p>
</figure>
</div>
</div>
</div>
<p>The messages appears to be that</p>
<ul>
<li>years with a higher percentage of “Other employment not available” correlate with a lower percentage of “Training in areas outside of PhD field”, suggesting that when higher numbers of students accept postdoc positions because other employment is not to be found, they are not generally interested in obtaining new training outside their field.</li>
<li>years with a higher percentage of “Postdoc generally expected for career in this field” correlate to a lower percentage of “Other” reasons, which seems a reasonable if unremarkable result.</li>
</ul>
<p>Mildly interesting, but not really compelling.</p>
<p><strong>Final design: distributions</strong></p>
<p>The evolution-assumption in the previous designs imposes an unnecessary barrier to finding stories in these data: time in this case is a prominent, but trivial, variable—the design <em>emphasizes the trivial</em> <span class="citation" data-cites="Wainer:1997">(Wainer 1997, 30)</span>.</p>
<p>Having the year in the data does not mean we have to use it. Ignoring time, I’m left with a data set comprising distributions of percentages conditioned by reason. For comparing distributions, the appropriate graph design is a box and whisker plot—the conventions of the box and whisker plot should be familiar to members of this discourse community.</p>
<div class="cell page-columns page-full">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="fu" style="color: #4758AB;">ggplot</span>(dt, <span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> pct, <span class="at" style="color: #657422;">y =</span> <span class="fu" style="color: #4758AB;">reorder</span>(reason, pct, median))) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-2">  <span class="fu" style="color: #4758AB;">geom_boxplot</span>(<span class="at" style="color: #657422;">width =</span> <span class="fl" style="color: #AD0000;">0.6</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-3">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">x =</span> <span class="st" style="color: #20794D;">"Percentage reasons cited, 1995-2011"</span>, <span class="at" style="color: #657422;">y =</span> <span class="st" style="color: #20794D;">""</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-4">  <span class="fu" style="color: #4758AB;">theme_light</span>(<span class="at" style="color: #657422;">base_size =</span> <span class="dv" style="color: #AD0000;">14</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-5">  <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">legend.position =</span> <span class="st" style="color: #20794D;">"none"</span>) </span></code></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div id="fig-boxplot" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-01-14-stacked-bar-alternatives/index_files/figure-html/fig-boxplot-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><p></p>
</figure>
</div>
</div>
</div>
<p>Here the reasons are positioned from bottom to top in order of increasing median value. I conclude (as do the authors) that the top reason for accepting a postdoc position is additional training in field. The next three reasons have similar median values, so their ordering is less meaningful.</p>
<p>By comparing ranges and interquartile ranges (IQRs) I can draw a conclusion obscured by the previous designs. The range and IQR of “Additional training in PhD field” are noticeably less dispersed than the same measures of all other reasons. Thus in-field-training is both the most frequent reason and the least variable year to year–a conclusion that is hidden when we emphasize time dependence.</p>
<p>Lastly, with no legend to decode, the audience should find the redesign easier to interpret than the original. And from a publisher’s perspective, the new chart occupies less space on the page and does not have to be printed in color—less important for online documents, but important considerations for printed works.</p>
<p><strong>Impact</strong></p>
<p>In discussing the stacked bar chart in the article, the authors state,</p>
<blockquote class="blockquote">
<p>The most frequently indicated reasons for taking a postdoc after PhD completion were additional training in PhD field, additional training outside of PhD field, and postdoc training is generally expected for careers in their PhD field. The reasons that engineering PhDs provided for obtaining postdoc training fluctuates between 1995 and 2011.</p>
</blockquote>
<p>My conclusions differ slightly from theirs and have a bit more nuance, though in neither case are the messages particularly compelling.</p>
<p>Nevertheless, the redesigned chart has an impact in serving its rhetorical goal better than the original. What one <em>sees</em> in the chart and what one <em>reads</em> in the text are more closely aligned than in the original. As Tufte <span class="citation" data-cites="Tufte:1997">(1997, 53)</span> writes,</p>
<blockquote class="blockquote">
<p>…if displays of data are to be truthful and compelling, the design logic of the display must reflect the intellectual logic of the analysis…</p>
</blockquote>
</section>
<section id="making-visual-comparisons" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="making-visual-comparisons">Making visual comparisons</h2>
<p><strong>The original chart</strong></p>
<p>In this chart, the authors provide a “descriptive summary of the relationship between postdoctoral training and subsequent career outcomes 7–9 years after PhD completion.”</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-01-14-stacked-bar-alternatives/fig3.png" class="img-fluid figure-img" style="width:75.0%"></p>
<p></p><p></p>
</figure>
</div>
<p>Data structure (Figure 3a)</p>
<ul>
<li>percentage of respondents in an employment sector, quantitative variable<br>
</li>
<li>employment sectors, nominal categorical variable, 5 levels<br>
</li>
<li>postdoc status, nominal categorical variable, 2 levels</li>
</ul>
<p>Data structure (Figure 3b)</p>
<ul>
<li>percentage of respondents in a work activity, quantitative variable<br>
</li>
<li>primary work activity, nominal categorical variable, 5 levels<br>
</li>
<li>postdoc status, nominal categorical variable, 2 levels</li>
</ul>
<p><strong>Redesign: dot chart</strong></p>
<p>Stacked bars of this type, like pie charts, show fractions of a whole. Such charts are a “good choice for lay audiences, but they certainly lack the accuracy of alternative representations” <span class="citation" data-cites="Doumont:2009">(Doumont 2009, 134)</span>. Such data are often best encoded using dot charts—charts with dots along a common scale <span class="citation" data-cites="Cleveland:1984">(Cleveland 1984)</span>.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">dt <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">fread</span>(<span class="st" style="color: #20794D;">"data/fig3.csv"</span>)</span>
<span id="cb7-2"></span>
<span id="cb7-3">dt3a <span class="ot" style="color: #003B4F;">&lt;-</span> dt[type <span class="sc" style="color: #5E5E5E;">%chin%</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"Employment sector"</span>)]</span>
<span id="cb7-4">dt3a[, sector <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> type_levels]</span>
<span id="cb7-5">dt3a[, type <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> <span class="cn" style="color: #8f5902;">NULL</span>]</span>
<span id="cb7-6">dt3a[, type_levels <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> <span class="cn" style="color: #8f5902;">NULL</span>]</span>
<span id="cb7-7"></span>
<span id="cb7-8">dt3b <span class="ot" style="color: #003B4F;">&lt;-</span> dt[type <span class="sc" style="color: #5E5E5E;">%chin%</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"Primary work activity"</span>)]</span>
<span id="cb7-9">dt3b[, activity <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> type_levels]</span>
<span id="cb7-10">dt3b[, type <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> <span class="cn" style="color: #8f5902;">NULL</span>]</span>
<span id="cb7-11">dt3b[, type_levels <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> <span class="cn" style="color: #8f5902;">NULL</span>]</span>
<span id="cb7-12"></span>
<span id="cb7-13">dt3b <span class="ot" style="color: #003B4F;">&lt;-</span> dt3b[.(<span class="at" style="color: #657422;">activity =</span> <span class="fu" style="color: #4758AB;">c</span>(</span>
<span id="cb7-14">  <span class="st" style="color: #20794D;">"Research and development"</span>, </span>
<span id="cb7-15">  <span class="st" style="color: #20794D;">"Teaching"</span>, </span>
<span id="cb7-16">  <span class="st" style="color: #20794D;">"Management and admin"</span>, </span>
<span id="cb7-17">  <span class="st" style="color: #20794D;">"Computer applications"</span>, </span>
<span id="cb7-18">  <span class="st" style="color: #20794D;">"Other"</span>), </span>
<span id="cb7-19">  <span class="at" style="color: #657422;">to =</span> <span class="fu" style="color: #4758AB;">c</span>(</span>
<span id="cb7-20">    <span class="st" style="color: #20794D;">"Res &amp; dev"</span>, </span>
<span id="cb7-21">    <span class="st" style="color: #20794D;">"Teaching"</span>, </span>
<span id="cb7-22">    <span class="st" style="color: #20794D;">"Mgmt &amp; admin"</span>, </span>
<span id="cb7-23">    <span class="st" style="color: #20794D;">"Computer apps"</span>, </span>
<span id="cb7-24">    <span class="st" style="color: #20794D;">"Other"</span>)), </span>
<span id="cb7-25">  on <span class="ot" style="color: #003B4F;">=</span> <span class="st" style="color: #20794D;">"activity"</span>, </span>
<span id="cb7-26">  activity <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> i.to]</span></code></pre></div>
</details>
</div>
<p>In the original stacked bar chart, the authors have one column for each postdoc status level, indicating the rhetorical goal of comparing the experiences of PhDs with postdocs to those without. This lends itself to plotting the dots for postdocs and non-postdocs along the same row of the chart, facilitating a direct visual comparison.</p>
<p>Below, the employment sector graph is redesigned as a dot chart with rows ordered from bottom to top in order of increasing mean percentage.</p>
<div class="cell page-columns page-full" data-fig.asp="0.35">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="fu" style="color: #4758AB;">ggplot</span>(dt3a, <span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> fraction, <span class="at" style="color: #657422;">y =</span> <span class="fu" style="color: #4758AB;">reorder</span>(sector, fraction, mean), <span class="at" style="color: #657422;">color =</span> status, <span class="at" style="color: #657422;">fill =</span> status)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb8-2">  <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">3</span>, <span class="at" style="color: #657422;">shape =</span> <span class="dv" style="color: #AD0000;">21</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb8-3">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">x =</span> <span class="st" style="color: #20794D;">"Percentage"</span>, </span>
<span id="cb8-4">       <span class="at" style="color: #657422;">y =</span> <span class="st" style="color: #20794D;">""</span>, </span>
<span id="cb8-5">       <span class="at" style="color: #657422;">title =</span> <span class="st" style="color: #20794D;">"Employment sector"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb8-6">  <span class="fu" style="color: #4758AB;">theme_light</span>(<span class="at" style="color: #657422;">base_size =</span> <span class="dv" style="color: #AD0000;">14</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb8-7">  <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">legend.title =</span> <span class="fu" style="color: #4758AB;">element_blank</span>()) <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb8-8">  <span class="fu" style="color: #4758AB;">scale_color_manual</span>(<span class="at" style="color: #657422;">values =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"black"</span>, <span class="st" style="color: #20794D;">"black"</span>)) <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb8-9">  <span class="fu" style="color: #4758AB;">scale_fill_manual</span>(<span class="at" style="color: #657422;">values =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"white"</span>, <span class="st" style="color: #20794D;">"black"</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb8-10">  <span class="fu" style="color: #4758AB;">scale_x_continuous</span>(<span class="at" style="color: #657422;">limits =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">60</span>), <span class="at" style="color: #657422;">breaks =</span> <span class="fu" style="color: #4758AB;">seq</span>(<span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">100</span>, <span class="dv" style="color: #AD0000;">10</span>))</span></code></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div id="fig-dot-chart-1" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-01-14-stacked-bar-alternatives/index_files/figure-html/fig-dot-chart-1-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><p></p>
</figure>
</div>
</div>
</div>
<p>In discussing the stacked bar chart in the article, the authors state,</p>
<blockquote class="blockquote">
<p>Most postdoctoral scholars and non-postdocs worked in industry 7–9 years after the PhD. However, the share of PhDs who worked in industry is lower among the postdoc group compared to non-postdocs. Compared with non-postdocs, a greater share of postdocs go on to tenure-track and non-tenure-track faculty positions.</p>
</blockquote>
<p>The argument is also supported by the dot chart but qualitative terms “most”, “lower”, etc. could be replaced with quantitative comparisons. For example, the dot chart supports the argument that industry employs just over 40% of postdocs and more than 50% of non-postdocs. Moreover, industry employs twice the number of postdocs than the next most popular sector (tenure-track), and more than three times the number of non-postdocs.</p>
<p>A similar outcome can be seen in the redesigned work activity chart.</p>
<div class="cell page-columns page-full" data-fig.asp="0.35">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="fu" style="color: #4758AB;">ggplot</span>(dt3b, <span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> fraction, <span class="at" style="color: #657422;">y =</span> <span class="fu" style="color: #4758AB;">reorder</span>(activity, fraction, mean), <span class="at" style="color: #657422;">color =</span> status, <span class="at" style="color: #657422;">fill =</span> status)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb9-2">  <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">3</span>, <span class="at" style="color: #657422;">shape =</span> <span class="dv" style="color: #AD0000;">21</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb9-3">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">x =</span> <span class="st" style="color: #20794D;">"Percentage"</span>, </span>
<span id="cb9-4">       <span class="at" style="color: #657422;">y =</span> <span class="st" style="color: #20794D;">""</span>, </span>
<span id="cb9-5">       <span class="at" style="color: #657422;">title =</span> <span class="st" style="color: #20794D;">"Primary work activity "</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb9-6">  <span class="fu" style="color: #4758AB;">theme_light</span>(<span class="at" style="color: #657422;">base_size =</span> <span class="dv" style="color: #AD0000;">14</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb9-7">  <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">legend.title =</span> <span class="fu" style="color: #4758AB;">element_blank</span>()) <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb9-8">  <span class="fu" style="color: #4758AB;">scale_color_manual</span>(<span class="at" style="color: #657422;">values =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"black"</span>, <span class="st" style="color: #20794D;">"black"</span>)) <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb9-9">  <span class="fu" style="color: #4758AB;">scale_fill_manual</span>(<span class="at" style="color: #657422;">values =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"white"</span>, <span class="st" style="color: #20794D;">"black"</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb9-10">  <span class="fu" style="color: #4758AB;">scale_x_continuous</span>(<span class="at" style="color: #657422;">limits =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">60</span>), <span class="at" style="color: #657422;">breaks =</span> <span class="fu" style="color: #4758AB;">seq</span>(<span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">100</span>, <span class="dv" style="color: #AD0000;">10</span>))</span></code></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div id="fig-dot-chart-2" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://graphdr.github.io/data-stories/posts/2022-01-14-stacked-bar-alternatives/index_files/figure-html/fig-dot-chart-2-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><p></p>
</figure>
</div>
</div>
</div>
<p>In discussing the stacked bar chart in the article, the authors state,</p>
<blockquote class="blockquote">
<p>Compared with non-postdocs, a greater proportion of postdoctoral scholars engage in research and development as their primary work activity. Meanwhile, a greater proportion of non-postdocs perform management and administrative duties.</p>
</blockquote>
<p>Again, the discussion is also consistent with the new chart but a quantitative comparison is easier to see: research and development employs over 40% of non-postdocs and over 50% of postdocs, which for both groups is at least four times the number in the next most popular sector (teaching).</p>
<p><strong>Impact</strong></p>
<p>Dot charts are superior to stacked bar charts for data of this type. As illustrated above, relative magnitudes are more easily visualized and quantified than with stacked bars. Even if one prefers not to include quantities in the verbal discussion, readers can easily make quantitative inferences on their own.</p>
<p>Also, in this particular case, the dot chart legend is much easier to decode, with two entries compared to 5 entries for the original stacked bars.</p>
</section>
<section id="recognizing-conventional-grip" class="level2">
<h2 class="anchored" data-anchor-id="recognizing-conventional-grip">Recognizing conventional grip</h2>
<p>I mentioned in the introduction that NSF reports from which some of these data were obtained sustain the visual convention of stacked bar charts even though the stacked-bar design is deficient compared to alternative designs available. This persistence of convention highlights what Kostelnick and Hassett call the <em>tenacity of conventional grip</em> <span class="citation" data-cites="Kostelnick+Hassett:2003">(2003, 171)</span>. They write,</p>
<blockquote class="blockquote">
<p>Readers become highly invested in the status quo because it cuts a well-worn path, and deviations from that familiar path can seem arduous, risky, and unnecessary. The well-worn path can give sanction to conventuional practices that seem to violate perceptual principles of effective design…once readers have acquired a knack for reading these conventions, readers become quite proficient and may strongly resist wandering off that path.</p>
</blockquote>
<p>However, conventional grip can create problems for both authors and audiences (ibid., 182),</p>
<blockquote class="blockquote">
<p>Although grip can greatly benefit users by creating a stable environment for shaping and interpreting visual language, conventions can also become so entrenched that they interfere with meaning making by not changing to match conditions or by leading to mindless, unwarranted conformity. Designers can easily succumb to conventional inertia and perhaps not even realize its rhetorical drawbacks.</p>
</blockquote>

</section>

<div id="quarto-appendix" class="default"><section id="additional-software-credits" class="level3 appendix"><h2 class="quarto-appendix-heading">Additional software credits</h2><div class="quarto-appendix-contents">

<ul>
<li><a href="https://CRAN.R-project.org/package=GGally">GGally</a> for the scatterplot matrix</li>
</ul>



</div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Cleveland:1984" class="csl-entry">
Cleveland, William S. 1984. <span>“<a href=""><span class="nocase">Graphical methods for data presentation: Full scale breaks, dot charts, and multibased logging</span></a>.”</span> <em>The American Statistician</em> 38 (4): 270–80.
</div>
<div id="ref-Doumont:2009" class="csl-entry">
Doumont, Jean-luc. 2009. <em><span class="nocase">Trees, Maps, and Theorems</span></em>. Belgium: <span>Principiae</span>.
</div>
<div id="ref-Emerson+Green+etal:2013" class="csl-entry">
Emerson, John W., Walton A. Green, Barret Schloerke, Jason Crowley, Dianne Cook, Heike Hofmann, and Hadley Wickham. 2013. <span>“<span class="nocase">The generalized pair plot</span>.”</span> <em>Journal of Computational and Graphical Statistics</em> 22 (1): 79–91. <a href="https://doi:10.1080/10618600.2012.694762">doi:10.1080/10618600.2012.694762</a>.
</div>
<div id="ref-Kostelnick+Hassett:2003" class="csl-entry">
Kostelnick, Charles, and Michael Hassett. 2003. <em><span>Shaping Information</span></em>. Carbondale, IL: <span>Southern Illinois university Press</span>.
</div>
<div id="ref-Main+Wang+Tan:2021" class="csl-entry">
Main, Joyce B., Yanbing Wang, and Li Tan. 2021. <span>“<span class="nocase">The career outlook of engineering PhDs: Influence of postdoctoral research positions on early career salaries and the attainment of tenure-track faculty positions</span>.”</span> <em>Journal of Engineering Education</em> 110 (4): 977–1002. <a href="https://doi.org/10.1002/jee.20416">https://doi.org/10.1002/jee.20416</a>.
</div>
<div id="ref-Tufte:1997" class="csl-entry">
Tufte, Edward. 1997. <em><span>Visual Explanations</span></em>. Cheshire, CT: <span>Graphics Press</span>.
</div>
<div id="ref-Wainer:1997" class="csl-entry">
Wainer, Howard. 1997. <em><span>Visual Revelations</span></em>. Mahwah, NJ: <span>Lawrence Erlbaum Assoc.</span>
</div>
</div></section></div> ]]></description>
  <category>R</category>
  <category>data storytelling</category>
  <category>engineering education</category>
  <guid>https://graphdr.github.io/data-stories/posts/2022-01-14-stacked-bar-alternatives/index.html</guid>
  <pubDate>Fri, 14 Jan 2022 05:00:00 GMT</pubDate>
  <media:content url="https://graphdr.github.io/data-stories/posts/2022-01-14-stacked-bar-alternatives/thumbnail.png" medium="image" type="image/png" height="93" width="144"/>
</item>
<item>
  <title>The missing relation</title>
  <link>https://graphdr.github.io/data-stories/posts/2015-07-20-the-missing-relation/index.html</link>
  <description><![CDATA[ 



<div class="callout-note callout callout-style-simple no-icon callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Summary
</div>
</div>
<div class="callout-body-container callout-body">
<p>In redesigning a bar chart, I add data for context that shifts the focus of the story. I also correct a visual distortion by substituting a scatterplot for a bar chart that has a non-zero baseline.</p>
</div>
</div>
<p>In August 2007, <em>Science</em> published a bar graph that illustrates how design decisions made to attract a reader’s eye can also distort and conceal meaning. While the distortions were surely unintentional, the integrity of the story in the data was compromised nevertheless.</p>
<p>A colleague and I noted the perceptual issues of this bar graph when the article first appeared. With the permission of the first author, Norm Fortenberry, we sent a shorter version of this critique to the <em>Science</em> editor. They responded by posting a scatterplot much like the one shown here in an online addendum.</p>
<p>Throughout the post, you can click on the “R code” pointer to see the script used to create the graphs. This first code chunk loads the packages used.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;"># packages</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;">library</span>(<span class="st" style="color: #20794D;">"data.table"</span>)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;">library</span>(<span class="st" style="color: #20794D;">"ggplot2"</span>)</span></code></pre></div>
</details>
</div>
<section id="the-original-graph" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="the-original-graph">The original graph</h2>
<p>The graph shows a time series of retention rates for two cohorts of undergraduate students <span class="citation" data-cites="Fortenberry+Sullivan+etal:2007">(Fortenberry et al. 2007)</span>. One cohort had matriculated in engineering in a First Year Engineering Program (FYEP) and one cohort had not (non-FYEP). The main story is clear, that retention rates drop over time for both cohorts but that FYEP students are always retained at a higher rate than non-FYEP students. Yet the graph design distorts one comparison and omits another.</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://graphdr.github.io/data-stories/posts/2015-07-20-the-missing-relation/science-figure.png" class="img-fluid figure-img"></p>
<p></p><p></p>
</figure>
</div>
</section>
<section id="visual-distortion" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="visual-distortion">Visual distortion</h2>
<p>The visual design distorts the relationship between the two cohorts. While the printed numbers show that the difference between the two cohorts remains fairly constant (about 10%) over time, the <em>visual</em> message conveyed by the bar heights is that the difference between cohorts increases over time. The FYEP bar is at first approximately 1/3 higher than the adjacent bar, then nearly twice as high, then more than three times as high.</p>
<div class="cell page-columns page-full" data-fig.asp="0.8">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="co" style="color: #5E5E5E;"># read data from blog data directory</span></span>
<span id="cb2-2">dt <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">fread</span>(<span class="st" style="color: #20794D;">"retention-2007.csv"</span>)</span>
<span id="cb2-3"></span>
<span id="cb2-4"><span class="co" style="color: #5E5E5E;"># grouped bar graph </span></span>
<span id="cb2-5"><span class="co" style="color: #5E5E5E;"># use y = pct - 50 to force ggplot to produce a non-zero baseline </span></span>
<span id="cb2-6"><span class="co" style="color: #5E5E5E;"># then relabel the y-axis scale, i.e., 0 is labeled 50%</span></span>
<span id="cb2-7"><span class="fu" style="color: #4758AB;">ggplot</span>(dt, <span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> term, <span class="at" style="color: #657422;">y =</span> pct<span class="dv" style="color: #AD0000;">-50</span>, <span class="at" style="color: #657422;">color =</span> status, <span class="at" style="color: #657422;">fill =</span> status)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb2-8">  <span class="fu" style="color: #4758AB;">geom_bar</span>(<span class="at" style="color: #657422;">stat =</span> <span class="st" style="color: #20794D;">"identity"</span>, </span>
<span id="cb2-9">           <span class="at" style="color: #657422;">position =</span> <span class="fu" style="color: #4758AB;">position_dodge</span>(), </span>
<span id="cb2-10">           <span class="at" style="color: #657422;">width =</span> <span class="fl" style="color: #AD0000;">0.8</span>, </span>
<span id="cb2-11">           <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"black"</span>) <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb2-12">  <span class="fu" style="color: #4758AB;">scale_x_continuous</span>(<span class="at" style="color: #657422;">breaks =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">3</span>, <span class="dv" style="color: #AD0000;">5</span>, <span class="dv" style="color: #AD0000;">7</span>), </span>
<span id="cb2-13">                     <span class="at" style="color: #657422;">labels =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"Third"</span>, <span class="st" style="color: #20794D;">"Fifth"</span>, <span class="st" style="color: #20794D;">"Seventh"</span>), </span>
<span id="cb2-14">                     <span class="at" style="color: #657422;">expand =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="fl" style="color: #AD0000;">0.05</span>, <span class="fl" style="color: #AD0000;">0.15</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb2-15">  <span class="fu" style="color: #4758AB;">scale_y_continuous</span>(<span class="at" style="color: #657422;">limits =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">40</span>), </span>
<span id="cb2-16">                     <span class="at" style="color: #657422;">breaks =</span> <span class="fu" style="color: #4758AB;">seq</span>(<span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">40</span>, <span class="dv" style="color: #AD0000;">10</span>), </span>
<span id="cb2-17">                     <span class="at" style="color: #657422;">labels =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"50%"</span>, <span class="st" style="color: #20794D;">"60%"</span>, <span class="st" style="color: #20794D;">"70%"</span>, <span class="st" style="color: #20794D;">"80%"</span>, <span class="st" style="color: #20794D;">"90%"</span>), </span>
<span id="cb2-18">                     <span class="at" style="color: #657422;">expand =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">0</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb2-19">  <span class="fu" style="color: #4758AB;">scale_fill_manual</span>(<span class="at" style="color: #657422;">values =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"gray80"</span>, <span class="st" style="color: #20794D;">"lightgoldenrod1"</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb2-20">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">x =</span> <span class="st" style="color: #20794D;">"Semester"</span>, </span>
<span id="cb2-21">       <span class="at" style="color: #657422;">y =</span> <span class="st" style="color: #20794D;">"Retention rate"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb2-22">  <span class="fu" style="color: #4758AB;">annotate</span>(<span class="st" style="color: #20794D;">"text"</span>, </span>
<span id="cb2-23">           <span class="at" style="color: #657422;">x =</span> <span class="fl" style="color: #AD0000;">0.1</span> <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">3</span>, <span class="dv" style="color: #AD0000;">5</span>, <span class="dv" style="color: #AD0000;">7</span>), </span>
<span id="cb2-24">           <span class="at" style="color: #657422;">y =</span> <span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">50</span> <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">85</span>, <span class="dv" style="color: #AD0000;">70</span>, <span class="dv" style="color: #AD0000;">62</span>), </span>
<span id="cb2-25">           <span class="at" style="color: #657422;">label =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"aprox. 1/3 higher"</span>, </span>
<span id="cb2-26">                     <span class="st" style="color: #20794D;">"approx. 2x higher"</span>, </span>
<span id="cb2-27">                     <span class="st" style="color: #20794D;">"more than</span><span class="sc" style="color: #5E5E5E;">\n</span><span class="st" style="color: #20794D;">3x higher"</span>), </span>
<span id="cb2-28">           <span class="at" style="color: #657422;">hjust =</span> <span class="dv" style="color: #AD0000;">0</span>) <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb2-29">  <span class="fu" style="color: #4758AB;">theme_light</span>() <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb2-30">  <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">legend.position =</span> <span class="st" style="color: #20794D;">"none"</span>, </span>
<span id="cb2-31">        <span class="at" style="color: #657422;">panel.grid.major =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(), </span>
<span id="cb2-32">        <span class="at" style="color: #657422;">panel.grid.minor =</span> <span class="fu" style="color: #4758AB;">element_blank</span>())</span></code></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div id="fig-non-zero-baseline" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://graphdr.github.io/data-stories/posts/2015-07-20-the-missing-relation/index_files/figure-html/fig-non-zero-baseline-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><p></p>
</figure>
</div>
</div>
</div>
<p>The problem is the non-zero baseline—a well-known concern when using bar charts. Naomi Robbins <a href="https://www.forbes.com/sites/naomirobbins/2012/08/28/must-zero-be-included-on-scales-of-graphs-another-look-at-fox-news-graph-and-huffs-gee-whiz-graph/?sh=677d422b259c">reminds us</a> that not all graphs require a zero baseline, contrary to Darrell Huff’s advice in his 1954 classic <em>How to Lie with Statistics</em>, but a bar graph without a zero baseline inevitably (and sometimes purposefully) exaggerates differences.</p>
<p>The caption reinforces the miscommunication by stating that the FYEP course “improved retention…into the third, fifth, and seventh semester,” subtly implying a difference that increases over time rather than remaining constant.</p>
</section>
<section id="data-structure" class="level2">
<h2 class="anchored" data-anchor-id="data-structure">Data structure</h2>
<p>Because the structure of a data set is an important factor in designing a chart, I classify the variables in Table 1.</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-data-structure" class="anchored">
<table class="table table-sm table-striped">
<caption>Table 1: Data structure</caption>
<thead>
<tr class="header">
<th style="text-align: left;">variable</th>
<th style="text-align: left;">structure</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">term</td>
<td style="text-align: left;">categorical, ordinal, discrete time, 3 levels</td>
</tr>
<tr class="even">
<td style="text-align: left;">status</td>
<td style="text-align: left;">categorical, nominal, 2 levels</td>
</tr>
<tr class="odd">
<td style="text-align: left;">percent retention</td>
<td style="text-align: left;">quantitative</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>The data are available in the blog <a href="https://github.com/graphdr/data-stories/tree/main/posts/2015-07-20-the-missing-relation">post directory</a>.</p>
<div class="cell">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;"># read prepared data</span></span>
<span id="cb3-2">dt <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">fread</span>(<span class="st" style="color: #20794D;">"retention-2007.csv"</span>)</span></code></pre></div>
</details>
</div>
</section>
<section id="redesign" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="redesign">Redesign</h2>
<p>A prominent element of this grouped-bar design is time on the horizontal axis, implying that time is the independent variable. Conventionally, time-dependent variables are best graphed as scatterplots with connected dots to display their evolution over time <span class="citation" data-cites="Doumont:2009">(Doumont 2009, 141)</span>. The difference between the two cohorts is clearly seen to be nearly constant.</p>
<div class="cell page-columns page-full" data-fig.asp="0.4">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="co" style="color: #5E5E5E;"># redesign the bar chart as a scatterplot</span></span>
<span id="cb4-2">f <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="at" style="color: #657422;">data =</span> dt, <span class="at" style="color: #657422;">mapping =</span> <span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> term, <span class="at" style="color: #657422;">y =</span> pct, <span class="at" style="color: #657422;">fill =</span> status)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb4-3">  </span>
<span id="cb4-4">  <span class="co" style="color: #5E5E5E;"># helper line to almost connect the dots </span></span>
<span id="cb4-5">  <span class="fu" style="color: #4758AB;">geom_line</span>(<span class="at" style="color: #657422;">linetype =</span> <span class="dv" style="color: #AD0000;">2</span>, <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"gray60"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb4-6">  </span>
<span id="cb4-7">  <span class="co" style="color: #5E5E5E;"># white point overprints the line</span></span>
<span id="cb4-8">  <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">9</span>, <span class="at" style="color: #657422;">shape =</span> <span class="dv" style="color: #AD0000;">16</span>, <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"white"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb4-9">  </span>
<span id="cb4-10">  <span class="co" style="color: #5E5E5E;"># data marker overprints the white space </span></span>
<span id="cb4-11">  <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">3</span>, <span class="at" style="color: #657422;">shape =</span> <span class="dv" style="color: #AD0000;">16</span>, <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"black"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb4-12">  </span>
<span id="cb4-13">  <span class="co" style="color: #5E5E5E;"># scales </span></span>
<span id="cb4-14">  <span class="fu" style="color: #4758AB;">scale_x_continuous</span>(<span class="at" style="color: #657422;">limits =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">1</span>, <span class="dv" style="color: #AD0000;">7</span>), <span class="at" style="color: #657422;">breaks =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">1</span>, <span class="dv" style="color: #AD0000;">3</span>, <span class="dv" style="color: #AD0000;">5</span>, <span class="dv" style="color: #AD0000;">7</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb4-15">  <span class="fu" style="color: #4758AB;">scale_y_continuous</span>(<span class="at" style="color: #657422;">limits =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">50</span>, <span class="dv" style="color: #AD0000;">100</span>), <span class="at" style="color: #657422;">breaks =</span> <span class="fu" style="color: #4758AB;">seq</span>(<span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">100</span>, <span class="dv" style="color: #AD0000;">20</span>)) <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb4-16">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">x =</span> <span class="st" style="color: #20794D;">"Semester"</span>, <span class="at" style="color: #657422;">y =</span> <span class="st" style="color: #20794D;">"Retention rate"</span>) <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb4-17">  </span>
<span id="cb4-18">  <span class="co" style="color: #5E5E5E;"># edit theme </span></span>
<span id="cb4-19">  <span class="fu" style="color: #4758AB;">theme_light</span>() <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb4-20">  <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">legend.position =</span> <span class="st" style="color: #20794D;">"none"</span>, </span>
<span id="cb4-21">        <span class="at" style="color: #657422;">panel.grid =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(), </span>
<span id="cb4-22">        <span class="at" style="color: #657422;">axis.text =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">11</span>), </span>
<span id="cb4-23">        <span class="at" style="color: #657422;">axis.title =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">11</span>))</span>
<span id="cb4-24"></span>
<span id="cb4-25"><span class="co" style="color: #5E5E5E;"># print</span></span>
<span id="cb4-26">f</span></code></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div id="fig-redesign-no-term-1" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://graphdr.github.io/data-stories/posts/2015-07-20-the-missing-relation/index_files/figure-html/fig-redesign-no-term-1-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><p></p>
</figure>
</div>
</div>
</div>
<p>However, a significant story in these data is (inadvertently) overlooked by omitting semester one, the point in time at which both cohorts would be considered 100% retained—the “missing relation” in the title. Only by including the starting time point can we see the importance of the early semesters.</p>
<p>The overlooked story is the early impact of the FYEP course with its higher rate of retention from semester 1 to 3. After semester 3, the factors affecting attrition seem to act on both groups equally—the lines are effectively parallel after semester 3. Thus the important impact of FYEP is in the first two terms. The visual story is clear when we include the missing term.</p>
<div class="cell page-columns page-full" data-fig.asp="0.4">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="co" style="color: #5E5E5E;"># add the missing term 1 </span></span>
<span id="cb5-2">sem1 <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">data.table</span>(<span class="at" style="color: #657422;">term =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">1</span>, <span class="dv" style="color: #AD0000;">1</span>), <span class="at" style="color: #657422;">status =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"fyep"</span>, <span class="st" style="color: #20794D;">"nonfyep"</span>), <span class="at" style="color: #657422;">pct =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">100</span>, <span class="dv" style="color: #AD0000;">100</span>))</span>
<span id="cb5-3">dt2 <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">rbindlist</span>(<span class="fu" style="color: #4758AB;">list</span>(sem1, dt))</span>
<span id="cb5-4"></span>
<span id="cb5-5"><span class="co" style="color: #5E5E5E;"># substitute data in the previous chart</span></span>
<span id="cb5-6">g <span class="ot" style="color: #003B4F;">&lt;-</span> f <span class="sc" style="color: #5E5E5E;">%+%</span> dt2</span>
<span id="cb5-7">g</span></code></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div id="fig-redesign-with-term-1" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://graphdr.github.io/data-stories/posts/2015-07-20-the-missing-relation/index_files/figure-html/fig-redesign-with-term-1-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><p></p>
</figure>
</div>
</div>
</div>
<p>One final design point: unlike a bar graph, a scatter plot does not require a zero baseline. However, I can include the full 0–100% range to display that the lowest rate of retention is still above 50%, an important result (as discussed in the prose of the article) compared to the retention rates of non-engineering disciplines. e.g., 42% in biological sciences and 30% in math and physical sciences.</p>
<div class="cell page-columns page-full" data-fig.asp="0.8">
<details>
<summary>R code</summary>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="co" style="color: #5E5E5E;"># start with the previous chart, replace the scale</span></span>
<span id="cb6-2">h <span class="ot" style="color: #003B4F;">&lt;-</span> g <span class="sc" style="color: #5E5E5E;">%+%</span> </span>
<span id="cb6-3">  <span class="fu" style="color: #4758AB;">scale_y_continuous</span>(<span class="at" style="color: #657422;">limits =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">100</span>), <span class="at" style="color: #657422;">breaks =</span> <span class="fu" style="color: #4758AB;">seq</span>(<span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">100</span>, <span class="dv" style="color: #AD0000;">20</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-4">  </span>
<span id="cb6-5">  <span class="co" style="color: #5E5E5E;"># label the lines</span></span>
<span id="cb6-6">  <span class="fu" style="color: #4758AB;">annotate</span>(<span class="st" style="color: #20794D;">"text"</span>, </span>
<span id="cb6-7">           <span class="at" style="color: #657422;">x =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">4</span>, <span class="dv" style="color: #AD0000;">2</span>), </span>
<span id="cb6-8">           <span class="at" style="color: #657422;">y =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">85</span>, <span class="dv" style="color: #AD0000;">68</span>), </span>
<span id="cb6-9">           <span class="at" style="color: #657422;">label =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"FYEP students</span><span class="sc" style="color: #5E5E5E;">\n</span><span class="st" style="color: #20794D;">(N = 2218)"</span>, <span class="st" style="color: #20794D;">"Non-FYEP students</span><span class="sc" style="color: #5E5E5E;">\n</span><span class="st" style="color: #20794D;">(N = 2942)"</span>), </span>
<span id="cb6-10">           <span class="at" style="color: #657422;">hjust =</span> <span class="dv" style="color: #AD0000;">0</span>)</span>
<span id="cb6-11">h</span></code></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div id="fig-final-redesign" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://graphdr.github.io/data-stories/posts/2015-07-20-the-missing-relation/index_files/figure-html/fig-final-redesign-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="context" class="level2">
<h2 class="anchored" data-anchor-id="context">Context</h2>
<p>My critique to this point has focused on clarity and a minimalist design aesthetic, hallmarks of the “rhetoric of science” <span class="citation" data-cites="Kostelnick:2008">(Kostelnick 2008)</span>. However, recognizing that these downward sloping curves represent decisions made by real students invites us to ask about the human stories in these data. Are the students in either group better off? Are the students who leave engineering graduating in other disciplines? Is retention even a concern to students? In light of such questions, the graphs seem inadequate, as if we’ve missed an opportunity to tell important human stories.</p>
<p>In the text of the article, the authors do address such concerns. Retention rates reflect student decisions that are influenced almost exclusively by human factors: “student’s background, college administrative issues, academic and social integration, attitude and motivation, and fit within an institution.” Thus the retention data are a surrogate measure of some combination of these factors.</p>
<p>The original graph displays only six paired values (rate and semester). And though my redesigned graph corrects the distortions of the original, it still displays only eight paired values. Neither graph has the visual impact it might have had if designed to convey the important story the authors tell in their prose.</p>

</section>

<div id="quarto-appendix" class="default"><section id="reprinted-aaas-material" class="level3 appendix"><h2 class="quarto-appendix-heading">Reprinted AAAS material</h2><div class="quarto-appendix-contents">

<p>Readers may view, browse, and/or download material for temporary copying purposes only, provided these uses are for noncommercial personal purposes. Except as provided by law, this material may not be further reproduced, distributed, transmitted, modified, adapted, performed, displayed, published, or sold in whole or in part, without prior written permission from the publisher.</p>



</div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Doumont:2009" class="csl-entry">
Doumont, Jean-luc. 2009. <em><span class="nocase">Trees, Maps, and Theorems</span></em>. Belgium: <span>Principiae</span>.
</div>
<div id="ref-Fortenberry+Sullivan+etal:2007" class="csl-entry">
Fortenberry, Norman L., Jacquelyn F. Sullivan, Peter N. Jordan, and Daniel W. Knight. 2007. <span>“<span class="nocase">Engineering education research aids instruction</span>.”</span> <em>Science</em> 317 (5842): 1175–76. <a href="https://doi.org/10.1126/science.1143834">https://doi.org/10.1126/science.1143834</a>.
</div>
<div id="ref-Kostelnick:2008" class="csl-entry">
Kostelnick, Charles. 2008. <span>“<a href=""><span class="nocase">The visual rhetoric of data displays: The conundrum of clarity</span></a>.”</span> <em>IEEE Transactions on Professional Communication</em> 51 (1): 116–30.
</div>
</div></section></div> ]]></description>
  <category>R</category>
  <category>data storytelling</category>
  <category>engineering education</category>
  <guid>https://graphdr.github.io/data-stories/posts/2015-07-20-the-missing-relation/index.html</guid>
  <pubDate>Mon, 20 Jul 2015 04:00:00 GMT</pubDate>
  <media:content url="https://graphdr.github.io/data-stories/posts/2015-07-20-the-missing-relation/thumbnail.png" medium="image" type="image/png" height="106" width="144"/>
</item>
</channel>
</rss>
