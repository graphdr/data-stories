{
  "hash": "579e60e96f43ceee363a8057a5bb2058",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Multiple studies, one chart\"\ndescription: |\n  Combining the results of studies with different time spans in a single chart when changes over time are the story.\ndate: \"September 5, 2022\"\ndate-format: \"YYYY--MM--DD\"\ncategories: [R, data storytelling, ggplot2, chart design]\nimage: \"thumbnail.png\"\ncap-location: margin\ndraft: false\n---\n\n\n\n\n\n\n\n:::{.callout-note}\n## Summary \n<em>I redesign a grouped-bar chart to attempt to better align the logic of the display with the logic of the argument. The redesigned chart provides better visual access to year-by-year comparisons by different combinations of categories and reveals nuances in the data not obvious in the original chart.</em>\n:::\n\nIn working on a [previous post](../2022-05-27-revisit-lying-chart/index.html), I cited an article on US sex education for adolescents [@Lindberg+Kantor:2022]. That article included a conventional grouped bar chart displaying results of five surveys over 25 years from the National Survey of Family Growth (NSFG). \n\nThe chart caught my attention because its visual design is slightly dissonant with its rhetorical purpose. Its purpose is to support the assertion that five surveys over 25 years reveal a decline in US sex education. Time is the implicit independent variable. The chart design, however, uses grouped bars in which evolution over time is not encoded to scale.  \n\nThe original chart supports the authors' argument, but I was curious if a redesigned chart, treating time as a scaled, explicit independent variable, could improve the visual rhetoric. And if so, does it reveal aspects of the data stories previously hidden? \n\nThe R code for the post is listed under the “R code” pointers. \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# packages used \nlibrary(\"data.table\")\nlibrary(\"ggplot2\")\nlibrary(\"ggpubfigs\")\n```\n:::\n\n\n\n\n## The original chart\n\nThe grouped bar chart by Lindberg and Kantor illustrates the changing fraction of US adolescents receiving sex education instruction from 1995 to 2019. The results are compiled from 5 studies, each with its own time span. Bars are grouped by educational topic and student sex.\n\n![Original figure. Percentage of adolescents (aged 15--19 years) who received instruction on two specific sex education topics before the age of 18. [@Lindberg+Kantor:2022]](gr2_lrg.jpg){#fig-original}\n\nIn their prose, the authors make the argument that \n\n> Young people today are less likely to receive instruction on key sex education topics than they were 25 years ago, as indicated by comparing the prevalence estimates from 2011--2015 and 2015--2019 calculated in this study to published estimates from earlier NSFG rounds. \n\nThe chart supports the assertion. The quantitative variable (percentage) is the bar height, encoded using a zero baseline that (correctly) avoids distorting visual comparisons. The survey years---the implicit independent variable---are in sequence from left to right and are encoded by a sequential gray-scale fill.\n\nGrouped-bar charts are generally OK for visually comparing bar heights within a group, but less useful for comparing between groups. For example, the evolution of \"Say No to Sex\"  for Females clearly shows a descending trend; the same information for Males is fairly constant. The design does not, however, facilitate direct, year-by-year comparisons between data in different clusters. Nor does it visually encode the temporal span of a study within the overall 25 years. \n\nIn addition, much of the chart portrays what Edward Tufte calls \"non-data-ink.\" In this instance, only the bar height (percentage) and the gray-scale (survey years) encode data---neither the width of a bar nor the area of a bar convey information. Such non-data-ink can distract a viewer from the intended message. In this example, the filled-in bars create a visual geography that draws my eye to the center of a cluster area---a sort of visual center of gravity. I have to consciously focus on the bar tops to make comparisons. \n\nIn my redesigned chart, I attempt to address these issues. \n\n\n\n## Data structure\n\nThe data structure is outlined in @tbl-data-structure. The percentage of teens aged 15--19 receiving instruction is the single quantitative variable. Because three of the studies cover a span of years, I treat the starting and ending years as separate variables. \n\n<small>\n\n::: {#tbl-data-structure .cell tbl-cap='Data structure'}\n::: {.cell-output-display}\n\n\n|variable                      |structure                         |\n|:-----------------------------|:---------------------------------|\n|year study starts             |categorical, ordinal, five levels |\n|year study ends               |categorical, ordinal, five levels |\n|educational topic             |categorical, nominal, two levels  |\n|student sex                   |categorical, nominal, two levels  |\n|percent receiving instruction |quantitative                      |\n\n\n:::\n:::\n\n</small>\n\nI don't have the original data tables, so I approximated the values by measuring the bar lengths in the original figure. These estimates are available in the blog data directory as a [CSV file](https://raw.githubusercontent.com/graphdr/data-stories/main/data/sex-ed-topics-data.csv). \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# read the data \ndt <- fread(\"data/sex-ed-topics-data.csv\", \n            colClasses = list(double = c(\"start\", \"end\", \"pct\")))\n\n# display\ndt[]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n    study start   end         Topic    Sex   pct\n    <int> <num> <num>        <char> <char> <num>\n 1:     1  1995  1995 Birth control Female    87\n 2:     1  1995  1995 Birth control   Male    81\n 3:     1  1995  1995 Say no to sex Female    92\n 4:     1  1995  1995 Say no to sex   Male    74\n 5:     2  2002  2002 Birth control Female    70\n 6:     2  2002  2002 Birth control   Male    66\n 7:     2  2002  2002 Say no to sex Female    86\n 8:     2  2002  2002 Say no to sex   Male    83\n 9:     3  2006  2010 Birth control Female    70\n10:     3  2006  2010 Birth control   Male    61\n11:     3  2006  2010 Say no to sex Female    89\n12:     3  2006  2010 Say no to sex   Male    82\n13:     4  2011  2015 Birth control Female    66\n14:     4  2011  2015 Birth control   Male    58\n15:     4  2011  2015 Say no to sex Female    84\n16:     4  2011  2015 Say no to sex   Male    82\n17:     5  2015  2019 Birth control Female    64\n18:     5  2015  2019 Birth control   Male    63\n19:     5  2015  2019 Say no to sex Female    81\n20:     5  2015  2019 Say no to sex   Male    80\n    study start   end         Topic    Sex   pct\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n## Redesign\n\nTo organize the chart, I convert the `Topic` and `Sex` variables to factors. I select the order of the factor levels to control the placement of panels and legend entries. \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# manually order two categories\ndt$Topic <- factor(dt$Topic, levels = c(\"Say no to sex\", \"Birth control\"))\ndt$Sex   <- factor(dt$Sex,   levels = c(\"Female\", \"Male\"))\n```\n:::\n\n\nThe original article argues that the decline in the quantitative variable evolves over time, thus a scatterplot design is my starting point. Time (discrete years) is on the horizontal scale and the percent receiving instruction on the vertical scale. One-year surveys are represented with \"point\" data markers and  multi-year surveys with line segments. Topics are assigned to panels and sex to color. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() +\n  geom_point(data = dt[start == end], \n             mapping = aes(x = start, y = pct, color = Sex), \n             size = 2.5) +\n  geom_segment(data = dt[start != end], \n               mapping = aes(x = start, xend = end, y = pct, yend = pct, color = Sex), \n               size = 1.5) + \n  facet_wrap(vars(Topic), ncol = 2) + \n  \n  # scales\n  scale_x_continuous(limits = c(1994, 2020), \n                     breaks = c(1995, 2002, 2006, 2011, 2015, 2019)) +\n  scale_y_continuous(limits = c(50, 100)) +\n  scale_color_manual(values = friendly_pal(\"vibrant_seven\")) + \n  labs(x = \"Survey year or span, inclusive\", \n       y = \"Percentage (%)\", \n       title = \"Comparing results of 5 surveys over 25 years\") +\n  \n  # customize the theme \n  theme_minimal() + \n  theme(legend.position = \"right\", \n        panel.spacing.x = unit(5, \"mm\"), \n        panel.grid.minor.x = element_blank(), \n        panel.border = element_rect(fill = NA, color = \"gray70\"))\n```\n\n::: {.cell-output-display}\n![Revised figure. Percentage of adolescents (aged 15--19 years) who received instruction on two specific sex education topics before the age of 18.](index_files/figure-html/fig-revised-1.png){#fig-revised width=672}\n:::\n:::\n\n\n\nUnlike the original chart, the time scale is in correct proportion. Scale markings match the survey dates.\n\nLike the original, the vertical scale is the percentage receiving instruction. Unlike bar charts however, this chart does not require a zero baseline. I  select an aspect ratio to highlight, but not distort, the comparisons.  \n\nWith topics in separate panels, the relative trends are much easier to see. With sex encoded by color, each facet permits a direct, year-by-year comparison between Female and Male survey responses on a topic. \n\nComparisons between panels is more difficult than comparisons within a panel, but removing the non-data-ink has made it easier to compare the data by topic and sex over time and in specific study years. \n\n:::{.callout-tip appearance=\"minimal\"}\n## Tip for ggplot2 users\n\nAn interesting challenge was choosing \"geoms\" when some studies appear in one year only and other studies span several years. If I use the segment geom only, the one-year studies disappear from the chart---in discrete time, these data have zero width as line segments. \n\nMy solution is to use a point geom for the one-year surveys and a segment geom for the multi-year surveys with each geom acting on its own data subset.  \n:::\n\n\n## Discussion \n\nThe authors' discussion of the original chart include the following points, that the revised chart also supports: \n\n- Young people today are less likely to receive instruction on key sex education topics than they were 25 years ago\n- For abstinence instruction, the share of female adolescents receiving instruction declined over the 25 year span; for males, the share increased once then remained stable. \n- For contraception instruction, the share declined over 25 years for both sexes, though the most recent survey showed a relative increase for males. \n\nThe revised chart supports each of these points with greater visual clarity than the original. Moreover, the new chart supports two additional, general observations:\n\n1. Females receive instruction at higher rates than males (though the gap has closed in recent years). \n\n2. Abstinence is nearly always instructed at higher rates than contraception. \n\nIn my opinion, the first observation would seem to reflect a cultural bias that views pregnancy as a \"womans' issue\" [@Phillips:2018]. The second, our society's willingness to indulge in (and fund) wishful thinking [@Guttmacher:2021].\n\nThe authors' original argument is supported by the new chart and with greater visual access to the underlying data than the original grouped bar chart. Thus in response to my original question, I think the visual rhetoric has been improved and previously hidden nuance has been revealed. \n\nLastly, encoding time to scale does not yield any particularly interesting insights regarding the survey results---but it does display the relative timing and duration of the surveys, possibly enhancing the credibility of the evidence. \n\n\n\n\n\n\n### Additional software credits {.appendix}\n  \n- [`ggpubfigs`](https://github.com/JLSteenwyk/ggpubfigs) for color-vision-deficient-friendly palettes \n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}