{
  "hash": "af4760bd7eb1896981a9d83b287ce0be",
  "result": {
    "markdown": "---\ntitle: Plot the variable of interest\ndescription: |\n  A chart best serves its rhetorical purpose by directly illustrating \n  the variables of interest discussed in the text. \ndate: 2022-02-03\ndate-format: \"YYYY-MM-DD\"\ndraft: false\ncategories: [R, Data storytelling, Engineering education]\nimage: \"thumbnail.png\"\ncap-location: margin\n---\n\n\n\n\n:::{.callout-note}\n## Summary \n<em>I redesign a stacked-bar chart to attempt to better align the logic of the display with the logic of the argument. The visual structure of the redesigned chart suggests a concomitant reorganization of the prose,  illustrating the interplay between visual and verbal rhetoric.</em>\n:::\n\nIn a 2021 article, the authors summarize 134 engineering-curricula articles for teachers of pre-college students. The authors classify the articles by grade level and the type of engineering inquiry [@Purzer+Quintana-Cifuentes+Menekse:2021]. \n\nIn section 7, the authors include a data table of numbers of articles by grade level and inquiry type. A stacked-bar chart represents the numbers in the table. In supporting their argument, however, the authors cite *ratios* of these values---ratios that might be inferred, but are not directly displayed, in the chart provided. \n\nI take the text to represent the authors' intended message and look for ways to more effectively represent that message visually. \n\nMy intention is not to critique the article as a whole, which develops a \n\"honeycomb of engineering\" research framework for examining how engineering concepts and practices are taught at pre-college levels. I focus instead on the interplay between data, argument, and charts in one section only. \n\nThe R code for the post is listed under the “R code” pointers.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# packages\nlibrary(\"data.table\")\nlibrary(\"ggplot2\")\nlibrary(\"cowplot\")\n```\n:::\n\n\n\n\n\n\n\n\n\n## Data structure\n\nIn the original Table 2, the authors classify 134 articles by grade level and the type of engineering inquiry. These are the raw numbers they cite in their discussion. The parenthetical titles in the column heading are the journals in which the articles appear. \n\n![(original Table 2) The distribution of the number of articles by engineering inquiry and grade level band.  [@Purzer+Quintana-Cifuentes+Menekse:2021.]](original-table-2.png){width=100%}\n\nBecause the structure of a data set is an important factor in designing a chart, I classify the variables in Table 1. The multiway dot chart was designed specifically for data of this type: one quantitative variable depending on two independent categorical variables [@Cleveland:1993, 302].\n\n\n\n::: {.cell}\n::: {.cell-output-display}\nTable: Data structure\n\n|variable                     |structure                      |\n|:----------------------------|:------------------------------|\n|number of published articles |quantitative                   |\n|type of engineering inquiry  |categorical, nominal, 6 levels |\n|grade level                  |categorical, ordinal, 3 levels |\n:::\n:::\n\n\n\nThe data are available in the blog data directory as a [CSV file](https://raw.githubusercontent.com/graphdr/data-stories/main/data/honeycomb-2021.csv). \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# read prepared data\ndt <- fread(\"data/honeycomb-2021.csv\")\n\n# order the levels of grade level\ndt <- dt[, grade_level := factor(grade_level, levels = c(\"Elementary School\", \"Middle School\", \"High School\"))]\n\n# compute percentage of articles by grade level\ndt[, pct_level := round(N / N_level * 100, 0)]\n\n# obtain the total N of articles\narticle_total <- sum(dt$N)\n```\n:::\n\n\n\n\n\n\n\n\n\n\n## Limitations of stacked bars\n\n\nThe original Figure 3 is a conventional stacked-bar representation of the numbers in Table 2. The authors improve on the usual default software settings by ordering the rows of the chart from top to bottom by increasing totals. \n\n![(original Figure 3) The representation of the six engineering inquiries as three grade-level bands published in the three NSTA journals between 2005 and 2019 [@Purzer+Quintana-Cifuentes+Menekse:2021.]](original-figure-3.png){width=100%}\n\nThe perceptual limitations of stacked-bar charts are well-known: visual comparisons are effective for quantities having a common baseline and are ineffective otherwise.  \n\n> Stacked bars work well when you want to compare totals across different categories, and then within a given category, you want some understanding of the subcomponent pieces. Notice though, that they work less well if you want to compare those subcomponent pieces across categories. This is because as soon as you get past the first series, you no longer have a consistent baseline to use to compare. This is a harder comparison for our eyes to make, so something to keep in mind when reaching for stacked bars. ---Cole Nussbaumer Knaflic [-@Knaflic:2017]\n\n\n\n\n\n\n\n\n\n\n## What's your point?\n\nReferring to the stacked-bar chart (original Figure 3) and the data table (original Table 2), the authors state, \n\n> A total of 134 articles that made explicit connections to engineering, included sufficient details on design challenges and engineering problems, and were labeled as engineering lessons (see Figure 3). Table 2 presents the frequency of these categories across three grade-level bands. Of the 134 articles, 63 (47%) were published at the elementary level in *Science & Children*, 51 (38%) in *Science Scope* representing the middle school, and 20 (15%) in *The Science Teacher* at the high school level.\n\nThe original Figure 3 does not reflect the logic of this argument. The stacked-bar chart visually compares article totals by type of inquiry and (as Knaflic says) offers some \"understanding of the sub-component pieces,\" but neither of these arguments are made in the text. \n\nSo what's the point of the chart?\n\n> What’s your point? Seriously, that’s the most important question to ask when creating a data visualization. ---Stephanie Evergreen [-@Evergreen:2021] \n\nIf the point of the chart is to illustrate the three percentages mentioned in the text (15%, 38%, and 47%), then a combined bar chart and table would serve. \n \n\n::: {.cell .fig-cap-location-margin fig.asp='0.2'}\n\n```{.r .cell-code}\n# aesthetic assignments across charts\ntext_col_x      <- 105\ntheme_text_size <- 11\ngeom_text_size  <- 4\ngeom_point_size <- 3.5\nbar_fill        <- \"#C2A5CF\" # light purple\ngray_text       <- \"#636363\"\n\n# subset selected data for this chart\nsel <- dt[, .(grade_level, N_level)]\nsel <- unique(sel)\n\n# basic bar chart\np <- ggplot(data = sel, mapping = aes(x = N_level, y = grade_level)) +\n  geom_bar(stat = \"identity\", width = 0.7, fill = bar_fill) +\n  scale_x_continuous(limits = c(-10, text_col_x)) +\n  coord_cartesian(clip = \"off\") +\n  labs(x = \"\", y = \"\")\n\n# edit theme \np <- p + \n  theme_minimal() +\n  theme(panel.grid  = element_blank(), \n        axis.text.x = element_blank(), \n        axis.text.y = element_text(size = theme_text_size), \n        plot.title  = element_text(size = theme_text_size, face = \"plain\", hjust = 0))\n\n# column of percentages\np <- p + \n  geom_text(aes(x = -5, y = reorder(grade_level, N_level), label = paste0(round(100 * N_level/article_total, 0), \"%\")), \n            hjust = 1, color = gray_text, size = geom_text_size)\n\n# column of N\np <- p + \n  geom_text(aes(x = text_col_x, y = reorder(grade_level, N_level), label = N_level), \n            hjust = 1, color = gray_text, size = geom_text_size)\n\n# total N\np <- p + \n  geom_text(x = text_col_x, y = 0, label = paste0(\"Total: \", article_total), \n            hjust = 1, color = gray_text, size = geom_text_size)\n\n# print the chart\np\n```\n\n::: {.cell-output-display}\n![Number of articles by grade level, 2005-2019.](index_files/figure-html/fig-table-bars-1-1.png){#fig-table-bars-1 width=672}\n:::\n:::\n\n\nIn this design, based on [@Doumont:2009, 135], bars are drawn horizontally so the labels are easily read. Combined with the tabulated numbers, a scale is unnecessary. To respect the proportion among the data, bars are shown in full (starting at zero). Because grade level is an ordinal category (ordered levels), I order the rows in \"graph order,\" that is, with increasing grade level from bottom to top.\n\nIn contrast, if the point of the original chart is to compare totals by type of inquiry---which the original figure supports but the text neglects---then a similar chart-table could be used. Because inquiry type is a nominal category (unordered levels), rows are ordered by the number of articles by type. \n\n\n::: {.cell .fig-cap-location-margin fig.asp='0.3'}\n\n```{.r .cell-code}\nggplot(data = dt, mapping = aes(x = N, y = reorder(inquiry, N_inquiry))) +\n  geom_bar(stat = \"identity\", width = 0.75, fill = bar_fill) +\n  scale_x_continuous(limits = c(-10, text_col_x)) +\n  coord_cartesian(clip = \"off\") +\n  labs(x = \"\", y = \"\") +\n  theme_minimal() +\n  theme(panel.grid  = element_blank(), \n        axis.text.x = element_blank(), \n        axis.text.y = element_text(size = theme_text_size), \n        plot.title  = element_text(size = theme_text_size, face = \"plain\", hjust = 0)) + \n\n  # column of percentages\n  geom_text(aes(x     = -5, \n                y     = reorder(inquiry, N_inquiry), \n                label = paste0(round(100 * N_inquiry/article_total, 0), \"%\")), \n            hjust = 1, color = gray_text) + \n  \n  # column of N\n  geom_text(aes(x = text_col_x, y = reorder(inquiry, N_inquiry), label = N_inquiry), \n            hjust = 1, color = gray_text, size = geom_text_size) +\n  \n  # total N\n  geom_text(x = text_col_x, y = 0, label = paste0(\"Total: \", article_total), \n            hjust = 1, color = gray_text, size = geom_text_size)\n```\n\n::: {.cell-output-display}\n![Number of articles by type of engineering inquiry, 2005-2019.](index_files/figure-html/fig-table-bars-2-1.png){#fig-table-bars-2 width=672}\n:::\n:::\n\n\nBoth of my suggested charts avoid the limitations of the stacked-bar chart and both support specific---and different---arguments. A short paragraph comparing  grade levels is quite distinct from one comparing inquiry types. Deciding which to use (or both) depends on the point(s) you want to make. The text is not clear on what point the original figure is making. \n\n\n\n\n\n\n\n\n## Interplay between chart and argument\n\nFollowing the paragraph quoted earlier, the article goes on to compare different ratios of numbers from the data table, with paragraphs organized around inquiry type. For example, the Design-Build-Test (DBT) discussion begins with,  \n\n> The DBT model was observed across all grade levels. These types of lessons and design projects were most popular at the elementary level, featured in 75% (47 of 63) of engineering lessons published at this grade level band, followed by 67% (34 of 51) at the middle-school level and 50% (10 of 20) at the high school level. In the DBT engineering lessons... [continues with project examples]\n\nHere the variable of interest is the \"popularity\" of DBT as a percentage of articles in a grade level band. In this next chart, I compare the stated percentages visually. \n\n\n::: {.cell .fig-cap-location-margin fig.asp='0.25'}\n\n```{.r .cell-code}\n# subset selected data for this chart\nsel <- dt[abbr == \"(DBT)\", .(grade_level, N, N_level, pct_level)]\n\nggplot(data = sel, mapping = aes(x = pct_level, y = grade_level)) +\n  geom_point(size = geom_point_size) +\n  scale_x_continuous(limits = c(0, 80), breaks = seq(0, 100, 10), expand = c(0, 0)) +\n  labs(x = \"Fraction of N articles at grade level (%)\", y = \"\", title = \"Design-Build-Test\") +\n  \n  # edit theme\n  theme_light() +\n  theme(axis.text  = element_text(size = theme_text_size),\n        plot.title = element_text(size = theme_text_size, face = \"plain\", hjust = 0), \n        panel.grid.minor = element_blank()) + \n\n  # total N per row\n  geom_text(aes(x = 1, y = grade_level, label = paste0(\"(N = \", N_level, \")\")),\n            hjust = 0, color = gray_text, size = geom_text_size)\n```\n\n::: {.cell-output-display}\n![Comparing fraction of DBT articles at three grade levels.](index_files/figure-html/fig-dot-chart-1-1.png){#fig-dot-chart-1 width=672}\n:::\n:::\n\n\nThe perceptual difficulty I have with this chart is that each row is a percentage of a different N. Conventionally, a comparison of percentages are based on a common denominator. Yet the chart accurately reflects the argument in the text---my perceptual difficulty with the chart suggests an underlying difficulty in the argument.\n\nWe encounter the same difficulty with the original stacked-bar chart. Visually, the DBT segments are shown as components of the DBT bar. Verbally, the DBT segments are discussed as percentages of sums of segments across all bars. \n\nThis is not to say there is anything wrong with the argument---only that the logic of the argument is not reflected in the design logic of the chart. \n\n**Chart redesign**\n\nI designed Figure 4 to better reflect the intellectual logic of the argument by plotting percentages of grade-level articles in the same panel. Thus all values in a panel have the same denominator and the percentages in a panel sum to 100%. Consistent with the data structure, the basic design (as expected) is a multiway dot chart.  \n\nTo compare key values across panels, I used color to highlight the three inquiries the grade-level bands have in common. Rows and panels are in graph order. The small bar charts along the side of the multiway chart show the relative proportions of N for each row and their sum is given at the bottom of each column. The names of the source journals are included in the panel headings.\n\n\n::: {.cell .fig-cap-location-margin fig.asp='0.8'}\n\n```{.r .cell-code}\n# subset for this chart, percentages set to NA don't print\nsel <- dt[pct_level == 0, pct_level := NA]\nsel[, level_journal := paste0(grade_level, \" (\", journal, \")\")]\n\n# plot 1: multiway dot plot\nplot1 <- ggplot(data = sel, mapping = aes(x = pct_level, y = reorder(inquiry, N_inquiry))) +\n  geom_point(size = geom_point_size, shape = 21, fill = \"white\") +\n  facet_wrap(vars(reorder(level_journal, unclass(grade_level))), ncol = 1, as.table = FALSE) +\n  scale_x_continuous(limits = c(0, 80), breaks = seq(0, 100, 10), expand = c(0, 0)) +\n  coord_cartesian(clip = \"off\") + \n  labs(x = \"Percentage of articles by grade level\", y = \"\") +\n  theme_light() +\n  theme(panel.grid.minor = element_blank(), \n        axis.text        = element_text(size = theme_text_size),\n        strip.background = element_blank(), \n        strip.text  = element_text(size = theme_text_size, color = \"black\", face = \"plain\", hjust = 0),\n        plot.title  = element_text(size = theme_text_size, face = \"plain\", hjust = 0), \n        # top, right, bottom, and left\n        plot.margin = unit(c(0, 0, 0, 0), \"mm\")) +\n  \n  # overprint the top three inquiry dots\n  geom_point(data = sel[abbr == \"(DBT)\"], shape = 21, fill = \"#1b9e77\", size = geom_point_size) + \n  geom_point(data = sel[abbr == \"(UCD)\"], shape = 21, fill = \"#d95f02\", size = geom_point_size) + \n  geom_point(data = sel[abbr == \"(ENS)\"], shape = 21, fill = \"#7570b3\", size = geom_point_size)\n\n# plot 2: bar chart on the side\nplot2 <- ggplot(data = sel, mapping = aes(x = N, y = reorder(inquiry, N_inquiry))) +\n  geom_bar(stat = \"identity\", width = 0.75, fill = bar_fill) +\n  facet_wrap(vars(grade_level), ncol = 1, as.table = FALSE) +\n  scale_x_continuous(limits = c(-20, max(sel$N))) +\n  coord_cartesian(clip = \"off\") + \n  labs(x = \"\", y = \"\", title =) +\n  \n  # edit theme\n  theme_light() +\n  theme(panel.grid = element_blank(), \n        axis.ticks = element_blank(), \n        panel.border = element_blank(), \n        axis.text.x = element_text(color = \"white\"),\n        axis.text.y = element_blank(), \n        strip.background = element_blank(), \n        strip.text = element_text(color = \"white\"),\n        # margins top, right, bottom, and left\n        plot.margin = unit(c(0, 0, 0, -5), \"mm\")) +\n\n  # \"N\" at the top of column\n  annotate(\"text\", x = -5, y = 7.25, label = \"N\", hjust = 1, color = gray_text, size = geom_text_size) +\n  \n  # column of N\n  geom_text(aes(x = -5, y = reorder(inquiry, N_inquiry), label = N),\n            hjust = 1, color = gray_text, size = geom_text_size) +\n  \n  # short line under column of numbers\n  geom_segment(aes(x = -20, y = 0.45,  xend = -0.8, yend = 0.45), color = gray_text) +\n  \n  # sum of N per level\n  geom_text(aes(x = -5, y = 0, label = N_level), hjust = 1, color = gray_text, size = geom_text_size)\n\n# combine the two plots\ncowplot::ggdraw() +\n  draw_plot(plot1, x = 0, y = 0, width = 0.8, height = 1) +\n  draw_plot(plot2, x = 0.82, y = 0, width = 0.18, height = 1)\n```\n\n::: {.cell-output-display}\n![Popularity of inquiry type by grade-level band. Color indicates inquiries the grade levels have in common. Bars show relative number of articles by row.](index_files/figure-html/fig-dot-chart-2-1.png){#fig-dot-chart-2 width=672}\n:::\n:::\n\n\nThe important feature of this design is that the majority of the percentages compared in the original text are visually compared in the figure. It also conveys all the textual information from the original data table. \n\nLike the missing entries in the original data table, missing inquiry types are easy to spot by the absence of a data marker. (In a strict sense, these are not missing data; the actual values are zero---as shown in the numerical columns of the side bar-charts.)\n\nWe can also see that the top three types of inquiry have the same rank order in all grade levels.  The bar charts help us recognize the extent to which the top two inquiry types dominate the literature.  \n\nAn added rhetorical advantage of this design to potential audiences such as pre-college teachers or creators of pre-college engineering materials is the snapshot it provides of the state of their area of interest.  \n\nLastly, that the organization of the chart is visually more effective suggests that a reorganization of the argument could also be more effective. The primary organization of the chart is by grade-level band. If I were to align the logic of the argument with the logic of the display, then the text too would be organized by grade-level band. For example, I might start the discussion as follows: \n\n\n:::{.callout-note}\n## Organizing the argument by grade level\n<em>The elementary school grade level had only three types of inquiry but the highest number of articles overall (N = 63). DBT is by far the largest portion of articles (75%) with UCD (21%) and ENS (4%) making up the rest. \n\nCompared to the elementary level, the middle school level had nearly as many articles (N = 51) and the same top three inquiry types. But with more inquiry types, the top three inquiries comprised smaller percentages of the whole: DBT (67%), UCD (18%), ENS (6%). Middle school is also the only level in which all six inquiry types are present. \n\nIn contrast, the high school level ... etc. \n</em>\n:::\n\n\n\n\n\nAligning visual rhetoric and verbal rhetoric in this fashion can be an important aid to a reader trying to follow the discussion. Moreover, this process can be an important aid to an authorial team in developing their message in the first place. The iterative interplay between constructing a chart and constructing an argument---between visual rhetoric and verbal rhetoric---is one of the most important aspects of data visualization.   \n\n\n\n\n\n### Additional software credits {.appendix}\n\n- [`cowplot`](https://CRAN.R-project.org/package=cowplot) for joining plots   \n  \n\n\n\n\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}