{
  "hash": "a0bd399e5ccef271ce0004b74ffaca12",
  "result": {
    "markdown": "---\ntitle: \"formatdown v0.1.2\"\ndescription: |\n    Adding functionality to formatting tools for numerical quantities in vectors or data frames when creating documents in rmarkdown or quarto markdown \ndate: \"July 9, 2023\"\ndate-format: \"YYYY--MM--DD\"\ncategories: [R, engineering notation, scientific notation, units, rmarkdown, quarto]\nimage: \"thumbnail.png\"\ncap-location: margin\ndraft: true\n---\n\n\n\n\n:::{.callout-note}\n## Summary \n<em>Add functionality to improve usability by addressing issues raised during testing. New arguments in the powers-of-ten function for math delimiters and fixed exponents. New functions to format decimal and integer values and to interact with the units package.</em>\n:::\n\nHaving successfully submitted the formatdown package to CRAN in November, 2022, I wrote a [post](https://graphdr.github.io/data-stories/posts/2022-11-18-formatdown/) to introduce the package and immediately uncovered several issues that had not appeared while working on the package vignettes. Those issues have been addressed and the latest release includes: \n\n- New arguments `delim` and `set_power` in `format_power()`.\n- New function `format_decimal()` and vignette.\n- New function `format_units()` and vignette.\n- New data sets `atmos`, `metals`, `water`, and `air_meas`.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(formatdown)\nlibrary(data.table)\nlibrary(knitr)\nlibrary(kableExtra)\n```\n:::\n\n\n## Delimiters\n\nA described in the original [post](https://graphdr.github.io/data-stories/posts/2022-11-18-formatdown/#delimiter-issue), `format_power()` rendered from a quarto document (as in this blog) failed when using `knitr::kable()` and `kableExtra::kbl()` even though they rendered correctly in the package vignette output. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nDT <- copy(air_meas)\nDT$pres <- format_power(DT$pres, 4)\n\nDT\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n         date  trial  humid  temp                    pres sp_gas  dens\n       <Date> <char> <fctr> <num>                  <char>  <int> <num>\n1: 2018-06-12      a    low 294.1 $101.1 \\\\times 10^{3}$     287 1.198\n2: 2018-06-13      b   high 294.1 $101.0 \\\\times 10^{3}$     287 1.196\n3: 2018-06-14      c    med 294.6 $101.1 \\\\times 10^{3}$     287 1.196\n4: 2018-06-15      d    low 293.4 $101.0 \\\\times 10^{3}$     287 1.200\n5: 2018-06-16      e   high 293.9 $101.1 \\\\times 10^{3}$     287 1.199\n```\n:::\n\n```{.r .cell-code}\nkableExtra::kbl(DT, align = \"r\")\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> date </th>\n   <th style=\"text-align:right;\"> trial </th>\n   <th style=\"text-align:right;\"> humid </th>\n   <th style=\"text-align:right;\"> temp </th>\n   <th style=\"text-align:right;\"> pres </th>\n   <th style=\"text-align:right;\"> sp_gas </th>\n   <th style=\"text-align:right;\"> dens </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 2018-06-12 </td>\n   <td style=\"text-align:right;\"> a </td>\n   <td style=\"text-align:right;\"> low </td>\n   <td style=\"text-align:right;\"> 294.1 </td>\n   <td style=\"text-align:right;\"> $101.1 \\times 10^{3}$ </td>\n   <td style=\"text-align:right;\"> 287 </td>\n   <td style=\"text-align:right;\"> 1.198 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2018-06-13 </td>\n   <td style=\"text-align:right;\"> b </td>\n   <td style=\"text-align:right;\"> high </td>\n   <td style=\"text-align:right;\"> 294.1 </td>\n   <td style=\"text-align:right;\"> $101.0 \\times 10^{3}$ </td>\n   <td style=\"text-align:right;\"> 287 </td>\n   <td style=\"text-align:right;\"> 1.196 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2018-06-14 </td>\n   <td style=\"text-align:right;\"> c </td>\n   <td style=\"text-align:right;\"> med </td>\n   <td style=\"text-align:right;\"> 294.6 </td>\n   <td style=\"text-align:right;\"> $101.1 \\times 10^{3}$ </td>\n   <td style=\"text-align:right;\"> 287 </td>\n   <td style=\"text-align:right;\"> 1.196 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2018-06-15 </td>\n   <td style=\"text-align:right;\"> d </td>\n   <td style=\"text-align:right;\"> low </td>\n   <td style=\"text-align:right;\"> 293.4 </td>\n   <td style=\"text-align:right;\"> $101.0 \\times 10^{3}$ </td>\n   <td style=\"text-align:right;\"> 287 </td>\n   <td style=\"text-align:right;\"> 1.200 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2018-06-16 </td>\n   <td style=\"text-align:right;\"> e </td>\n   <td style=\"text-align:right;\"> high </td>\n   <td style=\"text-align:right;\"> 293.9 </td>\n   <td style=\"text-align:right;\"> $101.1 \\times 10^{3}$ </td>\n   <td style=\"text-align:right;\"> 287 </td>\n   <td style=\"text-align:right;\"> 1.199 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n\n```{.r .cell-code}\nknitr::kable(DT, align = \"r\")\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> date </th>\n   <th style=\"text-align:right;\"> trial </th>\n   <th style=\"text-align:right;\"> humid </th>\n   <th style=\"text-align:right;\"> temp </th>\n   <th style=\"text-align:right;\"> pres </th>\n   <th style=\"text-align:right;\"> sp_gas </th>\n   <th style=\"text-align:right;\"> dens </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 2018-06-12 </td>\n   <td style=\"text-align:right;\"> a </td>\n   <td style=\"text-align:right;\"> low </td>\n   <td style=\"text-align:right;\"> 294.1 </td>\n   <td style=\"text-align:right;\"> $101.1 \\times 10^{3}$ </td>\n   <td style=\"text-align:right;\"> 287 </td>\n   <td style=\"text-align:right;\"> 1.198 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2018-06-13 </td>\n   <td style=\"text-align:right;\"> b </td>\n   <td style=\"text-align:right;\"> high </td>\n   <td style=\"text-align:right;\"> 294.1 </td>\n   <td style=\"text-align:right;\"> $101.0 \\times 10^{3}$ </td>\n   <td style=\"text-align:right;\"> 287 </td>\n   <td style=\"text-align:right;\"> 1.196 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2018-06-14 </td>\n   <td style=\"text-align:right;\"> c </td>\n   <td style=\"text-align:right;\"> med </td>\n   <td style=\"text-align:right;\"> 294.6 </td>\n   <td style=\"text-align:right;\"> $101.1 \\times 10^{3}$ </td>\n   <td style=\"text-align:right;\"> 287 </td>\n   <td style=\"text-align:right;\"> 1.196 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2018-06-15 </td>\n   <td style=\"text-align:right;\"> d </td>\n   <td style=\"text-align:right;\"> low </td>\n   <td style=\"text-align:right;\"> 293.4 </td>\n   <td style=\"text-align:right;\"> $101.0 \\times 10^{3}$ </td>\n   <td style=\"text-align:right;\"> 287 </td>\n   <td style=\"text-align:right;\"> 1.200 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2018-06-16 </td>\n   <td style=\"text-align:right;\"> e </td>\n   <td style=\"text-align:right;\"> high </td>\n   <td style=\"text-align:right;\"> 293.9 </td>\n   <td style=\"text-align:right;\"> $101.1 \\times 10^{3}$ </td>\n   <td style=\"text-align:right;\"> 287 </td>\n   <td style=\"text-align:right;\"> 1.199 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\nThe new `delim` argument in `format_power()` enables an author to change  delimiters from the default  `$ ... $` delimiters to `\\\\( ... \\\\)`. The argument is a character vector (length 1 or 2) defining the delimiters for marking up inline math. Possible values include \"`$`\" or \"`\\\\(`\", both of which create appropriate left and right delimiters. Alternatively, left and right can be defined explicitly in a character vector of length two, e.g., `c(\"$\", \"$\")` or `c(\"\\\\(\", \"\\\\)\")`. Custom delimiters can be assigned to suit the markup environment. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nDT <- copy(air_meas)\nDT$pres <- format_power(DT$pres, 4, delim = \"\\\\(\")\n\nDT\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n         date  trial  humid  temp                        pres sp_gas  dens\n       <Date> <char> <fctr> <num>                      <char>  <int> <num>\n1: 2018-06-12      a    low 294.1 \\\\(101.1 \\\\times 10^{3}\\\\)     287 1.198\n2: 2018-06-13      b   high 294.1 \\\\(101.0 \\\\times 10^{3}\\\\)     287 1.196\n3: 2018-06-14      c    med 294.6 \\\\(101.1 \\\\times 10^{3}\\\\)     287 1.196\n4: 2018-06-15      d    low 293.4 \\\\(101.0 \\\\times 10^{3}\\\\)     287 1.200\n5: 2018-06-16      e   high 293.9 \\\\(101.1 \\\\times 10^{3}\\\\)     287 1.199\n```\n:::\n\n```{.r .cell-code}\nkableExtra::kbl(DT, align = \"r\")\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> date </th>\n   <th style=\"text-align:right;\"> trial </th>\n   <th style=\"text-align:right;\"> humid </th>\n   <th style=\"text-align:right;\"> temp </th>\n   <th style=\"text-align:right;\"> pres </th>\n   <th style=\"text-align:right;\"> sp_gas </th>\n   <th style=\"text-align:right;\"> dens </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 2018-06-12 </td>\n   <td style=\"text-align:right;\"> a </td>\n   <td style=\"text-align:right;\"> low </td>\n   <td style=\"text-align:right;\"> 294.1 </td>\n   <td style=\"text-align:right;\"> \\(101.1 \\times 10^{3}\\) </td>\n   <td style=\"text-align:right;\"> 287 </td>\n   <td style=\"text-align:right;\"> 1.198 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2018-06-13 </td>\n   <td style=\"text-align:right;\"> b </td>\n   <td style=\"text-align:right;\"> high </td>\n   <td style=\"text-align:right;\"> 294.1 </td>\n   <td style=\"text-align:right;\"> \\(101.0 \\times 10^{3}\\) </td>\n   <td style=\"text-align:right;\"> 287 </td>\n   <td style=\"text-align:right;\"> 1.196 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2018-06-14 </td>\n   <td style=\"text-align:right;\"> c </td>\n   <td style=\"text-align:right;\"> med </td>\n   <td style=\"text-align:right;\"> 294.6 </td>\n   <td style=\"text-align:right;\"> \\(101.1 \\times 10^{3}\\) </td>\n   <td style=\"text-align:right;\"> 287 </td>\n   <td style=\"text-align:right;\"> 1.196 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2018-06-15 </td>\n   <td style=\"text-align:right;\"> d </td>\n   <td style=\"text-align:right;\"> low </td>\n   <td style=\"text-align:right;\"> 293.4 </td>\n   <td style=\"text-align:right;\"> \\(101.0 \\times 10^{3}\\) </td>\n   <td style=\"text-align:right;\"> 287 </td>\n   <td style=\"text-align:right;\"> 1.200 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2018-06-16 </td>\n   <td style=\"text-align:right;\"> e </td>\n   <td style=\"text-align:right;\"> high </td>\n   <td style=\"text-align:right;\"> 293.9 </td>\n   <td style=\"text-align:right;\"> \\(101.1 \\times 10^{3}\\) </td>\n   <td style=\"text-align:right;\"> 287 </td>\n   <td style=\"text-align:right;\"> 1.199 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n\n```{.r .cell-code}\nknitr::kable(DT, align = \"r\")\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> date </th>\n   <th style=\"text-align:right;\"> trial </th>\n   <th style=\"text-align:right;\"> humid </th>\n   <th style=\"text-align:right;\"> temp </th>\n   <th style=\"text-align:right;\"> pres </th>\n   <th style=\"text-align:right;\"> sp_gas </th>\n   <th style=\"text-align:right;\"> dens </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 2018-06-12 </td>\n   <td style=\"text-align:right;\"> a </td>\n   <td style=\"text-align:right;\"> low </td>\n   <td style=\"text-align:right;\"> 294.1 </td>\n   <td style=\"text-align:right;\"> \\(101.1 \\times 10^{3}\\) </td>\n   <td style=\"text-align:right;\"> 287 </td>\n   <td style=\"text-align:right;\"> 1.198 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2018-06-13 </td>\n   <td style=\"text-align:right;\"> b </td>\n   <td style=\"text-align:right;\"> high </td>\n   <td style=\"text-align:right;\"> 294.1 </td>\n   <td style=\"text-align:right;\"> \\(101.0 \\times 10^{3}\\) </td>\n   <td style=\"text-align:right;\"> 287 </td>\n   <td style=\"text-align:right;\"> 1.196 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2018-06-14 </td>\n   <td style=\"text-align:right;\"> c </td>\n   <td style=\"text-align:right;\"> med </td>\n   <td style=\"text-align:right;\"> 294.6 </td>\n   <td style=\"text-align:right;\"> \\(101.1 \\times 10^{3}\\) </td>\n   <td style=\"text-align:right;\"> 287 </td>\n   <td style=\"text-align:right;\"> 1.196 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2018-06-15 </td>\n   <td style=\"text-align:right;\"> d </td>\n   <td style=\"text-align:right;\"> low </td>\n   <td style=\"text-align:right;\"> 293.4 </td>\n   <td style=\"text-align:right;\"> \\(101.0 \\times 10^{3}\\) </td>\n   <td style=\"text-align:right;\"> 287 </td>\n   <td style=\"text-align:right;\"> 1.200 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2018-06-16 </td>\n   <td style=\"text-align:right;\"> e </td>\n   <td style=\"text-align:right;\"> high </td>\n   <td style=\"text-align:right;\"> 293.9 </td>\n   <td style=\"text-align:right;\"> \\(101.1 \\times 10^{3}\\) </td>\n   <td style=\"text-align:right;\"> 287 </td>\n   <td style=\"text-align:right;\"> 1.199 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n\n### Additional software credits {.appendix}\n\n- [`checkmate`](https://mllg.github.io/checkmate/) for internal function argument checks \n- [`wrapr`](https://winvector.github.io/wrapr/) for internal function authoring tools\n- [`units`](https://r-quantities.github.io/units/) for managing units of  physical quantities \n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/kePrint-0.0.1/kePrint.js\"></script>\r\n<link href=\"../../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}